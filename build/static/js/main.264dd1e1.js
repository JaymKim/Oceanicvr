/*! For license information please see main.264dd1e1.js.LICENSE.txt */
(()=>{var e={24:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.r(t),n.d(t,{clsx:()=>i,default:()=>s});const s=i},43:(e,t,n)=>{"use strict";e.exports=n(202)},136:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(43)),i=h(n(173)),s=h(n(950)),a=h(n(24)),o=n(212),l=n(777),c=n(447),u=h(n(935)),d=h(n(387));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends r.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:r}=t;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}constructor(e){super(e),m(this,"onDragStart",((e,t)=>{(0,d.default)("Draggable: onDragStart: %j",t);if(!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),m(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const n=(0,l.createDraggableData)(this,t),r={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=r;r.x+=this.state.slackX,r.y+=this.state.slackY;const[i,s]=(0,l.getBoundPosition)(this,r.x,r.y);r.x=i,r.y=s,r.slackX=this.state.slackX+(e-r.x),r.slackY=this.state.slackY+(t-r.y),n.x=r.x,n.y=r.y,n.deltaX=r.x-this.state.x,n.deltaY=r.y-this.state.y}if(!1===this.props.onDrag(e,n))return!1;this.setState(r)})),m(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const n={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){"undefined"!==typeof window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:s.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:n,defaultPosition:i,defaultClassName:s,defaultClassNameDragging:c,defaultClassNameDragged:d,position:h,positionOffset:f,scale:m,...g}=this.props;let v={},y=null;const b=!Boolean(h)||this.state.dragging,w=h||i,x={x:(0,l.canDragX)(this)&&b?this.state.x:w.x,y:(0,l.canDragY)(this)&&b?this.state.y:w.y};this.state.isElementSVG?y=(0,o.createSVGTransform)(x,f):v=(0,o.createCSSTransform)(x,f);const S=(0,a.default)(n.props.className||"",s,{[c]:this.state.dragging,[d]:this.state.dragged});return r.createElement(u.default,p({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:S,style:{...n.props.style,...v},transform:y}))}}t.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...u.default.propTypes,axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),m(g,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+I(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),T(a,t,i,"",(function(e){return e}))):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+I(o=e[c],c);l+=T(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,i,u=s+I(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},212:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=c,t.addEvent=function(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&c(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const n=l(e,t,"px");return{[(0,i.browserPrefixToKey)("transform",i.default)]:n}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,r.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,r.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,r.int)(n.paddingTop),t-=(0,r.int)(n.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,r.int)(n.paddingLeft),t-=(0,r.int)(n.paddingRight),t},t.matchesSelector=o,t.matchesSelectorAndParentsTo=function(e,t,n){let r=e;do{if(o(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},t.offsetXYFromParent=function(e,t,n){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-r.left)/n,s=(e.clientY+t.scrollTop-r.top)/n;return{x:i,y:s}},t.outerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,r.int)(n.borderTopWidth),t+=(0,r.int)(n.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,r.int)(n.borderLeftWidth),t+=(0,r.int)(n.borderRightWidth),t},t.removeClassName=u,t.removeEvent=function(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&u(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(t){}};var r=n(447),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(561));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}let a="";function o(e,t){return a||(a=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,r.isFunction)(e[t])}))),!!(0,r.isFunction)(e[a])&&e[a](t)}function l(e,t,n){let{x:r,y:i}=e,s="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){const e="".concat("string"===typeof t.x?t.x:t.x+n),r="".concat("string"===typeof t.y?t.y:t.y+n);s="translate(".concat(e,", ").concat(r,")")+s}return s}function c(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function u(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&R(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(_),_=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,E=null,_=-1,N=5,I=-1;function T(){return!(t.unstable_now()-I<N)}function A(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?k():(C=!1,E=null)}}else C=!1}if("function"===typeof b)k=function(){b(A)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,P=j.port2;j.port1.onmessage=A,k=function(){P.postMessage(null)}}else k=function(){v(A,0)};function D(e){E=e,C||(C=!0,k())}function R(e,n){_=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(_),_=-1):g=!0,R(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){0}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"===typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"===typeof e&&!isNaN(e)}},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=r;const n=["Moz","Webkit","O","ms"];function r(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window)return"";const r=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!r)return"";if(t in r)return"";for(let s=0;s<n.length;s++)if(i(t,n[s])in r)return n[s];return""}function i(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}t.default=r()},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case E:return"Profiler";case C:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ce=null;function Ee(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function _e(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function Ne(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Te(){}var Ae=!1;function je(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==ke||null!==Ce)&&(Te(),Ne())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){De=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Be={onError:function(e){Le=!0,Me=e}};function Ve(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,Oe.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,kt,Ct,Et,_t=!1,Nt=[],It=null,Tt=null,At=null,jt=new Map,Pt=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){_t=!1,null!==It&&Ut(It)&&(It=null),null!==Tt&&Ut(Tt)&&(Tt=null),null!==At&&Ut(At)&&(At=null),jt.forEach(Ft),Pt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Vt(t,e)}if(0<Nt.length){Vt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Tt&&Vt(Tt,e),null!==At&&Vt(At,e),jt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var $t=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Wt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Gt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Kt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return jt.set(s,Lt(jt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=yi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Cn}var _n=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(_n),In=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(jn),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Rn||On&&8<On&&11>=On),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Kn(e){Ur(e,0)}function Qn(e){if(G(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Hn(t,Gn,e,xe(e)),je(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},kr={},Cr={};function Er(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return kr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var _r=Er("animationend"),Nr=Er("animationiteration"),Ir=Er("animationstart"),Tr=Er("transitionend"),Ar=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<jr.length;Dr++){var Rr=jr[Dr];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(_r,"onAnimationEnd"),Pr(Nr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}je((function(){var r=s,i=xe(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case _r:case Nr:case Ir:l=vn;break;case Tr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:wi(l),f=null==c?o:wi(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(a,o,l,u,!1),null!==c&&null!==d&&Kr(a,d,c,u,!0)}if("select"===(l=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(qn(o))if(Yn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?wi(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(v=Wr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Bn(e,t)?(e=en(),Zt=Jt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Ur(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pe(n,s))&&a.unshift(Hr(n,l,o)):i||null!=(l=Pe(n,s))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Si=[],ki=-1;function Ci(e){return{current:e}}function Ei(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function _i(e,t){ki++,Si[ki]=e.current,e.current=t}var Ni={},Ii=Ci(Ni),Ti=Ci(!1),Ai=Ni;function ji(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ti),Ei(Ii)}function Ri(e,t,n){if(Ii.current!==Ni)throw Error(s(168));_i(Ii,t),_i(Ti,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ai=Ii.current,_i(Ii,e),_i(Ti,Ti.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ti),Ei(Ii),_i(Ii,e)):Ei(Ti),_i(Ti,n)}var Ui=null,Fi=!1,Bi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{bt=t,Bi=!1}}return null}var $i=[],qi=0,Hi=null,Wi=0,Gi=[],Ki=0,Qi=null,Xi=1,Yi="";function Ji(e,t){$i[qi++]=Wi,$i[qi++]=Hi,Hi=e,Wi=t}function Zi(e,t,n){Gi[Ki++]=Xi,Gi[Ki++]=Yi,Gi[Ki++]=Qi,Qi=e;var r=Xi;e=Yi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Yi=s+e}else Xi=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=$i[--qi],$i[qi]=null,Wi=$i[--qi],$i[qi]=null;for(;e===Qi;)Qi=Gi[--Ki],Gi[Ki]=null,Yi=Gi[--Ki],Gi[Ki]=null,Xi=Gi[--Ki],Gi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Xi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case S:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),is&&Ji(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Ji(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return is&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((s=Oc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case S:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(a,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(O(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Mc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),Ss=Ci(null),ks=null,Cs=null,Es=null;function _s(){Es=Cs=ks=null}function Ns(e){var t=Ss.current;Ei(Ss),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){ks=e,Es=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===ks)throw Error(s(308));Cs=e,ks.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var js=null;function Ps(e){null===js?js=[e]:js.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function $s(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Hs=Ci(qs),Ws=Ci(qs),Gs=Ci(qs);function Ks(e){if(e===qs)throw Error(s(174));return e}function Qs(e,t){switch(_i(Gs,t),_i(Ws,e),_i(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Hs),_i(Hs,t)}function Xs(){Ei(Hs),Ei(Ws),Ei(Gs)}function Ys(e){Ks(Gs.current);var t=Ks(Hs.current),n=le(t,e.type);t!==n&&(_i(Ws,e),_i(Hs,n))}function Js(e){Ws.current===e&&(Ei(Hs),Ei(Ws))}var Zs=Ci(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Ya,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function ka(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,Oa(_a.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Aa(9,Ea.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&sa)||Ca(n,t,i)}return i}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&Ia(e)}function _a(e,t,n){return n((function(){Na(t)&&Ia(e)}))}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ia(e){var t=Rs(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return ya().memoizedState}function Pa(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Aa(t,n,s,r))}aa.flags|=e,i.memoizedState=Aa(1|t,n,s,r)}function Ra(e,t){return Pa(8390656,8,e,t)}function Oa(e,t){return Da(2048,8,e,t)}function La(e,t){return Da(4,2,e,t)}function Ma(e,t){return Da(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Ua.bind(null,t,e),n)}function Ba(){}function Va(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ha(){return ya().memoizedState}function Wa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ka(e))Qa(t,n);else if(null!==(n=Ds(e,t,n,r))){nc(n,e,r,ec()),Xa(n,t,r)}}function Ga(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ka(e))Qa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ds(e,t,i,r))&&(nc(n,e,r,i=ec()),Xa(n,t,r))}}function Ka(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Qa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ya={readContext:As,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:As,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ta,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Tl)throw Error(s(349));0!==(30&sa)||Ca(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ra(_a.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Tl.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:As,useCallback:Va,useContext:As,useEffect:Oa,useImperativeHandle:Fa,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:za,useReducer:wa,useRef:ja,useState:function(){return wa(ba)},useDebugValue:Ba,useDeferredValue:function(e){return $a(ya(),oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:As,useCallback:Va,useContext:As,useEffect:Oa,useImperativeHandle:Fa,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:za,useReducer:xa,useRef:ja,useState:function(){return xa(ba)},useDebugValue:Ba,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:$a(t,oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nc(t,e,i,r),Bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nc(t,e,i,r),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fs(e,i,r))&&(nc(t,e,r,n),Bs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ni,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Pi(t)?Ai:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?ji(e,i):Ni),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Pi(t)?Ai:Ii.current,i.context=ji(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),uo(0,t)},n}function po(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return Ts(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||bo?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function So(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return _o(e,t,n,r,i)}function Co(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Dl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Dl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,_i(Dl,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_i(Dl,Pl),Pl|=r;return wo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _o(e,t,n,r,i){var s=Pi(n)?Ai:Ii.current;return s=ji(t,s),Ts(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||bo?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function No(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(Ts(t,i),null===t.stateNode)$o(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=ji(t,c=Pi(n)?Ai:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Os=!1;var h=t.memoizedState;a.state=h,zs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ti.current||Os?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Os||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=ji(t,l=Pi(n)?Ai:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Os=!1,h=t.memoizedState,a.state=h,zs(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Ti.current||Os?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Os||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,s,i)}function Io(e,t,n,r,i,s){Eo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),qo(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Qs(e,t.containerInfo)}function Ao(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wo(e,t,n,r),t.child}var jo,Po,Do,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_i(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Oc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Tl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Rs(e,i),nc(r,e,i,-1))}return mc(),Fo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Ki++]=Xi,Gi[Ki++]=Yi,Gi[Ki++]=Qi,Xi=e.id,Yi=e.overflow,Qi=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Dc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Vo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vo(t,!0,n,null,s);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Pi(t.type)&&Di(),Wo(t),null;case 3:return r=t.stateNode,Xs(),Ei(Ti),Ei(Ii),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Po(e,t),Wo(t),null;case 5:Js(t);var i=Ks(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Ks(Hs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":ie(r,a),Fr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,jo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ks(Gs.current),Ks(Hs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wo(t),null;case 13:if(Ei(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Xs(),Po(e,t),null===e&&zr(t.stateNode.containerInfo),Wo(t),null;case 10:return Ns(t.type._context),Wo(t),null;case 19:if(Ei(Zs),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>zl&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*Ye()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,_i(Zs,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ei(Ti),Ei(Ii),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ei(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Zs),null;case 4:return Xs(),null;case 10:return Ns(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Do=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ks(Hs.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Xo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Xo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Cc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,hl(e,t,n),Xo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Cc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Cc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Cc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Ye())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||d,ml(t,e),Xo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Jo=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Cc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Jo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var i=Jo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Qo;var c=Xo;if(Qo=a,(Xo=l)&&!c)for(Jo=i;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Jo=l):Sl(i);for(;null!==s;)Jo=s,bl(s,t,n),s=s.sibling;Jo=i,Qo=o,Xo=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Jo=s):wl(e)}}function wl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&$s(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$s(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&il(t)}catch(f){Cc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function xl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function Sl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Cc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cc(t,a,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var kl,Cl=Math.ceil,El=w.ReactCurrentDispatcher,_l=w.ReactCurrentOwner,Nl=w.ReactCurrentBatchConfig,Il=0,Tl=null,Al=null,jl=0,Pl=0,Dl=Ci(0),Rl=0,Ol=null,Ll=0,Ml=0,Ul=0,Fl=null,Bl=null,Vl=0,zl=1/0,$l=null,ql=!1,Hl=null,Wl=null,Gl=!1,Kl=null,Ql=0,Xl=0,Yl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Ye():-1!==Jl?Jl:Jl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==jl?jl&-jl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Yl=null,Error(s(185));vt(e,n,r),0!==(2&Il)&&e===Tl||(e===Tl&&(0===(2&Il)&&(Ml|=n),4===Rl&&oc(e,jl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(zl=Ye()+500,Fi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Tl?jl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),ai((function(){0===(6&Il)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Il;Il|=2;var a=pc();for(Tl===e&&jl===t||($l=null,zl=Ye()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}_s(),El.current=a,Il=i,null!==Al?t=0:(Tl=null,jl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Ye()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Bl,$l);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Vl+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bl,$l),t);break}xc(e,Bl,$l);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bl,$l),r);break}xc(e,Bl,$l);break;default:throw Error(s(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Ul,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(s(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,$l),rc(e,Ye()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(zl=Ye()+500,Fi&&zi())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Il)&&Sc();var t=Il;Il|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(Il=t))&&zi()}}function dc(){Pl=Dl.current,Ei(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Xs(),Ei(Ti),Ei(Ii),na();break;case 5:Js(r);break;case 4:Xs();break;case 13:case 19:Ei(Zs);break;case 10:Ns(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Al=e=Dc(e.current,null),jl=Pl=t,Rl=0,Ol=null,Ul=Ml=Ll=0,Bl=Fl=null,null!==js){for(t=0;t<js.length;t++)if(null!==(r=(n=js[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}js=null}return e}function fc(e,t){for(;;){var n=Al;try{if(_s(),ra.current=Ya,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,_l.current=null,null===n||null===n.return){Rl=1,Ol=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Ya,null===e?Ya:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Tl,jl)}function gc(e,t){var n=Il;Il|=2;var r=pc();for(Tl===e&&jl===t||($l=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(_s(),Il=n,El.current=r,null!==Al)throw Error(s(261));return Tl=null,jl=0,Rl}function vc(){for(;null!==Al;)bc(Al)}function yc(){for(;null!==Al&&!Qe();)bc(Al)}function bc(e){var t=kl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,_l.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Pl)))return void(Al=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Rl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var r=bt,i=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Kl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Tl&&(Al=Tl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Tc(tt,(function(){return Sc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Nl.transition,Nl.transition=null;var o=bt;bt=1;var l=Il;Il|=4,_l.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Xe(),Il=l,bt=o,Nl.transition=a}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Ql=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Yl?Xl++:(Xl=0,Yl=e):Xl=0,zi()}(e,t,n,r)}finally{Nl.transition=i,bt=r}return null}function Sc(){if(null!==Kl){var e=wt(Ql),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Ql=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var f=(d=Jo).sibling,p=d.return;if(sl(d),d===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var b=e.current;for(Jo=b;null!==Jo;){var w=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Jo=w;else e:for(o=b;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Cc(l,l.return,S)}if(l===o){Jo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Jo=x;break e}Jo=l.return}}if(Il=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function kc(e,t,n){e=Fs(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Fs(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(jl&n)===n&&(4===Rl||3===Rl&&(130023424&jl)===jl&&500>Ye()-Vl?hc(e,0):Ul|=n),rc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Rs(e,t))&&(vt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),_c(e,n)}function Tc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Oc(n.children,i,a,t);case C:o=8,i|=8;break;case E:return(e=jc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case T:return(e=jc(13,n,t,i)).elementType=T,e.lanes=a,e;case A:return(e=jc(19,n,t,i)).elementType=A,e.lanes=a,e;case D:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case N:o=9;break e;case I:o=11;break e;case j:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Vc(e){if(!e)return Ni;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function zc(e,t,n,r,i,s,a,o,l){return(e=Bc(n,r,!0,e,0,s,0,o,l)).context=Vc(null),n=e.current,(s=Us(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function $c(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fs(i,t,a))&&(nc(e,i,a,s),Bs(e,i,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:To(t),fs();break;case 5:Ys(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(_i(Zs,1&Zs.current),null!==(e=qo(e,t,n))?e.sibling:null);_i(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return qo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$o(e,t),e=t.pendingProps;var i=ji(t,Ii.current);Ts(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Io(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($o(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===j)return 14}return 2}(r),e=to(r,e),i){case 0:t=_o(null,t,r,e,n);break e;case 1:t=No(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=So(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(To(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ms(e,t),zs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Eo(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,_i(Ss,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ti.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Us(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Is(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ts(t,n),r=r(i=As(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),So(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),$o(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Ts(t,n),so(t,r,i),oo(t,r,i,n),Io(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=qc(a);o.call(e)}}$c(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(a);s.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,zr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,n,r)})),l}(n,t,e,i,r);return qc(a)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$c(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ye()),0===(6&Il)&&(zl=Ye()+500,zi()))}break;case 13:uc((function(){var t=Rs(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},St=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Rs(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Ct=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,_e,Ne,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){const i=!(0,r.isNum)(e.lastX),a=s(e);return i?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},t.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:a}=e.props;a="string"===typeof a?a:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(a);const o=s(e);if("string"===typeof a){const{ownerDocument:e}=o,t=e.defaultView;let n;if(n="parent"===a?o.parentNode:e.querySelector(a),!(n instanceof t.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');const s=n,l=t.getComputedStyle(o),c=t.getComputedStyle(s);a={left:-o.offsetLeft+(0,r.int)(c.paddingLeft)+(0,r.int)(l.marginLeft),top:-o.offsetTop+(0,r.int)(c.paddingTop)+(0,r.int)(l.marginTop),right:(0,i.innerWidth)(s)-(0,i.outerWidth)(o)-o.offsetLeft+(0,r.int)(c.paddingRight)-(0,r.int)(l.marginRight),bottom:(0,i.innerHeight)(s)-(0,i.outerHeight)(o)-o.offsetTop+(0,r.int)(c.paddingBottom)-(0,r.int)(l.marginBottom)}}(0,r.isNum)(a.right)&&(t=Math.min(t,a.right));(0,r.isNum)(a.bottom)&&(n=Math.min(n,a.bottom));(0,r.isNum)(a.left)&&(t=Math.max(t,a.left));(0,r.isNum)(a.top)&&(n=Math.max(n,a.top));return[t,n]},t.getControlPosition=function(e,t,n){const r="number"===typeof t?(0,i.getTouch)(e,t):null;if("number"===typeof t&&!r)return null;const a=s(n),o=n.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,i.offsetXYFromParent)(r||e,o,n.props.scale)},t.snapToGrid=function(e,t,n){const r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]};var r=n(447),i=n(212);function s(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},853:(e,t,n)=>{"use strict";e.exports=n(234)},929:(e,t,n)=>{"use strict";const{default:r,DraggableCore:i}=n(136);e.exports=r,e.exports.default=r,e.exports.DraggableCore=i},935:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(43)),i=u(n(173)),s=u(n(950)),a=n(212),o=n(777),l=n(447),c=u(n(387));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={start:"touchstart",move:"touchmove",stop:"touchend"},p={start:"mousedown",move:"mousemove",stop:"mouseup"};let m=p;class g extends r.Component{constructor(){super(...arguments),h(this,"dragging",!1),h(this,"lastX",NaN),h(this,"lastY",NaN),h(this,"touchIdentifier",null),h(this,"mounted",!1),h(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"===typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const r=(0,a.getTouchIdentifier)(e);this.touchIdentifier=r;const i=(0,o.getControlPosition)(e,r,this);if(null==i)return;const{x:s,y:l}=i,u=(0,o.createCoreData)(this,s,l);(0,c.default)("DraggableCore: handleDragStart: %j",u),(0,c.default)("calling",this.props.onStart);!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(n),this.dragging=!0,this.lastX=s,this.lastY=l,(0,a.addEvent)(n,m.move,this.handleDrag),(0,a.addEvent)(n,m.stop,this.handleDragStop))})),h(this,"handleDrag",(e=>{const t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=r-this.lastY;if([e,t]=(0,o.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,r=this.lastY+t}const i=(0,o.createCoreData)(this,n,r);(0,c.default)("DraggableCore: handleDrag: %j",i);if(!1!==this.props.onDrag(e,i)&&!1!==this.mounted)this.lastX=n,this.lastY=r;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(s){const e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}})),h(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=r-this.lastY||0;[e,t]=(0,o.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,r=this.lastY+t}const i=(0,o.createCoreData)(this,n,r);if(!1===this.props.onStop(e,i)||!1===this.mounted)return!1;const s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(s.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,c.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(s.ownerDocument,m.move,this.handleDrag),(0,a.removeEvent)(s.ownerDocument,m.stop,this.handleDragStop))})),h(this,"onMouseDown",(e=>(m=p,this.handleDragStart(e)))),h(this,"onMouseUp",(e=>(m=p,this.handleDragStop(e)))),h(this,"onTouchStart",(e=>(m=f,this.handleDragStart(e)))),h(this,"onTouchEnd",(e=>(m=f,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,a.addEvent)(e,f.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,a.removeEvent)(t,p.move,this.handleDrag),(0,a.removeEvent)(t,f.move,this.handleDrag),(0,a.removeEvent)(t,p.stop,this.handleDragStop),(0,a.removeEvent)(t,f.stop,this.handleDragStop),(0,a.removeEvent)(e,f.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:s.default.findDOMNode(this)}render(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=g,h(g,"displayName","DraggableCore"),h(g,"propTypes",{allowAnyClick:i.default.bool,children:i.default.node.isRequired,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:i.default.arrayOf(i.default.number),handle:i.default.string,cancel:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),h(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(43),r=n.t(t,2),i=n(391),s=n(950),a=n.t(s,2);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Iy){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(t,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,u=s.history,p=e.Pop,m=null,g=v();function v(){return(u.state||{idx:null}).idx}function y(){p=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:p,location:w.location,delta:n})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let w={get action(){return p},get location(){return t(s,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),m=e,()=>{s.removeEventListener(l,y),m=null}},createHref:e=>n(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=h(w.location,t,n);r&&r(i,t),g=v()+1;let o=d(i,g),l=w.createHref(i);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}a&&m&&m({action:p,location:w.location,delta:1})},replace:function(t,n){p=e.Replace;let i=h(w.location,t,n);r&&r(i,t),g=v();let s=d(i,g),o=w.createHref(i);u.replaceState(s,"",o),a&&m&&m({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let i=P(("string"===typeof t?p(t):t).pathname||"/",n);if(null==i)return null;let s=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=j(i);a=T(s[o],e,r)}return a}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=M([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=w(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const x=/^:[\w-]+$/,S=3,k=2,C=1,E=10,_=-2,N=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=_),t&&(r+=k),n.filter((e=>!N(e))).reduce(((e,t)=>e+(x.test(t)?S:""===t?C:E)),r)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:M([s,u.pathname]),pathnameBase:U(M([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=M([s,u.pathnameBase]))}return a}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function j(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=R(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=o({},e),c(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,a=""===e||""===i.pathname,l=a?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(r),hash:B(i)}}(i,s),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],$=(new Set(z),["get",...z]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const H=t.createContext(null);const W=t.createContext(null);const G=t.createContext(null);const K=t.createContext(null);const Q=t.createContext({outlet:null,matches:[],isDataRoute:!1});const X=t.createContext(null);function Y(){return null!=t.useContext(K)}function J(){return Y()||c(!1),t.useContext(K).location}function Z(e){t.useContext(G).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(Q);return e?function(){let{router:e}=de(ce.UseNavigateStable),n=fe(ue.UseNavigateStable),r=t.useRef(!1);return Z((()=>{r.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,q({fromRouteId:n},i)))}),[e,n])}():function(){Y()||c(!1);let e=t.useContext(H),{basename:n,future:r,navigator:i}=t.useContext(G),{matches:s}=t.useContext(Q),{pathname:a}=J(),o=JSON.stringify(O(s,r.v7_relativeSplatPath)),l=t.useRef(!1);return Z((()=>{l.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let s=L(t,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:M([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,o,a,e])}()}function te(){let{matches:e}=t.useContext(Q),n=e[e.length-1];return n?n.params:{}}function ne(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(G),{matches:s}=t.useContext(Q),{pathname:a}=J(),o=JSON.stringify(O(s,i.v7_relativeSplatPath));return t.useMemo((()=>L(e,JSON.parse(o),a,"path"===r)),[e,o,a,r])}function re(n,r,i,s){Y()||c(!1);let{navigator:a,static:o}=t.useContext(G),{matches:l}=t.useContext(Q),u=l[l.length-1],d=u?u.params:{},h=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let f,m=J();if(r){var g;let e="string"===typeof r?p(r):r;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||c(!1),f=e}else f=m;let y=f.pathname||"/",b=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=!o&&i&&i.matches&&i.matches.length>0?i.matches:v(n,{pathname:b});let x=le(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:M([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:M([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,i,s);return r&&x?t.createElement(K.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},x):x}function ie(){let e=function(){var e;let n=t.useContext(X),r=he(ue.UseRouteError),i=fe(ue.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const se=t.createElement(ie,null);class ae extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Q.Provider,{value:this.props.routeContext},t.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(H);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Q.Provider,{value:n},i)}function le(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight(((e,i,s)=>{let a,c=!1,h=null,f=null;var p;r&&(a=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||se,u&&(d<0&&0===s?(p="route-fallback",!1||pe[p]||(pe[p]=!0),c=!0,f=null):d===s&&(c=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,s+1)),g=()=>{let n;return n=a?h:c?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(oe,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(ae,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let n=t.useContext(H);return n||c(!1),n}function he(e){let n=t.useContext(W);return n||c(!1),n}function fe(e){let n=function(){let e=t.useContext(Q);return e||c(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}const pe={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ge(e){let{to:n,replace:r,state:i,relative:s}=e;Y()||c(!1);let{future:a,static:o}=t.useContext(G),{matches:l}=t.useContext(Q),{pathname:u}=J(),d=ee(),h=L(n,O(l,a.v7_relativeSplatPath),u,"path"===s),f=JSON.stringify(h);return t.useEffect((()=>d(JSON.parse(f),{replace:r,state:i,relative:s})),[d,f,s,r,i]),null}function ve(e){c(!1)}function ye(n){let{basename:r="/",children:i=null,location:s,navigationType:a=e.Pop,navigator:o,static:l=!1,future:u}=n;Y()&&c(!1);let d=r.replace(/^\/*/,"/"),h=t.useMemo((()=>({basename:d,navigator:o,static:l,future:q({v7_relativeSplatPath:!1},u)})),[d,u,o,l]);"string"===typeof s&&(s=p(s));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:y="default"}=s,b=t.useMemo((()=>{let e=P(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:a}}),[d,f,m,g,v,y,a]);return null==b?null:t.createElement(G.Provider,{value:h},t.createElement(K.Provider,{children:i,value:b}))}function be(e){let{children:t,location:n}=e;return re(we(t),n)}new Promise((()=>{}));t.Component;function we(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,we(e.props.children,s));e.type!==ve&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=we(e.props.children,s)),r.push(a)})),r}function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Iy){}new Map;const Ce=r.startTransition;a.flushSync,r.useId;function Ee(e){let{basename:n,children:r,future:i,window:s}=e,a=t.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),m((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,o)));let l=a.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},p=t.useCallback((e=>{d&&Ce?Ce((()=>u(e))):u(e)}),[u,d]);return t.useLayoutEffect((()=>l.listen(p)),[l,p]),t.useEffect((()=>me(i)),[i]),t.createElement(ye,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const _e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=t.forwardRef((function(e,n){let r,{onClick:i,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,m=Se(e,ke),{basename:g}=t.useContext(G),v=!1;if("string"===typeof d&&Ne.test(d)&&(r=d,_e))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=P(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch(Iy){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||c(!1);let{basename:i,navigator:s}=t.useContext(G),{hash:a,pathname:o,search:l}=ne(e,{relative:r}),u=o;return"/"!==i&&(u="/"===o?i:M([i,o])),s.createHref({pathname:u,search:l,hash:a})}(d,{relative:s}),b=function(e,n){let{target:r,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===n?{}:n,c=ee(),u=J(),d=ne(e,{relative:o});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:f(u)===f(d);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}}),[u,c,d,i,s,r,e,a,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:p});return t.createElement("a",xe({},m,{href:r||y,onClick:v||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:u}))}));var Te,Ae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Te||(Te={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));const je=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(je(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new De;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class De extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Re=function(e){return function(e){const t=je(e);return Pe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Oe=function(e){try{return Pe.decodeString(e,!0)}catch(Iy){console.error("base64Decode failed: ",Iy)}return null};function Le(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Me=()=>{try{return Le().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyCCBzHxOQXYO9D4OO1ubHzcxzJ9kXEc6nI"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Iy){return}const t=e&&Oe(e[1]);return t&&JSON.parse(t)})()}catch(Iy){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Iy}`)}},Ue=e=>{var t,n;return null===(n=null===(t=Me())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Fe=e=>{const t=Ue(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Be=()=>{var e;return null===(e=Me())||void 0===e?void 0:e.config},Ve=e=>{var t;return null===(t=Me())||void 0===t?void 0:t[`_${e}`]};class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function $e(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(s)),""].join(".")}function qe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function He(){return!function(){var e;const t=null===(e=Me())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Iy){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function We(){try{return"object"===typeof indexedDB}catch(Iy){return!1}}class Ge extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Qe,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new Ge(n,s,t)}}const Qe=/\{\$([^}]+)}/g;function Xe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ye(n)&&Ye(s)){if(!Xe(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ye(e){return null!==e&&"object"===typeof e}function Je(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ze(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function et(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class tt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=nt),void 0===r.error&&(r.error=nt),void 0===r.complete&&(r.complete=nt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Iy){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Iy){"undefined"!==typeof console&&console.error&&console.error(Iy)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function nt(){}function rt(e){return e&&e._delegate?e._delegate:e}class it{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const st="[DEFAULT]";class at{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ze;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Iy){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Iy){if(r)return null;throw Iy}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:st})}catch(Iy){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Iy){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===st?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.component?this.component.multipleInstances?e:st:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ot{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new at(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const lt=[];var ct;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ct||(ct={}));const ut={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},dt=ct.INFO,ht={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},ft=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ht[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class pt{constructor(e){this.name=e,this._logLevel=dt,this._logHandler=ft,this._userLogHandler=null,lt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ut[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...t),this._logHandler(this,ct.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...t),this._logHandler(this,ct.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.INFO,...t),this._logHandler(this,ct.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.WARN,...t),this._logHandler(this,ct.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...t),this._logHandler(this,ct.ERROR,...t)}}let mt,gt;const vt=new WeakMap,yt=new WeakMap,bt=new WeakMap,wt=new WeakMap,xt=new WeakMap;let St={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return yt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Et(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function kt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(gt||(gt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(_t(this),n),Et(vt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Et(e.apply(_t(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(_t(this),t,...r);return bt.set(s,t.sort?t.sort():[t]),Et(s)}}function Ct(e){return"function"===typeof e?kt(e):(e instanceof IDBTransaction&&function(e){if(yt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));yt.set(e,t)}(e),t=e,(mt||(mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,St):e);var t}function Et(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Et(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&vt.set(t,e)})).catch((()=>{})),xt.set(t,e),t}(e);if(wt.has(e))return wt.get(e);const t=Ct(e);return t!==e&&(wt.set(e,t),xt.set(t,e)),t}const _t=e=>xt.get(e);const Nt=["get","getKey","getAll","getAllKeys","count"],It=["put","add","delete","clear"],Tt=new Map;function At(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Tt.get(t))return Tt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=It.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Nt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Tt.set(t,s),s}St=(e=>({...e,get:(t,n,r)=>At(t,n)||e.get(t,n,r),has:(t,n)=>!!At(t,n)||e.has(t,n)}))(St);class jt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Pt="@firebase/app",Dt="0.11.5",Rt=new pt("@firebase/app"),Ot="@firebase/app-compat",Lt="@firebase/analytics-compat",Mt="@firebase/analytics",Ut="@firebase/app-check-compat",Ft="@firebase/app-check",Bt="@firebase/auth",Vt="@firebase/auth-compat",zt="@firebase/database",$t="@firebase/data-connect",qt="@firebase/database-compat",Ht="@firebase/functions",Wt="@firebase/functions-compat",Gt="@firebase/installations",Kt="@firebase/installations-compat",Qt="@firebase/messaging",Xt="@firebase/messaging-compat",Yt="@firebase/performance",Jt="@firebase/performance-compat",Zt="@firebase/remote-config",en="@firebase/remote-config-compat",tn="@firebase/storage",nn="@firebase/storage-compat",rn="@firebase/firestore",sn="@firebase/vertexai",an="@firebase/firestore-compat",on="firebase",ln="[DEFAULT]",cn={[Pt]:"fire-core",[Ot]:"fire-core-compat",[Mt]:"fire-analytics",[Lt]:"fire-analytics-compat",[Ft]:"fire-app-check",[Ut]:"fire-app-check-compat",[Bt]:"fire-auth",[Vt]:"fire-auth-compat",[zt]:"fire-rtdb",[$t]:"fire-data-connect",[qt]:"fire-rtdb-compat",[Ht]:"fire-fn",[Wt]:"fire-fn-compat",[Gt]:"fire-iid",[Kt]:"fire-iid-compat",[Qt]:"fire-fcm",[Xt]:"fire-fcm-compat",[Yt]:"fire-perf",[Jt]:"fire-perf-compat",[Zt]:"fire-rc",[en]:"fire-rc-compat",[tn]:"fire-gcs",[nn]:"fire-gcs-compat",[rn]:"fire-fst",[an]:"fire-fst-compat",[sn]:"fire-vertex","fire-js":"fire-js",[on]:"fire-js-all"},un=new Map,dn=new Map,hn=new Map;function fn(e,t){try{e.container.addComponent(t)}catch(Iy){Rt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Iy)}}function pn(e){const t=e.name;if(hn.has(t))return Rt.debug(`There were multiple attempts to register component ${t}.`),!1;hn.set(t,e);for(const n of un.values())fn(n,e);for(const n of dn.values())fn(n,e);return!0}function mn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function gn(e){return null!==e&&void 0!==e&&void 0!==e.settings}const vn=new Ke("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class yn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new it("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}const bn="11.6.1";function wn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ln,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw vn.create("bad-app-name",{appName:String(i)});if(n||(n=Be()),!n)throw vn.create("no-options");const s=un.get(i);if(s){if(Xe(n,s.options)&&Xe(r,s.config))return s;throw vn.create("duplicate-app",{appName:i})}const a=new ot(i);for(const l of hn.values())a.addComponent(l);const o=new yn(n,r,a);return un.set(i,o),o}function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;const t=un.get(e);if(!t&&e===ln&&Be())return wn();if(!t)throw vn.create("no-app",{appName:e});return t}function Sn(e,t,n){var r;let i=null!==(r=cn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Rt.warn(e.join(" "))}pn(new it(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const kn="firebase-heartbeat-store";let Cn=null;function En(){return Cn||(Cn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Et(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Et(a.result),e.oldVersion,e.newVersion,Et(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(kn)}catch(Iy){console.warn(Iy)}}}).catch((e=>{throw vn.create("idb-open",{originalErrorMessage:e.message})}))),Cn}async function _n(e,t){try{const n=(await En()).transaction(kn,"readwrite"),r=n.objectStore(kn);await r.put(t,Nn(e)),await n.done}catch(Iy){if(Iy instanceof Ge)Rt.warn(Iy.message);else{const t=vn.create("idb-set",{originalErrorMessage:null===Iy||void 0===Iy?void 0:Iy.message});Rt.warn(t.message)}}}function Nn(e){return`${e.name}!${e.options.appId}`}class In{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new An(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Tn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Iy){Rt.warn(Iy)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Tn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),jn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Re(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Iy){return Rt.warn(Iy),""}}}function Tn(){return(new Date).toISOString().substring(0,10)}class An{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!We()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await En()).transaction(kn),n=await t.objectStore(kn).get(Nn(e));return await t.done,n}catch(Iy){if(Iy instanceof Ge)Rt.warn(Iy.message);else{const t=vn.create("idb-get",{originalErrorMessage:null===Iy||void 0===Iy?void 0:Iy.message});Rt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return _n(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return _n(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function jn(e){return Re(JSON.stringify({version:2,heartbeats:e})).length}var Pn;Pn="",pn(new it("platform-logger",(e=>new jt(e)),"PRIVATE")),pn(new it("heartbeat",(e=>new In(e)),"PRIVATE")),Sn(Pt,Dt,Pn),Sn(Pt,Dt,"esm2017"),Sn("fire-js","");function Dn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Rn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const On=Rn,Ln=new Ke("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mn=new pt("@firebase/auth");function Un(e){if(Mn.logLevel<=ct.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mn.error(`Auth (${bn}): ${e}`,...n)}}function Fn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $n(e,...n)}function Bn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $n(e,...n)}function Vn(e,t,n){const r=Object.assign(Object.assign({},On()),{[t]:n});return new Ke("auth","Firebase",r).create(t,{appName:e.name})}function zn(e){return Vn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ln.create(e,...n)}function qn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $n(t,...r)}}function Hn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Un(t),new Error(t)}function Wn(e,t){e||Hn(t)}function Gn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Kn(){return"http:"===Qn()||"https:"===Qn()}function Qn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Xn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Kn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Yn{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Xn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jn(e,t){Wn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Zn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const er={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tr=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nr=new Yn(3e4,6e4);function rr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ir(e,t,n,r){return sr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=Je(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Zn.fetch()(await or(e,e.config.apiHost,n,a),l)}))}async function sr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},er),t);try{const t=new cr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ur(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ur(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ur(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ur(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Vn(e,o,a);Fn(e,o)}}catch(Iy){if(Iy instanceof Ge)throw Iy;Fn(e,"network-request-failed",{message:String(Iy)})}}async function ar(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await ir(e,t,n,r,i);return"mfaPendingCredential"in s&&Fn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function or(e,t,n,r){const i=`${t}${n}?${r}`,s=e,a=s.config.emulator?Jn(e.config,i):`${e.config.apiScheme}://${i}`;if(tr.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function lr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cr{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Bn(this.auth,"network-request-failed"))),nr.get())}))}}function ur(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Bn(e,t,r);return i.customData._tokenResponse=n,i}function dr(e){return void 0!==e&&void 0!==e.enterprise}class hr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fr(e,t){return ir(e,"GET","/v2/recaptchaConfig",rr(e,t))}async function pr(e,t){return ir(e,"POST","/v1/accounts:lookup",t)}function mr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Iy){}}function gr(e){return 1e3*Number(e)}function vr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Un("JWT malformed, contained fewer than 3 sections"),null;try{const e=Oe(n);return e?JSON.parse(e):(Un("Failed to decode base64 JWT payload"),null)}catch(Iy){return Un("Caught error parsing JWT payload as JSON",null===Iy||void 0===Iy?void 0:Iy.toString()),null}}function yr(e){const t=vr(e);return qn(t,"internal-error"),qn("undefined"!==typeof t.exp,"internal-error"),qn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function br(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Iy){throw Iy instanceof Ge&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Iy)&&e.auth.currentUser===e&&await e.auth.signOut(),Iy}}class wr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Iy){return void("auth/network-request-failed"===(null===Iy||void 0===Iy?void 0:Iy.code)&&this.schedule(!0))}this.schedule()}}class xr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await br(e,pr(n,{idToken:r}));qn(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?kr(s.providerUserInfo):[],o=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new xr(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function kr(e){return e.map((e=>{var{providerId:t}=e,n=Dn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qn(e.idToken,"internal-error"),qn("undefined"!==typeof e.idToken,"internal-error"),qn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):yr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qn(0!==e.length,"internal-error");const t=yr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(qn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await sr(e,{},(async()=>{const n=Je({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await or(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Zn.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Cr;return n&&(qn("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(qn("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(qn("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cr,this.toJSON())}_performRefresh(){return Hn("not implemented")}}function Er(e,t){qn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class _r{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Dn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await br(this,this.stsTokenManager.getToken(this.auth,e));return qn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=rt(e),r=await n.getIdToken(t),i=vr(r);qn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mr(gr(i.auth_time)),issuedAtTime:mr(gr(i.iat)),expirationTime:mr(gr(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=rt(e);await Sr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(qn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Sr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await br(this,async function(e,t){return ir(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:S}=t;qn(y&&S,e,"internal-error");const k=Cr.fromJSON(this.name,S);qn("string"===typeof y,e,"internal-error"),Er(u,e.name),Er(d,e.name),qn("boolean"===typeof b,e,"internal-error"),qn("boolean"===typeof w,e,"internal-error"),Er(h,e.name),Er(f,e.name),Er(p,e.name),Er(m,e.name),Er(g,e.name),Er(v,e.name);const C=new _r({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(C.providerData=x.map((e=>Object.assign({},e)))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Cr;r.updateFromServerResponse(t);const i=new _r({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Sr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];qn(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?kr(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Cr;a.updateFromIdToken(n);const o=new _r({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new xr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const Nr=new Map;function Ir(e){Wn(e instanceof Function,"Expected a class definition");let t=Nr.get(e);return t?(Wn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Nr.set(e,t),t)}class Tr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Tr.type="NONE";const Ar=Tr;function jr(e,t,n){return`firebase:${e}:${t}:${n}`}class Pr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=jr(this.userKey,r.apiKey,i),this.fullPersistenceKey=jr("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await pr(this.auth,{idToken:e}).catch((()=>{}));return t?_r._fromGetAccountInfoResponse(this.auth,t,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Pr(Ir(Ar),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ir(Ar);const s=jr(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await pr(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await _r._fromGetAccountInfoResponse(e,r,t)}else n=_r._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Pr(i,e,n)):new Pr(i,e,n)}}function Dr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Mr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Rr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fr(t))return"Blackberry";if(Br(t))return"Webos";if(Or(t))return"Safari";if((t.includes("chrome/")||Lr(t))&&!t.includes("edge/"))return"Chrome";if(Ur(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/firefox\//i.test(e)}function Or(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/crios\//i.test(e)}function Mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/iemobile/i.test(e)}function Ur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/android/i.test(e)}function Fr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/blackberry/i.test(e)}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/webos/i.test(e)}function Vr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function zr(){return function(){const e=qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return Vr(e)||Ur(e)||Br(e)||Fr(e)||/windows phone/i.test(e)||Mr(e)}function qr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Dr(qe());break;case"Worker":t=`${Dr(qe())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${bn}/${r}`}class Hr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Iy){r(Iy)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Iy){t.reverse();for(const n of t)try{n()}catch(dw){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Iy||void 0===Iy?void 0:Iy.message})}}}class Wr{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Gr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qr(this),this.idTokenSubscription=new Qr(this),this.beforeStateQueue=new Hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ln,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ir(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Pr.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Iy){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await pr(this,{idToken:e}),n=await _r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(gn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Iy){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Iy)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Iy){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sr(e)}catch(Iy){if("auth/network-request-failed"!==(null===Iy||void 0===Iy?void 0:Iy.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(zn(this));const t=e?rt(e):null;return t&&qn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&qn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return gn(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(zn(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ir(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ir(e,"GET","/v2/passwordPolicy",rr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Wr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ke("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ir(e,"POST","/v2/accounts:revokeToken",rr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ir(e)||this._popupRedirectResolver;qn(t,this,"argument-error"),this.redirectPersistenceManager=await Pr.create(this,[Ir(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qn(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Mn.logLevel<=ct.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mn.warn(`Auth (${bn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Kr(e){return rt(e)}class Qr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new tt(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yr(e){return Xr.loadJS(e)}function Jr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Zr{constructor(){this.enterprise=new ei}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ei{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ti="NO_RECAPTCHA";class ni{constructor(e){this.type="recaptcha-enterprise",this.auth=Kr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;dr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(ti)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Zr).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{fr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new hr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&dr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Xr.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Yr(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ri(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new ni(e);let a;if(i)a=ti;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ii(e,t,n,r,i){var s,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ri(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ri(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await ri(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await ri(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await ri(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function si(e){const t=Kr(e),n=await fr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new hr(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new ni(t).verify()}}function ai(e,t,n){const r=Kr(e);qn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=oi(t),{host:a,port:o}=function(e){const t=oi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:li(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:li(t)}}}(t),l={url:`${s}//${a}${null===o?"":`:${o}`}/`},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return qn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void qn(Xe(l,r.config.emulator)&&Xe(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function oi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function li(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ci{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,t){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function ui(e,t){return ir(e,"POST","/v1/accounts:signUp",t)}async function di(e,t){return ar(e,"POST","/v1/accounts:signInWithPassword",rr(e,t))}async function hi(e,t){return ir(e,"POST","/v1/accounts:sendOobCode",rr(e,t))}class fi extends ci{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new fi(e,t,"password")}static _fromEmailAndCode(e,t){return new fi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ii(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",di,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ar(e,"POST","/v1/accounts:signInWithEmailLink",rr(e,t))}(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ii(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ui,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ar(e,"POST","/v1/accounts:signInWithEmailLink",rr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function pi(e,t){return ar(e,"POST","/v1/accounts:signInWithIdp",rr(e,t))}class mi extends ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Dn(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new mi(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return pi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Je(t)}return e}}async function gi(e,t){return ir(e,"POST","/v1/accounts:sendVerificationCode",rr(e,t))}const vi={USER_NOT_FOUND:"user-not-found"};class yi extends ci{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new yi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new yi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ar(e,"POST","/v1/accounts:signInWithPhoneNumber",rr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ar(e,"POST","/v1/accounts:signInWithPhoneNumber",rr(e,t));if(n.temporaryProof)throw ur(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ar(e,"POST","/v1/accounts:signInWithPhoneNumber",rr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),vi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new yi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class bi{constructor(e){var t,n,r,i,s,a;const o=Ze(et(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);qn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Ze(et(e)).link,n=t?Ze(et(t)).deep_link_id:null,r=Ze(et(e)).deep_link_id;return(r?Ze(et(r)).link:null)||r||n||t||e}(e);try{return new bi(t)}catch(n){return null}}}class wi{constructor(){this.providerId=wi.PROVIDER_ID}static credential(e,t){return fi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=bi.parseLink(t);return qn(n,"argument-error"),fi._fromEmailAndCode(e,n.code,n.tenantId)}}wi.PROVIDER_ID="password",wi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class xi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Si extends xi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ki extends Si{constructor(){super("facebook.com")}static credential(e){return mi._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ki.credential(t.oauthAccessToken)}catch(n){return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com",ki.PROVIDER_ID="facebook.com";class Ci extends Si{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mi._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ci.credential(n,r)}catch(i){return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com",Ci.PROVIDER_ID="google.com";class Ei extends Si{constructor(){super("github.com")}static credential(e){return mi._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ei.credential(t.oauthAccessToken)}catch(n){return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com",Ei.PROVIDER_ID="github.com";class _i extends Si{constructor(){super("twitter.com")}static credential(e,t){return mi._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return _i.credential(n,r)}catch(i){return null}}}async function Ni(e,t){return ar(e,"POST","/v1/accounts:signUp",rr(e,t))}_i.TWITTER_SIGN_IN_METHOD="twitter.com",_i.PROVIDER_ID="twitter.com";class Ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await _r._fromIdTokenResponse(e,n,r),s=Ti(n);return new Ii({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ti(n);return new Ii({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ti(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ai extends Ge{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ai.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ai(e,t,n,r)}}function ji(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ai._fromErrorAndOperation(e,n,t,r);throw n}))}async function Pi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await br(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ii._forOperation(e,"link",r)}async function Di(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(gn(r.app))return Promise.reject(zn(r));const i="reauthenticate";try{const s=await br(e,ji(r,i,t,e),n);qn(s.idToken,r,"internal-error");const a=vr(s.idToken);qn(a,r,"internal-error");const{sub:o}=a;return qn(e.uid===o,r,"user-mismatch"),Ii._forOperation(e,i,s)}catch(Iy){throw"auth/user-not-found"===(null===Iy||void 0===Iy?void 0:Iy.code)&&Fn(r,"user-mismatch"),Iy}}async function Ri(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(gn(e.app))return Promise.reject(zn(e));const r="signIn",i=await ji(e,r,t),s=await Ii._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Oi(e,t){return Ri(Kr(e),t)}async function Li(e,t){return Di(rt(e),t)}function Mi(e,t,n){var r;qn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),qn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),qn("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ui(e){const t=Kr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Fi(e,t,n){return gn(e.app)?Promise.reject(zn(e)):Oi(rt(e),wi.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ui(e),t}))}async function Bi(e,t){const n=rt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Mi(n.auth,r,t);const{email:i}=await async function(e,t){return hi(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Vi(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await br(e,async function(e,t){return ir(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}function zi(e){return rt(e).signOut()}function $i(e,t){return ir(e,"POST","/v2/accounts/mfaEnrollment:start",rr(e,t))}new WeakMap;const qi="__sak";class Hi{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qi,"1"),this.storage.removeItem(qi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Wi extends Hi{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$r(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);zr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wi.type="LOCAL";const Gi=Wi;function Ki(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Qi(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Xi{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Qi(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ki(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Qi(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Qi(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ki(n);const i=setInterval((()=>{const e=Ki(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Xi.type="COOKIE";class Yi extends Hi{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Yi.type="SESSION";const Ji=Yi;class Zi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Zi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Zi.receivers=[];class ts{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=es("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function ns(){return window}function rs(){return"undefined"!==typeof ns().WorkerGlobalScope&&"function"===typeof ns().importScripts}const is="firebaseLocalStorageDb",ss="firebaseLocalStorage",as="fbase_key";class os{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ls(e,t){return e.transaction([ss],t?"readwrite":"readonly").objectStore(ss)}function cs(){const e=indexedDB.open(is,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ss,{keyPath:as})}catch(Iy){n(Iy)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ss)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(is);return new os(e).toPromise()}(),t(await cs()))}))}))}async function us(e,t,n){const r=ls(e,!0).put({[as]:t,value:n});return new os(r).toPromise()}function ds(e,t){const n=ls(e,!0).delete(t);return new os(n).toPromise()}class hs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await cs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Iy){if(t++>3)throw Iy;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zi._getInstance(rs()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ts(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cs();return await us(e,qi,"1"),await ds(e,qi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>us(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ls(e,!1).get(t),r=await new os(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ds(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ls(e,!1).getAll();return new os(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}hs.type="LOCAL";const fs=hs;function ps(e,t){return ir(e,"POST","/v2/accounts/mfaSignIn:start",rr(e,t))}Jr("rcb"),new Yn(3e4,6e4);const ms="recaptcha";async function gs(e,t,n){var r;if(!e._getRecaptchaConfig())try{await si(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){qn("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=ii(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===ti){qn((null===n||void 0===n?void 0:n.type)===ms,e,"argument-error");return $i(e,await vs(e,t,n))}return $i(e,t)}),"PHONE_PROVIDER");return(await s.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{qn("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;qn(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=ii(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===ti){qn((null===n||void 0===n?void 0:n.type)===ms,e,"argument-error");return ps(e,await vs(e,t,n))}return ps(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=ii(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===ti){qn((null===n||void 0===n?void 0:n.type)===ms,e,"argument-error");return gi(e,await vs(e,t,n))}return gi(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function vs(e,t,n){qn(n.type===ms,e,"argument-error");const r=await n.verify();qn("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ys{constructor(e){this.providerId=ys.PROVIDER_ID,this.auth=Kr(e)}verifyPhoneNumber(e,t){return gs(this.auth,e,rt(t))}static credential(e,t){return yi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ys.credentialFromTaggedObject(t)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?yi._fromTokenResponse(n,r):null}}function bs(e,t){return t?Ir(t):(qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ys.PROVIDER_ID="phone",ys.PHONE_SIGN_IN_METHOD="phone";class ws extends ci{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xs(e){return Ri(e.auth,new ws(e),e.bypassAuthState)}function Ss(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),Di(n,new ws(e),e.bypassAuthState)}async function ks(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),Pi(n,new ws(e),e.bypassAuthState)}class Cs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Iy){this.reject(Iy)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Iy){this.reject(Iy)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xs;case"linkViaPopup":case"linkViaRedirect":return ks;case"reauthViaPopup":case"reauthViaRedirect":return Ss;default:Fn(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Es=new Yn(2e3,1e4);class _s extends Cs{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,_s.currentPopupAction&&_s.currentPopupAction.cancel(),_s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qn(e,this.auth,"internal-error"),e}async onExecution(){Wn(1===this.filter.length,"Popup operations only handle one event");const e=es();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Bn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Es.get())};e()}}_s.currentPopupAction=null;const Ns=new Map;class Is extends Cs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ns.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=js(t),r=As(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Iy){e=()=>Promise.reject(Iy)}Ns.set(this.auth._key(),e)}return this.bypassAuthState||Ns.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ts(e,t){Ns.set(e._key(),t)}function As(e){return Ir(e._redirectPersistence)}function js(e){return jr("pendingRedirect",e.config.apiKey,e.name)}async function Ps(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(gn(e.app))return Promise.reject(zn(e));const r=Kr(e),i=bs(r,t),s=new Is(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ds{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Os(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Os(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Bn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rs(e))}saveEventToCache(e){this.cachedEventUids.add(Rs(e)),this.lastProcessedEventTime=Date.now()}}function Rs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Os(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Ls=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ms=/^https?/;async function Us(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ir(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Fs(r))return}catch(n){}Fn(e,"unauthorized-domain")}function Fs(e){const t=Gn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ms.test(n))return!1;if(Ls.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Bs=new Yn(3e4,6e4);function Vs(){const e=ns().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function zs(e){return new Promise(((t,n)=>{var r,i,s;function a(){Vs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vs(),n(Bn(e,"network-request-failed"))},timeout:Bs.get()})}if(null===(i=null===(r=ns().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ns().gapi)||void 0===s?void 0:s.load)){const t=Jr("iframefcb");return ns()[t]=()=>{gapi.load?a():n(Bn(e,"network-request-failed"))},Yr(`${Xr.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw $s=null,e}))}let $s=null;const qs=new Yn(5e3,15e3),Hs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ws=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gs(e){const t=e.config;qn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Jn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:bn},i=Ws.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Je(r).slice(1)}`}async function Ks(e){const t=await function(e){return $s=$s||zs(e),$s}(e),n=ns().gapi;return qn(n,e,"internal-error"),t.open({where:document.body,url:Gs(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hs,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Bn(e,"network-request-failed"),s=ns().setTimeout((()=>{r(i)}),qs.get());function a(){ns().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const Qs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Iy){}}}function Ys(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Qs),{width:r.toString(),height:i.toString(),top:s,left:a}),c=qe().toLowerCase();n&&(o=Lr(c)?"_blank":n),Rr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Vr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Xs(null);const d=window.open(t||"",o,u);qn(d,e,"popup-blocked");try{d.focus()}catch(Iy){}return new Xs(d)}const Js="__/auth/handler",Zs="emulator/auth/handler",ea=encodeURIComponent("fac");async function ta(e,t,n,r,i,s){qn(e.config.authDomain,e,"auth-domain-config-required"),qn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:bn,eventId:i};if(t instanceof xi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Si){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${ea}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Js}`;return Jn(t,Zs)}(e)}?${Je(o).slice(1)}${c}`}const na="webStorageSupport";const ra=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ji,this._completeRedirectFn=Ps,this._overrideRedirectResult=Ts}async _openPopup(e,t,n,r){var i;Wn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ys(e,await ta(e,t,n,Gn(),r),es())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ns().location.href=e}(await ta(e,t,n,Gn(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Wn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ks(e),n=new Ds(e);return t.register("authEvent",(t=>{qn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(na,{type:na},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[na];void 0!==i&&t(!!i),Fn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Us(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $r()||Or()||Vr()}};var ia="@firebase/auth",sa="1.10.1";class aa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const oa=Ve("authIdTokenMaxAge")||300;let la=null;function ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();const t=mn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=mn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Xe(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Fn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ra,persistence:[fs,Gi,Ji]}),r=Ve("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>oa)return;const r=null===t||void 0===t?void 0:t.token;la!==r&&(la=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){rt(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){rt(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=Ue("auth");return s&&ai(n,`http://${s}`),n}var ua;!function(e){Xr=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Bn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),ua="Browser",pn(new it("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;qn(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:ua,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qr(ua)},c=new Gr(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ir);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),pn(new it("auth-internal",(e=>(e=>new aa(e))(Kr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(ia,sa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ua)),Sn(ia,sa,"esm2017");var da,ha,fa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},pa={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ha=pa.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},da=pa.Integer=r}).apply("undefined"!==typeof fa?fa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ma,ga,va,ya,ba,wa,xa,Sa,ka="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ca={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ka&&ka];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function C(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new _),(e=>e.reset()));class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let N,I=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);N=()=>{e.then(j)}};var j=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(nb){k(nb)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function P(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(nb){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(My){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,D);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new V(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[q]=null)):B(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;x(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&z(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function be(){D.call(this,"c")}d(ye,D),d(be,D);var we={},xe=null;function Se(){return xe=xe||new ne}function ke(e){D.call(this,we.La,e)}function Ce(e){const t=Se();re(t,new ke(t))}function Ee(e,t){D.call(this,we.STAT_EVENT,e),this.stat=t}function _e(e){const t=Se();re(t,new Ee(t,e))}function Ne(e,t){D.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Te(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(Rb){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(ke,D),we.STAT_EVENT="statevent",d(Ee,D),we.Ma="timingevent",d(Ne,D),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var je,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Re,pe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},je=new Re;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ct(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||on(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Qt(n)}nn(n),_e(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),$e(o)),r.g=a}else tn(r);0<n.i.length&&Yt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ce()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||Ce(),He(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Ht(this.g);e="";var s=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ge(this),We(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=ze(this,o),e==Ue){4==h&&(this.s=4,_e(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ke(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),rn(d),d.M=!0,_e(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),We(this)}else Ae(this.i,this.l,o,null),Ke(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?on(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ge(this),We(this)}}}catch(zb){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ce(),_e(17)),Ge(this),this.s=2,We(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Ct(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,yt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){xt(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return xt(e),t=Et(e,t),e.g.has(t)}function Ct(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Et(e,t),h(n)),e.h+=n.length)}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _t(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(My){}}function Nt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Iy){throw t.push(r+"type="+encodeURIComponent("_badmap")),Iy}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function jt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=Et(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(Et(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,kt(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(Tt,pe),Tt.prototype.g=function(){return new At(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Dt(this),3==this.readyState&&jt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Lt,ne);var Mt=/^https?$/i,Ut=["POST","PUT"];function Ft(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),zt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Mt.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(Rb){o=""}e.l=o+" ["+e.Z()+"]",Bt(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Iy){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ub){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Nt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(jb){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}un(e)}function Qt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Qt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Yt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;N||A(),I||(N(),I=!0),T.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function Zt(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{It(o,e,"req"+n+"_")}catch(zb){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;N||A(),I||(N(),I=!0),T.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Be(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Ne(r,n)),Yt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Te;if(i.Image){const r=new Image;r.onload=u(_t,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(_t,n,"TestLoadImage: error",!1,t,r),r.onabort=u(_t,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(_t,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout((()=>{n.abort(),_t(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?_t(0,0,!0,t):_t(0,0,!1,t)})).catch((()=>{clearTimeout(r),_t(0,0,!1,t)}))}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),un(e),Xt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new Tt({eb:n})):new Lt(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function mn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function yn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?me(this.o):me(je),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(My){return void Ft(this,My)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(My){Ft(this,My)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(Oy){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Oy){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Yt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Rt(s)))+"&"+t:this.m&&Ot(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Ye(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Qt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),nn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Kt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Yt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,mn.aa.N.call(this)},d(gn,ye),d(vn,be),d(yn,fn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Sa=Ca.createWebChannelTransport=function(){return new pn},xa=Ca.getStatEventTarget=function(){return Se()},wa=Ca.Event=we,ba=Ca.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,ya=Ca.ErrorCode=Pe,De.COMPLETE="complete",va=Ca.EventType=De,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ga=Ca.WebChannel=ge,Ca.FetchXmlHttpFactory=Tt,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,ma=Ca.XhrIo=Lt}).apply("undefined"!==typeof ka?ka:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ea="@firebase/firestore",_a="4.7.11";class Na{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Na.UNAUTHENTICATED=new Na(null),Na.GOOGLE_CREDENTIALS=new Na("google-credentials-uid"),Na.FIRST_PARTY=new Na("first-party-uid"),Na.MOCK_USER=new Na("mock-user");let Ia="11.6.1";const Ta=new pt("@firebase/firestore");function Aa(){return Ta.logLevel}function ja(e){if(Ta.logLevel<=ct.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ra);Ta.debug(`Firestore (${Ia}): ${e}`,...i)}}function Pa(e){if(Ta.logLevel<=ct.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ra);Ta.error(`Firestore (${Ia}): ${e}`,...i)}}function Da(e){if(Ta.logLevel<=ct.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ra);Ta.warn(`Firestore (${Ia}): ${e}`,...i)}}function Ra(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Ty){return e}}function Oa(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,La(e,r,n)}function La(e,t,n){let r=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Pa(r),new Error(r)}function Ma(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||La(t,i,r)}function Ua(e,t){return e}const Fa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ba extends Ge{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Va{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class za{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $a{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Na.UNAUTHENTICATED)))}shutdown(){}}class qa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ha{constructor(e){this.t=e,this.currentUser=Na.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ma(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Va;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Va,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{ja("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ja("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Va)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ja("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ma("string"==typeof t.accessToken,31837,{l:t}),new za(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ma(null===e||"string"==typeof e,2055,{h:e}),new Na(e)}}class Wa{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Na.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ga{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Wa(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Na.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ka{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qa{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ma(void 0===this.o,3512);const n=e=>{null!=e.error&&ja("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,ja("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ja("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ja("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ka(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ma("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ka(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Xa(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Ya(){return new TextEncoder}class Ja{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Xa(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Za(e,t){return e<t?-1:e>t?1:0}function eo(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Za(r,i);{const s=Ya(),a=no(s.encode(to(e,n)),s.encode(to(t,n)));return 0!==a?a:Za(r,i)}}n+=r>65535?2:1}return Za(e.length,t.length)}function to(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function no(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Za(e[n],t[n]);return Za(e.length,t.length)}function ro(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const io=-62135596800,so=1e6;class ao{static now(){return ao.fromMillis(Date.now())}static fromDate(e){return ao.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*so);return new ao(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ba(Fa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ba(Fa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<io)throw new Ba(Fa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ba(Fa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/so}_compareTo(e){return this.seconds===e.seconds?Za(this.nanoseconds,e.nanoseconds):Za(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-io;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class oo{static fromTimestamp(e){return new oo(e)}static min(){return new oo(new ao(0,0))}static max(){return new oo(new ao(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const lo="__name__";class co{constructor(e,t,n){void 0===t?t=0:t>e.length&&Oa(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Oa(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===co.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof co?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=co.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Za(e.length,t.length)}static compareSegments(e,t){const n=co.isNumericId(e),r=co.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?co.extractNumericId(e).compare(co.extractNumericId(t)):eo(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return da.fromString(e.substring(4,e.length-2))}}class uo extends co{construct(e,t,n){return new uo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ba(Fa.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new uo(e)}static emptyPath(){return new uo([])}}const ho=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fo extends co{construct(e,t,n){return new fo(e,t,n)}static isValidIdentifier(e){return ho.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fo.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===lo}static keyField(){return new fo([lo])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ba(Fa.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ba(Fa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ba(Fa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ba(Fa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fo(t)}static emptyPath(){return new fo([])}}class po{constructor(e){this.path=e}static fromPath(e){return new po(uo.fromString(e))}static fromName(e){return new po(uo.fromString(e).popFirst(5))}static empty(){return new po(uo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===uo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return uo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new po(new uo(e.slice()))}}const mo=-1;class go{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}go.UNKNOWN_ID=-1;function vo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=oo.fromTimestamp(1e9===r?new ao(n+1,0):new ao(n,r));return new bo(i,po.empty(),t)}function yo(e){return new bo(e.readTime,e.key,mo)}class bo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new bo(oo.min(),po.empty(),mo)}static max(){return new bo(oo.max(),po.empty(),mo)}}function wo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=po.comparator(e.documentKey,t.documentKey),0!==n?n:Za(e.largestBatchId,t.largestBatchId))}const xo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class So{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ko(e){if(e.code!==Fa.FAILED_PRECONDITION||e.message!==xo)throw e;ja("LocalStore","Unexpectedly lost primary lease")}class Co{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oa(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Co(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Co?t:Co.resolve(t)}catch(e){return Co.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Co.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Co.reject(t)}static resolve(e){return new Co(((t,n)=>{t(e)}))}static reject(e){return new Co(((t,n)=>{n(e)}))}static waitFor(e){return new Co(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Co.resolve(!1);for(const n of e)t=t.next((e=>e?Co.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Co(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Co(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Eo(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _o(e){return"IndexedDbTransactionError"===e.name}class No{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}No.le=-1;const Io=-1;function To(e){return null==e}function Ao(e){return 0===e&&1/e==-1/0}function jo(e){return"number"==typeof e&&Number.isInteger(e)&&!Ao(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Po="\x01";function Do(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Oo(t)),t=Ro(e.get(n),t);return Oo(t)}function Ro(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Po:n+="\x01\x11";break;default:n+=t}}return n}function Oo(e){return e+Po+"\x01"}const Lo="remoteDocuments",Mo="owner",Uo="mutationQueues",Fo="mutations";const Bo="documentMutations",Vo="remoteDocumentsV14",zo="remoteDocumentGlobal",$o="targets",qo="targetDocuments",Ho="targetGlobal",Wo="collectionParents",Go="clientMetadata",Ko="bundles",Qo="namedQueries",Xo="indexConfiguration",Yo="indexState",Jo="indexEntries",Zo="documentOverlays",el="globals",tl=[Uo,Fo,Bo,Lo,$o,Mo,Ho,qo,Go,zo,Wo,Ko,Qo],nl=[Uo,Fo,Bo,Vo,$o,Mo,Ho,qo,Go,zo,Wo,Ko,Qo,Zo],rl=nl,il=[...rl,Xo,Yo,Jo];function sl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function al(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ol(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function ll(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class cl{constructor(e,t){this.comparator=e,this.root=t||dl.EMPTY}insert(e,t){return new cl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dl.BLACK,null,null))}remove(e){return new cl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ul(this.root,e,this.comparator,!0)}}class ul{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:dl.RED,this.left=null!=r?r:dl.EMPTY,this.right=null!=i?i:dl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new dl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return dl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oa(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oa(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oa(27949);return e+(this.isRed()?0:1)}}dl.EMPTY=null,dl.RED=!0,dl.BLACK=!1,dl.EMPTY=new class{constructor(){this.size=0}get key(){throw Oa(57766)}get value(){throw Oa(16141)}get color(){throw Oa(16727)}get left(){throw Oa(29726)}get right(){throw Oa(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new dl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hl{constructor(e){this.comparator=e,this.data=new cl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fl(this.data.getIterator())}getIteratorFrom(e){return new fl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof hl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new hl(this.comparator);return t.data=e,t}}class fl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pl{constructor(e){this.fields=e,e.sort(fo.comparator)}static empty(){return new pl([])}unionWith(e){let t=new hl(fo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new pl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ml extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ml("Invalid base64 string: "+e):e}}(e);return new gl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new gl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Za(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gl.EMPTY_BYTE_STRING=new gl("");const vl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yl(e){if(Ma(!!e,39018),"string"==typeof e){let t=0;const n=vl.exec(e);if(Ma(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bl(e.seconds),nanos:bl(e.nanos)}}function bl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wl(e){return"string"==typeof e?gl.fromBase64String(e):gl.fromUint8Array(e)}const xl="server_timestamp",Sl="__type__",kl="__previous_value__",Cl="__local_write_time__";function El(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Sl])||void 0===n?void 0:n.stringValue)===xl}function _l(e){const t=e.mapValue.fields[kl];return El(t)?_l(t):t}function Nl(e){const t=yl(e.mapValue.fields[Cl].timestampValue);return new ao(t.seconds,t.nanos)}class Il{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}const Tl="(default)";class Al{constructor(e,t){this.projectId=e,this.database=t||Tl}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database===Tl}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}const jl="__type__",Pl="__max__",Dl={mapValue:{fields:{__type__:{stringValue:Pl}}}},Rl="__vector__",Ol="value";function Ll(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?El(e)?4:Zl(e)?9007199254740991:Yl(e)?10:11:Oa(28295,{value:e})}function Ml(e,t){if(e===t)return!0;const n=Ll(e);if(n!==Ll(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Nl(e).isEqual(Nl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=yl(e.timestampValue),r=yl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wl(e.bytesValue).isEqual(wl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return bl(e.geoPointValue.latitude)===bl(t.geoPointValue.latitude)&&bl(e.geoPointValue.longitude)===bl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return bl(e.integerValue)===bl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=bl(e.doubleValue),r=bl(t.doubleValue);return n===r?Ao(n)===Ao(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ro(e.arrayValue.values||[],t.arrayValue.values||[],Ml);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(sl(n)!==sl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ml(n[i],r[i])))return!1;return!0}(e,t);default:return Oa(52216,{left:e})}}function Ul(e,t){return void 0!==(e.values||[]).find((e=>Ml(e,t)))}function Fl(e,t){if(e===t)return 0;const n=Ll(e),r=Ll(t);if(n!==r)return Za(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Za(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=bl(e.integerValue||e.doubleValue),r=bl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Bl(e.timestampValue,t.timestampValue);case 4:return Bl(Nl(e),Nl(t));case 5:return eo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wl(e),r=wl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Za(n[i],r[i]);if(0!==e)return e}return Za(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Za(bl(e.latitude),bl(t.latitude));return 0!==n?n:Za(bl(e.longitude),bl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Vl(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Ol])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Ol])||void 0===r?void 0:r.arrayValue,u=Za((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Vl(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Dl.mapValue&&t===Dl.mapValue)return 0;if(e===Dl.mapValue)return 1;if(t===Dl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=eo(r[a],s[a]);if(0!==e)return e;const t=Fl(n[r[a]],i[s[a]]);if(0!==t)return t}return Za(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Oa(23264,{Pe:n})}}function Bl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Za(e,t);const n=yl(e),r=yl(t),i=Za(n.seconds,r.seconds);return 0!==i?i:Za(n.nanos,r.nanos)}function Vl(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Fl(n[i],r[i]);if(e)return e}return Za(n.length,r.length)}function zl(e){return $l(e)}function $l(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=yl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return wl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return po.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$l(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${$l(e.fields[i])}`;return n+"}"}(e.mapValue):Oa(61005,{value:e})}function ql(e){switch(Ll(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_l(e);return t?16+ql(t):16;case 5:return 2*e.stringValue.length;case 6:return wl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+ql(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return al(e.fields,((e,n)=>{t+=e.length+ql(n)})),t}(e.mapValue);default:throw Oa(13486,{value:e})}}function Hl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Wl(e){return!!e&&"integerValue"in e}function Gl(e){return!!e&&"arrayValue"in e}function Kl(e){return!!e&&"nullValue"in e}function Ql(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xl(e){return!!e&&"mapValue"in e}function Yl(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[jl])||void 0===n?void 0:n.stringValue)===Rl}function Jl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return al(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Jl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Jl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Zl(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Pl}class ec{constructor(e){this.value=e}static empty(){return new ec({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(t)}setAll(e){let t=fo.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Jl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Xl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ml(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Xl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){al(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ec(Jl(this.value))}}function tc(e){const t=[];return al(e.fields,((e,n)=>{const r=new fo([e]);if(Xl(n)){const e=tc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new pl(t)}class nc{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new nc(e,0,oo.min(),oo.min(),oo.min(),ec.empty(),0)}static newFoundDocument(e,t,n,r){return new nc(e,1,t,oo.min(),n,r,0)}static newNoDocument(e,t){return new nc(e,2,t,oo.min(),oo.min(),ec.empty(),0)}static newUnknownDocument(e,t){return new nc(e,3,t,oo.min(),oo.min(),ec.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ec.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ec.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rc{constructor(e,t){this.position=e,this.inclusive=t}}function ic(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?po.comparator(po.fromName(a.referenceValue),n.key):Fl(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function sc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ml(e.position[n],t.position[n]))return!1;return!0}class ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function oc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class lc{}class cc extends lc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vc(e,t,n):"array-contains"===t?new xc(e,n):"in"===t?new Sc(e,n):"not-in"===t?new kc(e,n):"array-contains-any"===t?new Cc(e,n):new cc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new yc(e,n):new bc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Fl(t,this.value)):null!==t&&Ll(this.value)===Ll(t)&&this.matchesComparison(Fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Oa(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class uc extends lc{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new uc(e,t)}matches(e){return dc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function dc(e){return"and"===e.op}function hc(e){return fc(e)&&dc(e)}function fc(e){for(const t of e.filters)if(t instanceof uc)return!1;return!0}function pc(e){if(e instanceof cc)return e.field.canonicalString()+e.op.toString()+zl(e.value);if(hc(e))return e.filters.map((e=>pc(e))).join(",");{const t=e.filters.map((e=>pc(e))).join(",");return`${e.op}(${t})`}}function mc(e,t){return e instanceof cc?function(e,t){return t instanceof cc&&e.op===t.op&&e.field.isEqual(t.field)&&Ml(e.value,t.value)}(e,t):e instanceof uc?function(e,t){return t instanceof uc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&mc(n,t.filters[r])),!0)}(e,t):void Oa(19439)}function gc(e){return e instanceof cc?function(e){return`${e.field.canonicalString()} ${e.op} ${zl(e.value)}`}(e):e instanceof uc?function(e){return e.op.toString()+" {"+e.getFilters().map(gc).join(" ,")+"}"}(e):"Filter"}class vc extends cc{constructor(e,t,n){super(e,t,n),this.key=po.fromName(n.referenceValue)}matches(e){const t=po.comparator(e.key,this.key);return this.matchesComparison(t)}}class yc extends cc{constructor(e,t){super(e,"in",t),this.keys=wc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class bc extends cc{constructor(e,t){super(e,"not-in",t),this.keys=wc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>po.fromName(e.referenceValue)))}class xc extends cc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gl(t)&&Ul(t.arrayValue,this.value)}}class Sc extends cc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ul(this.value.arrayValue,t)}}class kc extends cc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ul(this.value.arrayValue,t)}}class Cc extends cc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ul(this.value.arrayValue,e)))}}class Ec{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Ie=null}}function _c(e){return new Ec(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nc(e){const t=Ua(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>pc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),To(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>zl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>zl(e))).join(",")),t.Ie=e}return t.Ie}function Ic(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!oc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!mc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sc(e.startAt,t.startAt)&&sc(e.endAt,t.endAt)}function Tc(e){return po.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function jc(e,t,n,r,i,s,a,o){return new Ac(e,t,n,r,i,s,a,o)}function Pc(e){return new Ac(e)}function Dc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Rc(e){return null!==e.collectionGroup}function Oc(e){const t=Ua(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new hl(fo.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new ac(r,n))})),e.has(fo.keyField().canonicalString())||t.Ee.push(new ac(fo.keyField(),n))}return t.Ee}function Lc(e){const t=Ua(e);return t.de||(t.de=Uc(t,Oc(e))),t.de}function Mc(e){const t=Ua(e);return t.Ae||(t.Ae=Uc(t,e.explicitOrderBy)),t.Ae}function Uc(e,t){if("F"===e.limitType)return _c(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ac(e.field,t)}));const n=e.endAt?new rc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new rc(e.startAt.position,e.startAt.inclusive):null;return _c(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Fc(e,t){const n=e.filters.concat([t]);return new Ac(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Bc(e,t,n){return new Ac(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vc(e,t){return Ic(Lc(e),Lc(t))&&e.limitType===t.limitType}function zc(e){return`${Nc(Lc(e))}|lt:${e.limitType}`}function $c(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>gc(e))).join(", ")}]`),To(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>zl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>zl(e))).join(",")),`Target(${t})`}(Lc(e))}; limitType=${e.limitType})`}function qc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):po.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Oc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ic(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Oc(e),t))&&!(e.endAt&&!function(e,t,n){const r=ic(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Oc(e),t))}(e,t)}function Hc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Wc(e){return(t,n)=>{let r=!1;for(const i of Oc(e)){const e=Gc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Gc(e,t,n){const r=e.field.isKeyField()?po.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Fl(r,i):Oa(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Oa(19790,{direction:e.dir})}}class Kc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){al(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ll(this.inner)}size(){return this.innerSize}}const Qc=new cl(po.comparator);function Xc(){return Qc}const Yc=new cl(po.comparator);function Jc(){let e=Yc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Zc(e){let t=Yc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function eu(){return nu()}function tu(){return nu()}function nu(){return new Kc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ru=new cl(po.comparator),iu=new hl(po.comparator);function su(){let e=iu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const au=new hl(Za);function ou(){return au}function lu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ao(t)?"-0":t}}function cu(e){return{integerValue:""+e}}function uu(e,t){return jo(t)?cu(t):lu(e,t)}class du{constructor(){this._=void 0}}function hu(e,t,n){return e instanceof mu?function(e,t){const n={fields:{[Sl]:{stringValue:xl},[Cl]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&El(t)&&(t=_l(t)),t&&(n.fields[kl]=t),{mapValue:n}}(n,t):e instanceof gu?vu(e,t):e instanceof yu?bu(e,t):function(e,t){const n=pu(e,t),r=xu(n)+xu(e.Re);return Wl(n)&&Wl(e.Re)?cu(r):lu(e.serializer,r)}(e,t)}function fu(e,t,n){return e instanceof gu?vu(e,t):e instanceof yu?bu(e,t):n}function pu(e,t){return e instanceof wu?function(e){return Wl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class mu extends du{}class gu extends du{constructor(e){super(),this.elements=e}}function vu(e,t){const n=Su(t);for(const r of e.elements)n.some((e=>Ml(e,r)))||n.push(r);return{arrayValue:{values:n}}}class yu extends du{constructor(e){super(),this.elements=e}}function bu(e,t){let n=Su(t);for(const r of e.elements)n=n.filter((e=>!Ml(e,r)));return{arrayValue:{values:n}}}class wu extends du{constructor(e,t){super(),this.serializer=e,this.Re=t}}function xu(e){return bl(e.integerValue||e.doubleValue)}function Su(e){return Gl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ku{constructor(e,t){this.field=e,this.transform=t}}class Cu{constructor(e,t){this.version=e,this.transformResults=t}}class Eu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Eu}static exists(e){return new Eu(void 0,e)}static updateTime(e){return new Eu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _u(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Nu{}function Iu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Uu(e.key,Eu.none()):new Du(e.key,e.data,Eu.none());{const n=e.data,r=ec.empty();let i=new hl(fo.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ru(e.key,r,new pl(i.toArray()),Eu.none())}}function Tu(e,t,n){e instanceof Du?function(e,t,n){const r=e.value.clone(),i=Lu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ru?function(e,t,n){if(!_u(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Lu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ou(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Au(e,t,n,r){return e instanceof Du?function(e,t,n,r){if(!_u(e.precondition,t))return n;const i=e.value.clone(),s=Mu(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ru?function(e,t,n,r){if(!_u(e.precondition,t))return n;const i=Mu(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ou(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return _u(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ju(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=pu(r.transform,e||null);null!=i&&(null===n&&(n=ec.empty()),n.set(r.field,i))}return n||null}function Pu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ro(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gu&&t instanceof gu||e instanceof yu&&t instanceof yu?ro(e.elements,t.elements,Ml):e instanceof wu&&t instanceof wu?Ml(e.Re,t.Re):e instanceof mu&&t instanceof mu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Du extends Nu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ru extends Nu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ou(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Lu(e,t,n){const r=new Map;Ma(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,fu(a,o,n[i]))}return r}function Mu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,hu(e,s,t))}return r}class Uu extends Nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fu extends Nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Tu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Au(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Au(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=tu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Iu(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(oo.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),su())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,((e,t)=>Pu(e,t)))&&ro(this.baseMutations,e.baseMutations,((e,t)=>Pu(e,t)))}}class Vu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ma(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=ru;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Vu(e,t,n,r)}}class zu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $u{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class qu{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hu,Wu;function Gu(e){switch(e){case Fa.OK:return Oa(64938);case Fa.CANCELLED:case Fa.UNKNOWN:case Fa.DEADLINE_EXCEEDED:case Fa.RESOURCE_EXHAUSTED:case Fa.INTERNAL:case Fa.UNAVAILABLE:case Fa.UNAUTHENTICATED:return!1;case Fa.INVALID_ARGUMENT:case Fa.NOT_FOUND:case Fa.ALREADY_EXISTS:case Fa.PERMISSION_DENIED:case Fa.FAILED_PRECONDITION:case Fa.ABORTED:case Fa.OUT_OF_RANGE:case Fa.UNIMPLEMENTED:case Fa.DATA_LOSS:return!0;default:return Oa(15467,{code:e})}}function Ku(e){if(void 0===e)return Pa("GRPC error has no .code"),Fa.UNKNOWN;switch(e){case Hu.OK:return Fa.OK;case Hu.CANCELLED:return Fa.CANCELLED;case Hu.UNKNOWN:return Fa.UNKNOWN;case Hu.DEADLINE_EXCEEDED:return Fa.DEADLINE_EXCEEDED;case Hu.RESOURCE_EXHAUSTED:return Fa.RESOURCE_EXHAUSTED;case Hu.INTERNAL:return Fa.INTERNAL;case Hu.UNAVAILABLE:return Fa.UNAVAILABLE;case Hu.UNAUTHENTICATED:return Fa.UNAUTHENTICATED;case Hu.INVALID_ARGUMENT:return Fa.INVALID_ARGUMENT;case Hu.NOT_FOUND:return Fa.NOT_FOUND;case Hu.ALREADY_EXISTS:return Fa.ALREADY_EXISTS;case Hu.PERMISSION_DENIED:return Fa.PERMISSION_DENIED;case Hu.FAILED_PRECONDITION:return Fa.FAILED_PRECONDITION;case Hu.ABORTED:return Fa.ABORTED;case Hu.OUT_OF_RANGE:return Fa.OUT_OF_RANGE;case Hu.UNIMPLEMENTED:return Fa.UNIMPLEMENTED;case Hu.DATA_LOSS:return Fa.DATA_LOSS;default:return Oa(39323,{code:e})}}(Wu=Hu||(Hu={}))[Wu.OK=0]="OK",Wu[Wu.CANCELLED=1]="CANCELLED",Wu[Wu.UNKNOWN=2]="UNKNOWN",Wu[Wu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wu[Wu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wu[Wu.NOT_FOUND=5]="NOT_FOUND",Wu[Wu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wu[Wu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wu[Wu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wu[Wu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wu[Wu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wu[Wu.ABORTED=10]="ABORTED",Wu[Wu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wu[Wu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wu[Wu.INTERNAL=13]="INTERNAL",Wu[Wu.UNAVAILABLE=14]="UNAVAILABLE",Wu[Wu.DATA_LOSS=15]="DATA_LOSS";let Qu=null;const Xu=new da([4294967295,4294967295],0);function Yu(e){const t=Ya().encode(e),n=new ha;return n.update(t),new Uint8Array(n.digest())}function Ju(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new da([n,r],0),new da([i,s],0)]}class Zu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ed(`Invalid padding: ${t}`);if(n<0)throw new ed(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ed(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ed(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=da.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(da.fromNumber(n)));return 1===r.compare(Xu)&&(r=new da([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Yu(e),[n,r]=Ju(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Zu(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.pe)return;const t=Yu(e),[n,r]=Ju(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class td{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new td(oo.min(),r,new cl(Za),Xc(),su())}}class nd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new nd(n,t,su(),su(),su())}}class rd{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class id{constructor(e,t){this.targetId=e,this.Ce=t}}class sd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ad{constructor(){this.Fe=0,this.Me=cd(),this.xe=gl.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=su(),t=su(),n=su();return this.Me.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Oa(38017,{changeType:i})}})),new nd(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=cd()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ma(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class od{constructor(e){this.ze=e,this.je=new Map,this.He=Xc(),this.Je=ld(),this.Ye=ld(),this.Ze=new cl(Za)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:Oa(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const i=r.target;if(Tc(i))if(0===n){const e=new po(i.path);this.tt(t,e,nc.newNoDocument(e,oo.min()))}else Ma(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),i=n?this.lt(n,e,r):1;if(0!==i){this.st(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Qu||Qu.ht(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,i))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=wl(n).toUint8Array()}catch(e){if(e instanceof ml)return Da("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Zu(s,r,i)}catch(e){return Da(e instanceof ed?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.pe?null:a}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ze.Pt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const i=this._t(r);if(i){if(n.current&&Tc(i.target)){const t=new po(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,nc.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=su();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new td(e,t,this.Ze,this.He,n);return this.He=Xc(),this.Je=ld(),this.Ye=ld(),this.Ze=new cl(Za),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new ad,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new hl(Za),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new hl(Za),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||ja("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new ad),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function ld(){return new cl(po.comparator)}function cd(){return new cl(po.comparator)}const ud={asc:"ASCENDING",desc:"DESCENDING"},dd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hd={and:"AND",or:"OR"};class fd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pd(e,t){return e.useProto3Json||To(t)?t:{value:t}}function md(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vd(e,t){return md(e,t.toTimestamp())}function yd(e){return Ma(!!e,49232),oo.fromTimestamp(function(e){const t=yl(e);return new ao(t.seconds,t.nanos)}(e))}function bd(e,t){return wd(e,t).canonicalString()}function wd(e,t){const n=function(e){return new uo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function xd(e){const t=uo.fromString(e);return Ma(zd(t),10190,{key:t.toString()}),t}function Sd(e,t){return bd(e.databaseId,t.path)}function kd(e,t){const n=xd(t);if(n.get(1)!==e.databaseId.projectId)throw new Ba(Fa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ba(Fa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new po(Nd(n))}function Cd(e,t){return bd(e.databaseId,t)}function Ed(e){const t=xd(e);return 4===t.length?uo.emptyPath():Nd(t)}function _d(e){return new uo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Nd(e){return Ma(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Id(e,t,n){return{name:Sd(e,t),fields:n.value.mapValue.fields}}function Td(e,t){let n;if(t instanceof Du)n={update:Id(e,t.key,t.value)};else if(t instanceof Uu)n={delete:Sd(e,t.key)};else if(t instanceof Ru)n={update:Id(e,t.key,t.data),updateMask:Vd(t.fieldMask)};else{if(!(t instanceof Fu))return Oa(16599,{ft:t.type});n={verify:Sd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof mu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wu)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw Oa(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:vd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Oa(27497)}(e,t.precondition)),n}function Ad(e,t){return{documents:[Cd(e,t.path)]}}function jd(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cd(e,i);const s=function(e){if(0!==e.length)return Bd(uc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ud(e.field),direction:Od(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=pd(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:i}}function Pd(e,t,n,r){const{gt:i,parent:s}=jd(e,t),a={},o=[];let l=0;return n.forEach((e=>{const t=r?e.alias:"aggregate_"+l++;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:Ud(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:Ud(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},yt:a,parent:s}}function Dd(e){let t=Ed(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ma(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Rd(e);return t instanceof uc&&hc(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new ac(Fd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,To(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new rc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new rc(n,t)}(n.endAt)),jc(t,i,a,s,o,"F",l,c)}function Rd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fd(e.unaryFilter.field);return cc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fd(e.unaryFilter.field);return cc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fd(e.unaryFilter.field);return cc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fd(e.unaryFilter.field);return cc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oa(61313);default:return Oa(60726)}}(e):void 0!==e.fieldFilter?function(e){return cc.create(Fd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oa(58110);default:return Oa(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return uc.create(e.compositeFilter.filters.map((e=>Rd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Oa(1026)}}(e.compositeFilter.op))}(e):Oa(30097,{filter:e})}function Od(e){return ud[e]}function Ld(e){return dd[e]}function Md(e){return hd[e]}function Ud(e){return{fieldPath:e.canonicalString()}}function Fd(e){return fo.fromServerFormat(e.fieldPath)}function Bd(e){return e instanceof cc?function(e){if("=="===e.op){if(Ql(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NAN"}};if(Kl(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ql(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NOT_NAN"}};if(Kl(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ud(e.field),op:Ld(e.op),value:e.value}}}(e):e instanceof uc?function(e){const t=e.getFilters().map((e=>Bd(e)));return 1===t.length?t[0]:{compositeFilter:{op:Md(e.op),filters:t}}}(e):Oa(54877,{filter:e})}function Vd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function zd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class $d{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:oo.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:oo.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gl.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new $d(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qd{constructor(e){this.wt=e}}function Hd(e){const t=Dd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bc(t,t.limit,"L"):t}class Wd{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(bl(e.integerValue));else if("doubleValue"in e){const n=bl(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),Ao(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=yl(n)),t.Ot(`${n.seconds||""}`),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(wl(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Zl(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Yl(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Oa(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const i=e.fields||{};this.Mt(t,53);const s=Ol,a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(bl(a)),this.Nt(s,t),this.Ct(i[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),po.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Wd.Wt=new Wd;class Gd{constructor(){this.yn=new Kd}addToCollectionParentIndex(e,t){return this.yn.add(t),Co.resolve()}getCollectionParents(e,t){return Co.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return Co.resolve()}deleteFieldIndex(e,t){return Co.resolve()}deleteAllFieldIndexes(e){return Co.resolve()}createTargetIndexes(e,t){return Co.resolve()}getDocumentsMatchingTarget(e,t){return Co.resolve(null)}getIndexType(e,t){return Co.resolve(0)}getFieldIndexes(e,t){return Co.resolve([])}getNextCollectionGroupToUpdate(e){return Co.resolve(null)}getMinOffset(e,t){return Co.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return Co.resolve(bo.min())}updateCollectionGroup(e,t,n){return Co.resolve()}updateIndexEntries(e,t){return Co.resolve()}}class Kd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new hl(uo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new hl(uo.comparator)).toArray()}}new Uint8Array(0);const Qd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xd=41943040;class Yd{static withCacheSize(e){return new Yd(e,Yd.DEFAULT_COLLECTION_PERCENTILE,Yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Yd.DEFAULT_COLLECTION_PERCENTILE=10,Yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yd.DEFAULT=new Yd(Xd,Yd.DEFAULT_COLLECTION_PERCENTILE,Yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yd.DISABLED=new Yd(-1,0,0);class Jd{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Jd(0)}static ir(){return new Jd(-1)}}const Zd="LruGarbageCollector",eh=1048576;function th(e,t){let[n,r]=e,[i,s]=t;const a=Za(n,i);return 0===a?Za(r,s):a}class nh{constructor(e){this.cr=e,this.buffer=new hl(th),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();th(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){ja(Zd,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){_o(e)?ja(Zd,"Ignoring IndexedDB error during garbage collection: ",e):await ko(e)}await this.Ir(3e5)}))}}class ih{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Co.resolve(No.le);const n=new nh(t);return this.Er.forEachTarget(e,(e=>n.Pr(e.sequenceNumber))).next((()=>this.Er.Ar(e,(e=>n.Pr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ja("LruGarbageCollector","Garbage collection skipped; disabled"),Co.resolve(Qd)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ja("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qd):this.Rr(e,t)))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ja("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Aa()<=ct.DEBUG&&ja("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(a-s)+"ms\n"+`\tRemoved ${i} targets in `+(o-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),Co.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function sh(e,t){return new ih(e,t)}class ah{constructor(){this.changes=new Kc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Co.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Au(n.mutation,e,pl.empty(),ao.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,su()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:su();const r=eu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Jc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=eu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,su())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Xc();const s=nu(),a=nu();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Ru)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Au(a.mutation,t,a.mutation.getFieldMask(),ao.now())):s.set(t.key,pl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new oh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=nu();let r=new cl(((e,t)=>e-t)),i=su();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||pl.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||su()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=tu();l.forEach((e=>{if(!i.has(e)){const r=Iu(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Co.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return po.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Co.resolve(eu());let a=mo,o=i;return s.next((t=>Co.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Co.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,su()))).next((e=>({batchId:a,changes:Zc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new po(t)).next((e=>{let t=Jc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Jc();return this.indexManager.getCollectionParents(e,i).next((a=>Co.forEach(a,(a=>{const o=function(e,t){return new Ac(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,nc.newInvalidDocument(r)))}));let n=Jc();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Au(s.mutation,r,pl.empty(),ao.now()),qc(t,r)&&(n=n.insert(e,r))})),n}))}}class ch{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return Co.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:yd(e.createTime)}}(t)),Co.resolve()}getNamedQuery(e,t){return Co.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(e){return{name:e.name,query:Hd(e.bundledQuery),readTime:yd(e.readTime)}}(t)),Co.resolve()}}class uh{constructor(){this.overlays=new cl(po.comparator),this.Or=new Map}getOverlay(e,t){return Co.resolve(this.overlays.get(t))}getOverlays(e,t){const n=eu();return Co.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),Co.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Or.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Or.delete(n)),Co.resolve()}getOverlaysForCollection(e,t,n){const r=eu(),i=t.length+1,s=new po(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Co.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new cl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=eu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=eu(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Co.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Or.get(r.largestBatchId).delete(n.key);this.Or.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new zu(t,n));let i=this.Or.get(t);void 0===i&&(i=su(),this.Or.set(t,i)),this.Or.set(t,i.add(n.key))}}class dh{constructor(){this.sessionToken=gl.EMPTY_BYTE_STRING}getSessionToken(e){return Co.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Co.resolve()}}class hh{constructor(){this.Nr=new hl(fh.Br),this.Lr=new hl(fh.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new fh(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Qr(new fh(e,t))}$r(e,t){e.forEach((e=>this.removeReference(e,t)))}Ur(e){const t=new po(new uo([])),n=new fh(t,e),r=new fh(t,e+1),i=[];return this.Lr.forEachInRange([n,r],(e=>{this.Qr(e),i.push(e.key)})),i}Kr(){this.Nr.forEach((e=>this.Qr(e)))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new po(new uo([])),n=new fh(t,e),r=new fh(t,e+1);let i=su();return this.Lr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new fh(e,0),n=this.Nr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class fh{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return po.comparator(e.key,t.key)||Za(e.Gr,t.Gr)}static kr(e,t){return Za(e.Gr,t.Gr)||po.comparator(e.key,t.key)}}class ph{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new hl(fh.Br)}checkEmpty(e){return Co.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Bu(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.zr=this.zr.add(new fh(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Co.resolve(s)}lookupMutationBatch(e,t){return Co.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Hr(n),i=r<0?0:r;return Co.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Co.resolve(0===this.mutationQueue.length?Io:this.Jn-1)}getAllMutationBatches(e){return Co.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new fh(t,0),r=new fh(t,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([n,r],(e=>{const t=this.jr(e.Gr);i.push(t)})),Co.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new hl(Za);return t.forEach((e=>{const t=new fh(e,0),r=new fh(e,Number.POSITIVE_INFINITY);this.zr.forEachInRange([t,r],(e=>{n=n.add(e.Gr)}))})),Co.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;po.isDocumentKey(i)||(i=i.child(""));const s=new fh(new po(i),0);let a=new hl(Za);return this.zr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Gr)),!0)}),s),Co.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach((e=>{const n=this.jr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ma(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return Co.forEach(t.mutations,(r=>{const i=new fh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.zr=n}))}Xn(e){}containsKey(e,t){const n=new fh(t,0),r=this.zr.firstAfterOrEqual(n);return Co.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Co.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mh{constructor(e){this.Zr=e,this.docs=new cl(po.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Co.resolve(n?n.document.mutableCopy():nc.newInvalidDocument(t))}getEntries(e,t){let n=Xc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():nc.newInvalidDocument(e))})),Co.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Xc();const s=t.path,a=new po(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||wo(yo(a),n)<=0||(r.has(a.key)||qc(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Co.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Oa(9500)}Xr(e,t){return Co.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new gh(this)}getSize(e){return Co.resolve(this.size)}}class gh extends ah{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.vr.addEntry(e,r)):this.vr.removeEntry(n)})),Co.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class vh{constructor(e){this.persistence=e,this.ei=new Kc((e=>Nc(e)),Ic),this.lastRemoteSnapshotVersion=oo.min(),this.highestTargetId=0,this.ti=0,this.ni=new hh,this.targetCount=0,this.ri=Jd.rr()}forEachTarget(e,t){return this.ei.forEach(((e,n)=>t(n))),Co.resolve()}getLastRemoteSnapshotVersion(e){return Co.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Co.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),Co.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),Co.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Jd(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,Co.resolve()}updateTargetData(e,t){return this.ar(t),Co.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,Co.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ei.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ei.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Co.waitFor(i).next((()=>r))}getTargetCount(e){return Co.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return Co.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),Co.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Co.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),Co.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return Co.resolve(n)}containsKey(e,t){return Co.resolve(this.ni.containsKey(t))}}class yh{constructor(e,t){this.ii={},this.overlays={},this.si=new No(0),this.oi=!1,this.oi=!0,this._i=new dh,this.referenceDelegate=e(this),this.ai=new vh(this),this.indexManager=new Gd,this.remoteDocumentCache=function(e){return new mh(e)}((e=>this.referenceDelegate.ui(e))),this.serializer=new qd(t),this.ci=new ch(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new ph(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){ja("MemoryPersistence","Starting transaction:",e);const r=new bh(this.si.next());return this.referenceDelegate.li(),n(r).next((e=>this.referenceDelegate.hi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Pi(e,t){return Co.or(Object.values(this.ii).map((n=>()=>n.containsKey(e,t))))}}class bh extends So{constructor(e){super(),this.currentSequenceNumber=e}}class wh{constructor(e){this.persistence=e,this.Ti=new hh,this.Ii=null}static Ei(e){return new wh(e)}get di(){if(this.Ii)return this.Ii;throw Oa(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),Co.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),Co.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Co.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach((e=>this.di.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Co.forEach(this.di,(n=>{const r=po.fromPath(n);return this.Ai(e,r).next((e=>{e||t.removeEntry(r,oo.min())}))})).next((()=>(this.Ii=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ai(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}ui(e){return 0}Ai(e,t){return Co.or([()=>Co.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class xh{constructor(e,t){this.persistence=e,this.Ri=new Kc((e=>Do(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=sh(this,t)}static Ei(e,t){return new xh(e,t)}li(){}hi(e){return Co.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}Ar(e,t){return Co.forEach(this.Ri,((n,r)=>this.gr(e,n,r).next((e=>e?Co.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Xr(e,(r=>this.gr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,oo.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),Co.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),Co.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),Co.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),Co.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ql(e.data.value)),t}gr(e,t,n){return Co.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Ri.get(t);return Co.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Sh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=r}static Ps(e,t){let n=su(),r=su();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Sh(e,t.fromCache,n,r)}}class kh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ch{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=He()?8:Eo(qe())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Vs(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new kh;return this.fs(e,t,n).next((r=>{if(i.result=r,this.Is)return this.gs(e,t,n,r.size)}))})).next((()=>i.result))}gs(e,t,n,r){return n.documentReadCount<this.Es?(Aa()<=ct.DEBUG&&ja("QueryEngine","SDK will not create cache indexes for query:",$c(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),Co.resolve()):(Aa()<=ct.DEBUG&&ja("QueryEngine","Query:",$c(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(Aa()<=ct.DEBUG&&ja("QueryEngine","The SDK decides to create cache indexes for query:",$c(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lc(t))):Co.resolve())}Rs(e,t){if(Dc(t))return Co.resolve(null);let n=Lc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Bc(t,null,"F"),n=Lc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=su(...r);return this.As.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ps(t,r);return this.ys(t,s,i,n.readTime)?this.Rs(e,Bc(t,null,"F")):this.ws(e,s,t,n)}))))})))))}Vs(e,t,n,r){return Dc(t)||r.isEqual(oo.min())?Co.resolve(null):this.As.getDocuments(e,n).next((i=>{const s=this.ps(t,i);return this.ys(t,s,n,r)?Co.resolve(null):(Aa()<=ct.DEBUG&&ja("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$c(t)),this.ws(e,s,t,vo(r,mo)).next((e=>e)))}))}ps(e,t){let n=new hl(Wc(e));return t.forEach(((t,r)=>{qc(e,r)&&(n=n.add(r))})),n}ys(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}fs(e,t,n){return Aa()<=ct.DEBUG&&ja("QueryEngine","Using full collection scan to execute query:",$c(t)),this.As.getDocumentsMatchingQuery(e,t,bo.min(),n)}ws(e,t,n,r){return this.As.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Eh="LocalStore";class _h{constructor(e,t,n,r){this.persistence=e,this.bs=t,this.serializer=r,this.Ss=new cl(Za),this.Ds=new Kc((e=>Nc(e)),Ic),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lh(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ss)))}}function Nh(e,t,n,r){return new _h(e,t,n,r)}async function Ih(e,t){const n=Ua(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Fs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=su();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({Ms:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Th(e){const t=Ua(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ai.getLastRemoteSnapshotVersion(e)))}function Ah(e,t,n){let r=su(),i=su();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Xc();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(oo.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ja(Eh,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{xs:r,Os:i}}))}function jh(e,t){const n=Ua(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Io),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ph(e,t){const n=Ua(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ai.getTargetData(e,t).next((i=>i?(r=i,Co.resolve(r)):n.ai.allocateTargetId(e).next((i=>(r=new $d(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.ai.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(e.targetId,e),n.Ds.set(t,e.targetId)),e}))}async function Dh(e,t,n){const r=Ua(e),i=r.Ss.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!_o(e))throw e;ja(Eh,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(i.target)}function Rh(e,t,n){const r=Ua(e);let i=oo.min(),s=su();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ua(e),i=r.Ds.get(n);return void 0!==i?Co.resolve(r.Ss.get(i)):r.ai.getTargetData(t,n)}(r,e,Lc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.bs.getDocumentsMatchingQuery(e,t,n?i:oo.min(),n?s:su()))).next((e=>(Oh(r,Hc(t),e),{documents:e,Ns:s})))))}function Oh(e,t,n){let r=e.vs.get(t)||oo.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.vs.set(t,r)}class Lh{constructor(){this.activeTargetIds=ou()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mh{constructor(){this.So=new Lh,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Lh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uh{vo(e){}shutdown(){}}const Fh="ConnectivityMonitor";class Bh{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ja(Fh,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){ja(Fh,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vh=null;function zh(){return null===Vh?Vh=268435456+Math.round(2147483648*Math.random()):Vh++,"0x"+Vh.toString(16)}const $h="RestConnection",qh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hh{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${r}`,this.qo=this.databaseId.database===Tl?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Qo(e,t,n,r,i){const s=zh(),a=this.$o(e,t.toUriEncodedString());ja($h,`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(o,r,i),this.Ko(e,a,o,n).then((t=>(ja($h,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Da($h,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t}))}Wo(e,t,n,r,i,s){return this.Qo(e,t,n,r,i)}Uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ia,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$o(e,t){const n=qh[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}class Wh{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const Gh="WebChannelConnection";class Kh extends Hh{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,r){const i=zh();return new Promise(((s,a)=>{const o=new ma;o.setWithCredentials(!0),o.listenOnce(va.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case ya.NO_ERROR:const t=o.getResponseJson();ja(Gh,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case ya.TIMEOUT:ja(Gh,`RPC '${e}' ${i} timed out`),a(new Ba(Fa.DEADLINE_EXCEEDED,"Request time out"));break;case ya.HTTP_ERROR:const n=o.getStatus();if(ja(Gh,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Fa).indexOf(t)>=0?t:Fa.UNKNOWN}(t.status);a(new Ba(e,t.message))}else a(new Ba(Fa.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ba(Fa.UNAVAILABLE,"Connection failed."));break;default:Oa(9055,{s_:e,streamId:i,o_:o.getLastErrorCode(),__:o.getLastError()})}}finally{ja(Gh,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);ja(Gh,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)}))}a_(e,t,n){const r=zh(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Sa(),a=xa(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Uo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");ja(Gh,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new Wh({Go:t=>{h?ja(Gh,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(ja(Gh,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),ja(Gh,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,ga.EventType.OPEN,(()=>{h||(ja(Gh,`RPC '${e}' stream ${r} transport opened.`),f.t_())})),p(u,ga.EventType.CLOSE,(()=>{h||(h=!0,ja(Gh,`RPC '${e}' stream ${r} transport closed`),f.r_())})),p(u,ga.EventType.ERROR,(t=>{h||(h=!0,Da(Gh,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.r_(new Ba(Fa.UNAVAILABLE,"The operation could not be completed")))})),p(u,ga.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Ma(!!i,16349);const s=i,a=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){ja(Gh,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Hu[e];if(void 0!==t)return Ku(t)}(t),i=a.message;void 0===n&&(n=Fa.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.r_(new Ba(n,i)),u.close()}else ja(Gh,`RPC '${e}' stream ${r} received:`,i),f.i_(i)}})),p(a,wa.STAT_EVENT,(t=>{t.stat===ba.PROXY?ja(Gh,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ba.NOPROXY&&ja(Gh,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.n_()}),0),f}}function Qh(){return"undefined"!=typeof document?document:null}function Xh(e){return new fd(e,!0)}class Yh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.bi=e,this.timerId=t,this.u_=n,this.c_=r,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),r=Math.max(0,t-n);r>0&&ja("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,(()=>(this.T_=Date.now(),e()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const Jh="PersistentStream";class Zh{constructor(e,t,n,r,i,s,a,o){this.bi=e,this.R_=n,this.V_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Yh(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==e?this.y_.reset():t&&t.code===Fa.RESOURCE_EXHAUSTED?(Pa(t.toString()),Pa("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Fa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.m_===t&&this.B_(n,r)}),(t=>{e((()=>{const e=new Ba(Fa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.L_(e)}))}))}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((e=>{n((()=>this.L_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.p_?this.q_(e):this.onNext(e)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(e){return ja(Jh,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget((()=>this.m_===e?t():(ja(Jh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ef extends Zh{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Oa(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ma(void 0===t||"string"==typeof t,58123),gl.fromBase64String(t||"")):(Ma(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),gl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Fa.UNKNOWN:Ku(e.code);return new Ba(t,e.message||"")}(a);n=new sd(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=kd(e,r.document.name),s=yd(r.document.updateTime),a=r.document.createTime?yd(r.document.createTime):oo.min(),o=new ec({mapValue:{fields:r.document.fields}}),l=nc.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new rd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=kd(e,r.document),s=r.readTime?yd(r.readTime):oo.min(),a=nc.newNoDocument(i,s),o=r.removedTargetIds||[];n=new rd([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=kd(e,r.document),s=r.removedTargetIds||[];n=new rd([],s,i,null)}else{if(!("filter"in t))return Oa(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new qu(r,i),a=e.targetId;n=new id(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return oo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?oo.min():t.readTime?yd(t.readTime):oo.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=_d(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Tc(r)?{documents:Ad(e,r)}:{query:jd(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=gd(e,t.resumeToken);const r=pd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(oo.min())>0){n.readTime=md(e,t.snapshotVersion.toTimestamp());const r=pd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oa(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=_d(this.serializer),t.removeTarget=e,this.F_(t)}}class tf extends Zh{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Ma(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ma(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){Ma(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function(e,t){return e&&e.length>0?(Ma(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?yd(e.updateTime):yd(t);return n.isEqual(oo.min())&&(n=yd(t)),new Cu(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=yd(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=_d(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Td(this.serializer,e)))};this.F_(t)}}class nf{}class rf extends nf{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new Ba(Fa.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.Qo(e,wd(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ba(Fa.UNKNOWN,e.toString())}))}Wo(e,t,n,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Wo(e,wd(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ba(Fa.UNKNOWN,e.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class sf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Pa(t),this.ea=!1):ja("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const af="RemoteStore";class of{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo((e=>{n.enqueueAndForget((async()=>{gf(this)&&(ja(af,"Restarting streams for network reachability change."),await async function(e){const t=Ua(e);t.aa.add(4),await cf(t),t.la.set("Unknown"),t.aa.delete(4),await lf(t)}(this))}))})),this.la=new sf(n,r)}}async function lf(e){if(gf(e))for(const t of e.ua)await t(!0)}async function cf(e){for(const t of e.ua)await t(!1)}function uf(e,t){const n=Ua(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),mf(n)?pf(n):Of(n).b_()&&hf(n,t))}function df(e,t){const n=Ua(e),r=Of(n);n._a.delete(t),r.b_()&&ff(n,t),0===n._a.size&&(r.b_()?r.v_():gf(n)&&n.la.set("Unknown"))}function hf(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(oo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Of(e).U_(t)}function ff(e,t){e.ha.Ke(t),Of(e).K_(t)}function pf(e){e.ha=new od({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Of(e).start(),e.la.ta()}function mf(e){return gf(e)&&!Of(e).w_()&&e._a.size>0}function gf(e){return 0===Ua(e).aa.size}function vf(e){e.ha=void 0}async function yf(e){e.la.set("Online")}async function bf(e){e._a.forEach(((t,n)=>{hf(e,t)}))}async function wf(e,t){vf(e),mf(e)?(e.la.ia(t),pf(e)):e.la.set("Unknown")}async function xf(e,t,n){if(e.la.set("Online"),t instanceof sd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._a.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._a.delete(r),e.ha.removeTarget(r))}(e,t)}catch(n){ja(af,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Sf(e,n)}else if(t instanceof rd?e.ha.Xe(t):t instanceof id?e.ha.ot(t):e.ha.nt(t),!n.isEqual(oo.min()))try{const t=await Th(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ha.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e._a.get(r);i&&e._a.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e._a.get(t);if(!r)return;e._a.set(t,r.withResumeToken(gl.EMPTY_BYTE_STRING,r.snapshotVersion)),ff(e,t);const i=new $d(r.target,t,n,r.sequenceNumber);hf(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ja(af,"Failed to raise snapshot:",t),await Sf(e,t)}}async function Sf(e,t,n){if(!_o(t))throw t;e.aa.add(1),await cf(e),e.la.set("Offline"),n||(n=()=>Th(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ja(af,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await lf(e)}))}function kf(e,t){return t().catch((n=>Sf(e,n,t)))}async function Cf(e){const t=Ua(e),n=Lf(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:Io;for(;Ef(t);)try{const e=await jh(t.localStore,r);if(null===e){0===t.oa.length&&n.v_();break}r=e.batchId,_f(t,e)}catch(e){await Sf(t,e)}Nf(t)&&If(t)}function Ef(e){return gf(e)&&e.oa.length<10}function _f(e,t){e.oa.push(t);const n=Lf(e);n.b_()&&n.W_&&n.G_(t.mutations)}function Nf(e){return gf(e)&&!Lf(e).w_()&&e.oa.length>0}function If(e){Lf(e).start()}async function Tf(e){Lf(e).H_()}async function Af(e){const t=Lf(e);for(const n of e.oa)t.G_(n.mutations)}async function jf(e,t,n){const r=e.oa.shift(),i=Vu.from(r,t,n);await kf(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Cf(e)}async function Pf(e,t){t&&Lf(e).W_&&await async function(e,t){if(function(e){return Gu(e)&&e!==Fa.ABORTED}(t.code)){const n=e.oa.shift();Lf(e).D_(),await kf(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Cf(e)}}(e,t),Nf(e)&&If(e)}async function Df(e,t){const n=Ua(e);n.asyncQueue.verifyOperationInProgress(),ja(af,"RemoteStore received new credentials");const r=gf(n);n.aa.add(3),await cf(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await lf(n)}async function Rf(e,t){const n=Ua(e);t?(n.aa.delete(2),await lf(n)):t||(n.aa.add(2),await cf(n),n.la.set("Unknown"))}function Of(e){return e.Pa||(e.Pa=function(e,t,n){const r=Ua(e);return r.Y_(),new ef(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:yf.bind(null,e),Jo:bf.bind(null,e),Zo:wf.bind(null,e),Q_:xf.bind(null,e)}),e.ua.push((async t=>{t?(e.Pa.D_(),mf(e)?pf(e):e.la.set("Unknown")):(await e.Pa.stop(),vf(e))}))),e.Pa}function Lf(e){return e.Ta||(e.Ta=function(e,t,n){const r=Ua(e);return r.Y_(),new tf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:Tf.bind(null,e),Zo:Pf.bind(null,e),z_:Af.bind(null,e),j_:jf.bind(null,e)}),e.ua.push((async t=>{t?(e.Ta.D_(),await Cf(e)):(await e.Ta.stop(),e.oa.length>0&&(ja(af,`Stopping write stream with ${e.oa.length} pending writes`),e.oa=[]))}))),e.Ta}class Mf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Mf(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ba(Fa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uf(e,t){if(Pa("AsyncQueue",`${t}: ${e}`),_o(e))return new Ba(Fa.UNAVAILABLE,`${t}: ${e}`);throw e}class Ff{static emptySet(e){return new Ff(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||po.comparator(t.key,n.key):(e,t)=>po.comparator(e.key,t.key),this.keyedMap=Jc(),this.sortedSet=new cl(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ff))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ff;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Bf{constructor(){this.Ia=new cl(po.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?0!==e.type&&3===n.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==n.type?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ia=this.Ia.remove(t):1===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Oa(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Vf{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Vf(e,t,Ff.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class zf{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((e=>e.ma()))}}class $f{constructor(){this.queries=qf(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(e,t){const n=Ua(e),r=n.queries;n.queries=qf(),r.forEach(((e,n)=>{for(const r of n.Ra)r.onError(t)}))}(this,new Ba(Fa.ABORTED,"Firestore shutting down"))}}function qf(){return new Kc((e=>zc(e)),Vc)}async function Hf(e,t){const n=Ua(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Va()&&t.ma()&&(r=2):(s=new zf,r=t.ma()?0:1);try{switch(r){case 0:s.Aa=await n.onListen(i,!0);break;case 1:s.Aa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Uf(e,`Initialization of query '${$c(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Ra.push(t),t.ga(n.onlineState),s.Aa&&t.pa(s.Aa)&&Qf(n)}async function Wf(e,t){const n=Ua(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Ra.indexOf(t);e>=0&&(s.Ra.splice(e,1),0===s.Ra.length?i=t.ma()?0:1:!s.Va()&&t.ma()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Gf(e,t){const n=Ua(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Ra)e.pa(i)&&(r=!0);t.Aa=i}}r&&Qf(n)}function Kf(e,t,n){const r=Ua(e),i=r.queries.get(t);if(i)for(const s of i.Ra)s.onError(n);r.queries.delete(t)}function Qf(e){e.fa.forEach((e=>{e.next()}))}var Xf,Yf;(Yf=Xf||(Xf={})).ya="default",Yf.Cache="cache";class Jf{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Vf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==t;return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ca(e){e=Vf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Xf.Cache}}class Zf{constructor(e){this.key=e}}class ep{constructor(e){this.key=e}}class tp{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=su(),this.mutatedKeys=su(),this.Ua=Wc(e),this.Ka=new Ff(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new Bf,r=t?t.Ka:this.Ka;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=qc(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ja(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Ua(u,o)>0||l&&this.Ua(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ka:s,za:n,ys:a,mutatedKeys:i}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const s=e.za.da();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oa(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ua(e.doc,t.doc))),this.Ha(n),r=null!=r&&r;const a=t&&!r?this.Ja():[],o=0===this.$a.size&&this.current&&!r?1:0,l=o!==this.Qa;return this.Qa=o,0!==s.length||l?{snapshot:new Vf(this.query,e.Ka,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Bf,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach((e=>this.qa=this.qa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qa=this.qa.delete(e))),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=su(),this.Ka.forEach((e=>{this.Za(e.key)&&(this.$a=this.$a.add(e.key))}));const t=[];return e.forEach((e=>{this.$a.has(e)||t.push(new ep(e))})),this.$a.forEach((n=>{e.has(n)||t.push(new Zf(n))})),t}Xa(e){this.qa=e.Ns,this.$a=su();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Vf.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const np="SyncEngine";class rp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ip{constructor(e){this.key=e,this.tu=!1}}class sp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Kc((e=>zc(e)),Vc),this.iu=new Map,this.su=new Set,this.ou=new cl(po.comparator),this._u=new Map,this.au=new hh,this.uu={},this.cu=new Map,this.lu=Jd.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function ap(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Np(e);let i;const s=r.ru.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await lp(r,t,n,!0),i}async function op(e,t){const n=Np(e);await lp(n,t,!0,!1)}async function lp(e,t,n,r){const i=await Ph(e.localStore,Lc(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await cp(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&uf(e.remoteStore,i),o}async function cp(e,t,n,r,i){e.Pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ga(n);i.ys&&(i=await Rh(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ga(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return xp(e,t.targetId,o.Ya),o.snapshot}(e,t,n,r);const s=await Rh(e.localStore,t,!0),a=new tp(t,s.Ns),o=a.Ga(s.documents),l=nd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);xp(e,n,c.Ya);const u=new rp(t,n,a);return e.ru.set(t,u),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),c.snapshot}async function up(e,t,n){const r=Ua(e),i=r.ru.get(t),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter((e=>!Vc(e,t)))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&df(r.remoteStore,i.targetId),bp(r,i.targetId)})).catch(ko)):(bp(r,i.targetId),await Dh(r.localStore,i.targetId,!0))}async function dp(e,t){const n=Ua(e),r=n.ru.get(t),i=n.iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),df(n.remoteStore,r.targetId))}async function hp(e,t){const n=Ua(e);try{const e=await function(e,t){const n=Ua(e),r=t.snapshotVersion;let i=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Cs.newChangeBuffer({trackRemovals:!0});i=n.Ss;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.ai.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.ai.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(gl.EMPTY_BYTE_STRING,oo.min()).withLastLimboFreeSnapshotVersion(oo.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.ai.updateTargetData(e,c))}));let o=Xc(),l=su();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Ah(e,s,t.documentUpdates).next((e=>{o=e.xs,l=e.Os}))),!r.isEqual(oo.min())){const t=n.ai.getLastRemoteSnapshotVersion(e).next((t=>n.ai.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Co.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.Ss=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n._u.get(t);r&&(Ma(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.tu=!0:e.modifiedDocuments.size>0?Ma(r.tu,14607):e.removedDocuments.size>0&&(Ma(r.tu,42227),r.tu=!1))})),await Cp(n,e,t)}catch(e){await ko(e)}}function fp(e,t,n){const r=Ua(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ru.forEach(((n,r)=>{const i=r.view.ga(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ua(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Ra)i.ga(t)&&(r=!0)})),r&&Qf(n)}(r.eventManager,t),e.length&&r.nu.Q_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pp(e,t,n){const r=Ua(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r._u.get(t),s=i&&i.key;if(s){let e=new cl(po.comparator);e=e.insert(s,nc.newNoDocument(s,oo.min()));const n=su().add(s),i=new td(oo.min(),new Map,new cl(Za),e,n);await hp(r,i),r.ou=r.ou.remove(s),r._u.delete(t),kp(r)}else await Dh(r.localStore,t,!1).then((()=>bp(r,t,n))).catch(ko)}async function mp(e,t){const n=Ua(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ua(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Co.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ma(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=su();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);yp(n,r,null),vp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cp(n,e)}catch(e){await ko(e)}}async function gp(e,t,n){const r=Ua(e);try{const e=await function(e,t){const n=Ua(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ma(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);yp(r,t,n),vp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Cp(r,e)}catch(n){await ko(n)}}function vp(e,t){(e.cu.get(t)||[]).forEach((e=>{e.resolve()})),e.cu.delete(t)}function yp(e,t,n){const r=Ua(e);let i=r.uu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.uu[r.currentUser.toKey()]=i}}function bp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach((t=>{e.au.containsKey(t)||wp(e,t)}))}function wp(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);null!==n&&(df(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),kp(e))}function xp(e,t,n){for(const r of n)r instanceof Zf?(e.au.addReference(r.key,t),Sp(e,r)):r instanceof ep?(ja(np,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||wp(e,r.key)):Oa(19791,{Iu:r})}function Sp(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(ja(np,"New document in limbo: "+n),e.su.add(r),kp(e))}function kp(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new po(uo.fromString(t)),r=e.lu.next();e._u.set(r,new ip(n)),e.ou=e.ou.insert(n,r),uf(e.remoteStore,new $d(Lc(Pc(n.path)),r,"TargetPurposeLimboResolution",No.le))}}async function Cp(e,t,n){const r=Ua(e),i=[],s=[],a=[];r.ru.isEmpty()||(r.ru.forEach(((e,o)=>{a.push(r.Pu(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Sh.Ps(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.nu.Q_(i),await async function(e,t){const n=Ua(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Co.forEach(t,(t=>Co.forEach(t.ls,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Co.forEach(t.hs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!_o(e))throw e;ja(Eh,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ss.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ss=n.Ss.insert(e,i)}}}(r.localStore,s))}async function Ep(e,t){const n=Ua(e);if(!n.currentUser.isEqual(t)){ja(np,"User change. New user:",t.toKey());const e=await Ih(n.localStore,t);n.currentUser=t,function(e,t){e.cu.forEach((e=>{e.forEach((e=>{e.reject(new Ba(Fa.CANCELLED,t))}))})),e.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Cp(n,e.Ms)}}function _p(e,t){const n=Ua(e),r=n._u.get(t);if(r&&r.tu)return su().add(r.key);{let e=su();const r=n.iu.get(t);if(!r)return e;for(const t of r){const r=n.ru.get(t);e=e.unionWith(r.view.Wa)}return e}}function Np(e){const t=Ua(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_p.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pp.bind(null,t),t.nu.Q_=Gf.bind(null,t.eventManager),t.nu.Tu=Kf.bind(null,t.eventManager),t}function Ip(e){const t=Ua(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gp.bind(null,t),t}class Tp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return Nh(this.persistence,new Ch,e.initialUser,this.serializer)}Ru(e){return new yh(wh.Ei,this.serializer)}Au(e){return new Mh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tp.provider={build:()=>new Tp};class Ap extends Tp{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Ma(this.persistence.referenceDelegate instanceof xh,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new rh(n,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?Yd.withCacheSize(this.cacheSizeBytes):Yd.DEFAULT;return new yh((e=>xh.Ei(e,t)),this.serializer)}}class jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>fp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ep.bind(null,this.syncEngine),await Rf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $f}createDatastore(e){const t=Xh(e.databaseInfo.databaseId),n=function(e){return new Kh(e)}(e.databaseInfo);return function(e,t,n,r){return new rf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new of(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>fp(this.syncEngine,e,0)),Bh.C()?new Bh:new Uh)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new sp(e,t,n,r,i,s);return a&&(o.hu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ua(e);ja(af,"RemoteStore shutting down."),t.aa.add(5),await cf(t),t.ca.shutdown(),t.la.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}jp.provider={build:()=>new jp};class Pp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Pa("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Dp="FirestoreClient";class Rp{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Na.UNAUTHENTICATED,this.clientId=Ja.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{ja(Dp,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ja(Dp,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Ty){const n=Uf(Ty,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Op(e,t){e.asyncQueue.verifyOperationInProgress(),ja(Dp,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ih(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Lp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Mp(e);ja(Dp,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Df(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Df(t.remoteStore,n))),e._onlineComponents=t}async function Mp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ja(Dp,"Using user provided OfflineComponentProvider");try{await Op(e,e._uninitializedComponentsProvider._offline)}catch(Ty){const n=Ty;if(!function(e){return"FirebaseError"===e.name?e.code===Fa.FAILED_PRECONDITION||e.code===Fa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Da("Error using user provided cache. Falling back to memory cache: "+n),await Op(e,new Tp)}}else ja(Dp,"Using default OfflineComponentProvider"),await Op(e,new Ap(void 0));return e._offlineComponents}async function Up(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ja(Dp,"Using user provided OnlineComponentProvider"),await Lp(e,e._uninitializedComponentsProvider._online)):(ja(Dp,"Using default OnlineComponentProvider"),await Lp(e,new jp))),e._onlineComponents}function Fp(e){return Up(e).then((e=>e.syncEngine))}function Bp(e){return Up(e).then((e=>e.datastore))}async function Vp(e){const t=await Up(e),n=t.eventManager;return n.onListen=ap.bind(null,t.syncEngine),n.onUnlisten=up.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=op.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=dp.bind(null,t.syncEngine),n}function zp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Va;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Pp({next:o=>{s.yu(),t.enqueueAndForget((()=>Wf(e,a)));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Ba(Fa.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Ba(Fa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Jf(Pc(n.path),s,{includeMetadataChanges:!0,Fa:!0});return Hf(e,a)}(await Vp(e),e.asyncQueue,t,n,r))),r.promise}function $p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Va;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Pp({next:n=>{s.yu(),t.enqueueAndForget((()=>Wf(e,a))),n.fromCache&&"server"===r.source?i.reject(new Ba(Fa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Jf(n,s,{includeMetadataChanges:!0,Fa:!0});return Hf(e,a)}(await Vp(e),e.asyncQueue,t,n,r))),r.promise}function qp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Hp=new Map;function Wp(e,t,n){if(!n)throw new Ba(Fa.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Gp(e){if(!po.isDocumentKey(e))throw new Ba(Fa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Kp(e){if(po.isDocumentKey(e))throw new Ba(Fa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Qp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Oa(12329,{type:typeof e})}function Xp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ba(Fa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qp(e);throw new Ba(Fa.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Yp(e,t){if(t<=0)throw new Ba(Fa.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const Jp="firestore.googleapis.com",Zp=!0;class em{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ba(Fa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jp,this.ssl=Zp}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Zp;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Xd;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<eh)throw new Ba(Fa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ba(Fa.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ba(Fa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ba(Fa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ba(Fa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new em({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ba(Fa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ba(Fa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new em(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $a;switch(e.type){case"firstParty":return new Ga(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ba(Fa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Hp.get(e);t&&(ja("ComponentProvider","Removing Datastore"),Hp.delete(e),t.terminate())}(this),Promise.resolve()}}class nm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nm(this.firestore,e,this._query)}}class rm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new im(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rm(this.firestore,e,this._key)}}class im extends nm{constructor(e,t,n){super(e,t,Pc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rm(this.firestore,null,new po(e))}withConverter(e){return new im(this.firestore,e,this._path)}}function sm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rt(e),Wp("collection","path",t),e instanceof tm){const n=uo.fromString(t,...r);return Kp(n),new im(e,null,n)}{if(!(e instanceof rm||e instanceof im))throw new Ba(Fa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(uo.fromString(t,...r));return Kp(n),new im(e.firestore,null,n)}}function am(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rt(e),1===arguments.length&&(t=Ja.newId()),Wp("doc","path",t),e instanceof tm){const n=uo.fromString(t,...r);return Gp(n),new rm(e,null,new po(n))}{if(!(e instanceof rm||e instanceof im))throw new Ba(Fa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(uo.fromString(t,...r));return Gp(n),new rm(e.firestore,e instanceof im?e.converter:null,new po(n))}}const om="AsyncQueue";class lm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Yh(this,"async_queue_retry"),this.ju=()=>{const e=Qh();e&&ja(om,"Visibility state changed to "+e.visibilityState),this.y_.A_()},this.Hu=e;const t=Qh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Qh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise((()=>{}));const t=new Va;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qu.push(e),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(Iy){if(!_o(Iy))throw Iy;ja(om,"Operation failed with retryable error: "+Iy)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(e){const t=this.Hu.then((()=>(this.Wu=!0,e().catch((e=>{throw this.Ku=e,this.Wu=!1,Pa("INTERNAL UNHANDLED ERROR: ",cm(e)),e})).then((e=>(this.Wu=!1,e))))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const r=Mf.createAndSchedule(this,e,t,n,(e=>this.Xu(e)));return this.Uu.push(r),r}Ju(){this.Ku&&Oa(47125,{ec:cm(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do{e=this.Hu,await e}while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then((()=>{this.Uu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()}))}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function cm(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function um(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class dm extends tm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new lm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lm(e),this._firestoreClient=void 0,await e}}}function hm(e,t){const n="object"==typeof e?e:xn(),r="string"==typeof e?e:t||Tl,i=mn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Fe("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Xp(e,tm))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),o=`${t}:${n}`;s.host!==Jp&&s.host!==o&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:o,ssl:!1,emulatorOptions:r});if(!Xe(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Na.MOCK_USER;else{t=$e(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ba(Fa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Na(s)}e._authCredentials=new qa(new za(t,n))}}(i,...e)}return i}function fm(e){if(e._terminated)throw new Ba(Fa.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||pm(e),e._firestoreClient}function pm(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Il(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,qp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Rp(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class mm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class gm{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class vm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vm(gl.fromBase64String(e))}catch(e){throw new Ba(Fa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vm(gl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ym{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ba(Fa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bm{constructor(e){this._methodName=e}}class wm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ba(Fa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ba(Fa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Za(this._lat,e._lat)||Za(this._long,e._long)}}class xm{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Sm=/^__.*__$/;class km{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new Du(e,this.data,t,this.fieldTransforms)}}class Cm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Em(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oa(40011,{oc:e})}}class _m{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this._c(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new _m(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r.lc(e),r}hc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Wm(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(Em(this.oc)&&Sm.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class Nm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xh(e)}dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _m({oc:e,methodName:t,Ec:n,path:fo.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Im(e){const t=e._freezeSettings(),n=Xh(e._databaseId);return new Nm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Tm(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.dc(s.merge||s.mergeFields?2:0,t,n,i);zm("Data must be an object, but it was:",a,r);const o=Bm(r,a);let l,c;if(s.merge)l=new pl(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=$m(t,r,n);if(!a.contains(i))throw new Ba(Fa.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Gm(e,i)||e.push(i)}l=new pl(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new km(new ec(o),l,c)}class Am extends bm{_toFieldTransform(e){if(2!==e.oc)throw 1===e.oc?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Am}}function jm(e,t,n){return new _m({oc:3,Ec:t.settings.Ec,methodName:e._methodName,cc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Pm extends bm{_toFieldTransform(e){return new ku(e.path,new mu)}isEqual(e){return e instanceof Pm}}class Dm extends bm{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=jm(this,e,!0),n=this.Ac.map((e=>Fm(e,t))),r=new gu(n);return new ku(e.path,r)}isEqual(e){return e instanceof Dm&&Xe(this.Ac,e.Ac)}}class Rm extends bm{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=jm(this,e,!0),n=this.Ac.map((e=>Fm(e,t))),r=new yu(n);return new ku(e.path,r)}isEqual(e){return e instanceof Rm&&Xe(this.Ac,e.Ac)}}class Om extends bm{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new wu(e.serializer,uu(e.serializer,this.Rc));return new ku(e.path,t)}isEqual(e){return e instanceof Om&&this.Rc===e.Rc}}function Lm(e,t,n,r){const i=e.dc(1,t,n);zm("Data must be an object, but it was:",i,r);const s=[],a=ec.empty();al(r,((e,r)=>{const o=Hm(t,e,n);r=rt(r);const l=i.hc(o);if(r instanceof Am)s.push(o);else{const e=Fm(r,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new pl(s);return new Cm(a,o,i.fieldTransforms)}function Mm(e,t,n,r,i,s){const a=e.dc(1,t,n),o=[$m(t,r,n)],l=[i];if(s.length%2!=0)throw new Ba(Fa.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push($m(t,s[h])),l.push(s[h+1]);const c=[],u=ec.empty();for(let h=o.length-1;h>=0;--h)if(!Gm(c,o[h])){const e=o[h];let t=l[h];t=rt(t);const n=a.hc(e);if(t instanceof Am)c.push(e);else{const r=Fm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new pl(c);return new Cm(u,d,a.fieldTransforms)}function Um(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Fm(n,e.dc(r?4:3,t))}function Fm(e,t){if(Vm(e=rt(e)))return zm("Unsupported field value:",t,e),Bm(e,t);if(e instanceof bm)return function(e,t){if(!Em(t.oc))throw t.Tc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Tc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&4!==t.oc)throw t.Tc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Fm(i,t.Pc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=rt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return uu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ao.fromDate(e);return{timestampValue:md(t.serializer,n)}}if(e instanceof ao){const n=new ao(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:md(t.serializer,n)}}if(e instanceof wm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vm)return{bytesValue:gd(t.serializer,e._byteString)};if(e instanceof rm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Tc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:bd(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof xm)return function(e,t){return{mapValue:{fields:{[jl]:{stringValue:Rl},[Ol]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Tc("VectorValues must only contain numeric values.");return lu(t.serializer,e)}))}}}}}}(e,t);throw t.Tc(`Unsupported field value: ${Qp(e)}`)}(e,t)}function Bm(e,t){const n={};return ll(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):al(e,((e,r)=>{const i=Fm(r,t.uc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Vm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ao||e instanceof wm||e instanceof vm||e instanceof rm||e instanceof bm||e instanceof xm)}function zm(e,t,n){if(!Vm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Qp(n);throw"an object"===r?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function $m(e,t,n){if((t=rt(t))instanceof ym)return t._internalPath;if("string"==typeof t)return Hm(e,t);throw Wm("Field path arguments must be of type string or ",e,!1,void 0,n)}const qm=new RegExp("[~\\*/\\[\\]]");function Hm(e,t,n){if(t.search(qm)>=0)throw Wm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ym(...t.split("."))._internalPath}catch(Py){throw Wm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Wm(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ba(Fa.INVALID_ARGUMENT,o+e+l)}function Gm(e,t){return e.some((e=>e.isEqual(t)))}class Km{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qm extends Km{data(){return super.data()}}function Xm(e,t){return"string"==typeof t?Hm(e,t):t instanceof ym?t._internalPath:t._delegate._internalPath}function Ym(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ba(Fa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jm{}class Zm extends Jm{}function eg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Jm&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof rg)).length,n=e.filter((e=>e instanceof tg)).length;if(t>1||t>0&&n>0)throw new Ba(Fa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class tg extends Zm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new tg(e,t,n)}_apply(e){const t=this._parse(e);return cg(e._query,t),new nm(e.firestore,e.converter,Fc(e._query,t))}_parse(e){const t=Im(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ba(Fa.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){lg(a,s);const t=[];for(const n of a)t.push(og(r,e,n));o={arrayValue:{values:t}}}else o=og(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||lg(a,s),o=Um(n,t,a,"in"===s||"not-in"===s);return cc.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ng(e,t,n){const r=t,i=Xm("where",e);return tg._create(i,r,n)}class rg extends Jm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rg(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:uc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)cg(n,i),n=Fc(n,i)}(e._query,t),new nm(e.firestore,e.converter,Fc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ig extends Zm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ig(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ba(Fa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ba(Fa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(t,n)}(e._query,this._field,this._direction);return new nm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ac(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function sg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Xm("orderBy",e);return ig._create(n,t)}class ag extends Zm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ag(e,t,n)}_apply(e){return new nm(e.firestore,e.converter,Bc(e._query,this._limit,this._limitType))}}function og(e,t,n){if("string"==typeof(n=rt(n))){if(""===n)throw new Ba(Fa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rc(t)&&-1!==n.indexOf("/"))throw new Ba(Fa.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(uo.fromString(n));if(!po.isDocumentKey(r))throw new Ba(Fa.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hl(e,new po(r))}if(n instanceof rm)return Hl(e,n._key);throw new Ba(Fa.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qp(n)}.`)}function lg(e,t){if(!Array.isArray(e)||0===e.length)throw new Ba(Fa.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function cg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ba(Fa.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ba(Fa.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ug{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oa(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return al(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ol].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>bl(e.doubleValue)));return new xm(i)}convertGeoPoint(e){return new wm(bl(e.latitude),bl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_l(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const t=yl(e);return new ao(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=uo.fromString(e);Ma(zd(n),9688,{name:e});const r=new Al(n.get(1),n.get(3)),i=new po(n.popFirst(5));return r.isEqual(t)||Pa(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function dg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class hg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fg extends Km{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Xm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class pg extends fg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class mg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new hg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new pg(this._firestore,this._userDataWriter,n.key,n,new hg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ba(Fa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new pg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new hg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new pg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new hg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:gg(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function gg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oa(61501,{type:e})}}function vg(e){e=Xp(e,rm);const t=Xp(e.firestore,dm);return zp(fm(t),e._key).then((n=>_g(t,e,n)))}class yg extends ug{constructor(e){super(),this.firestore=e}convertBytes(e){return new vm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rm(this.firestore,null,t)}}function bg(e){e=Xp(e,nm);const t=Xp(e.firestore,dm),n=fm(t),r=new yg(t);return Ym(e._query),$p(n,e._query).then((n=>new mg(t,r,e,n)))}function wg(e,t,n){e=Xp(e,rm);const r=Xp(e.firestore,dm),i=dg(e.converter,t,n);return Eg(r,[Tm(Im(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Eu.none())])}function xg(e,t,n){e=Xp(e,rm);const r=Xp(e.firestore,dm),i=Im(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=rt(t))||t instanceof ym?Mm(i,"updateDoc",e._key,t,n,o):Lm(i,"updateDoc",e._key,t),Eg(r,[s.toMutation(e._key,Eu.exists(!0))])}function Sg(e){return Eg(Xp(e.firestore,dm),[new Uu(e._key,Eu.none())])}function kg(e,t){const n=Xp(e.firestore,dm),r=am(e),i=dg(e.converter,t);return Eg(n,[Tm(Im(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Eu.exists(!1))]).then((()=>r))}function Cg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=rt(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||um(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(um(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof rm)d=Xp(e.firestore,dm),h=Pc(e._key.path),u={next:t=>{n[l]&&n[l](_g(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Xp(e,nm);d=Xp(t.firestore,dm),h=t._query;const r=new yg(d);u={next:e=>{n[l]&&n[l](new mg(d,r,t,e))},error:n[l+1],complete:n[l+2]},Ym(e._query)}return function(e,t,n,r){const i=new Pp(r),s=new Jf(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Hf(await Vp(e),s))),()=>{i.yu(),e.asyncQueue.enqueueAndForget((async()=>Wf(await Vp(e),s)))}}(fm(d),h,c,u)}function Eg(e,t){return function(e,t){const n=new Va;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Ip(e);try{const e=await function(e,t){const n=Ua(e),r=ao.now(),i=t.reduce(((e,t)=>e.add(t.key)),su());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Xc(),l=su();return n.Cs.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=ju(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Ru(e.key,t,tc(t.value.mapValue),Eu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:Zc(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.uu[e.currentUser.toKey()];r||(r=new cl(Za)),r=r.insert(t,n),e.uu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Cp(r,e.changes),await Cf(r.remoteStore)}catch(e){const t=Uf(e,"Failed to persist write");n.reject(t)}}(await Fp(e),t,n))),n.promise}(fm(e),t)}function _g(e,t,n){const r=n.docs.get(t._key),i=new yg(e);return new fg(e,i,t._key,r,new hg(n.hasPendingWrites,n.fromCache),t.converter)}function Ng(e){return function(e,t){const n=Xp(e.firestore,dm),r=fm(n),i=ol(t,((e,t)=>new $u(t,e.aggregateType,e._internalFieldPath)));return function(e,t,n){const r=new Va;return e.asyncQueue.enqueueAndForget((async()=>{try{const i=await Bp(e);r.resolve(async function(e,t,n){var r;const i=Ua(e),{request:s,yt:a,parent:o}=Pd(i.serializer,Mc(t),n);i.connection.Bo||delete s.parent;const l=(await i.Wo("RunAggregationQuery",i.serializer.databaseId,o,s,1)).filter((e=>!!e.result));Ma(1===l.length,64727);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce(((e,t)=>(e[a[t]]=c[t],e)),{})}(i,t,n))}catch(e){r.reject(e)}})),r.promise}(r,e._query,i).then((t=>function(e,t,n){const r=new yg(e);return new gm(t,r,n)}(n,e,t)))}(e,{count:new mm("count")})}function Ig(){return new Pm("serverTimestamp")}function Tg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dm("arrayUnion",t)}function Ag(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Rm("arrayRemove",t)}function jg(e){return new Om("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ia=e}(bn),pn(new it("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new dm(new Ha(e.getProvider("auth-internal")),new Qa(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ba(Fa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Sn(Ea,_a,e),Sn(Ea,_a,"esm2017")}();var Pg=n(579);const Dg=(0,t.createContext)();function Rg(e){let{children:n}=e;const[r,i]=(0,t.useState)(null),[s,a]=(0,t.useState)(null),o=hm(),l=ca();(0,t.useEffect)((()=>{const e=function(e,t,n,r){return rt(e).onAuthStateChanged(t,n,r)}(l,(async e=>{if(e){i(e);try{const t=am(o,"users",e.uid);(await vg(t)).exists()?await xg(t,{isLoggedIn:!0,lastLogin:Ig()}):await wg(t,{email:e.email,nickname:e.displayName||"\uc775\uba85",isLoggedIn:!0,lastLogin:Ig()});const n=await vg(t);n.exists()&&a(n.data())}catch(t){console.error("Firestore \ub85c\uadf8\uc778 \ucc98\ub9ac \uc624\ub958:",t)}}else i(null),a(null)}));return()=>e()}),[l,o]);return(0,Pg.jsx)(Dg.Provider,{value:{user:r,userData:s,logout:async()=>{if(null!==r&&void 0!==r&&r.uid)try{await xg(am(o,"users",r.uid),{isLoggedIn:!1})}catch(e){console.error("\ub85c\uadf8\uc544\uc6c3 \uc2dc Firestore \uc5c5\ub370\uc774\ud2b8 \uc624\ub958:",e)}await zi(l)}},children:n})}const Og=(0,t.createContext)();Sn("firebase","11.6.1","app");const Lg="firebasestorage.googleapis.com",Mg="storageBucket";class Ug extends Ge{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Vg(e),`Firebase Storage: ${t} (${Vg(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ug.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fg,Bg;function Vg(e){return"storage/"+e}function zg(){return new Ug(Fg.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function $g(){return new Ug(Fg.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qg(){return new Ug(Fg.CANCELED,"User canceled the upload/download.")}function Hg(){return new Ug(Fg.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wg(e){return new Ug(Fg.INVALID_ARGUMENT,e)}function Gg(){return new Ug(Fg.APP_DELETED,"The Firebase app was deleted.")}function Kg(e,t){return new Ug(Fg.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Qg(e){throw new Ug(Fg.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Fg||(Fg={}));class Xg{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Xg.makeFromUrl(e,t)}catch(Iy){return new Xg(e,"")}if(""===n.path)return n;throw r=e,new Ug(Fg.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Lg?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Xg(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Ug(Fg.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Yg{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Jg(e){return"string"===typeof e||e instanceof String}function Zg(e){return ev()&&e instanceof Blob}function ev(){return"undefined"!==typeof Blob}function tv(e,t,n,r){if(r<t)throw Wg(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Wg(`Invalid value for '${e}'. Expected ${n} or less.`)}function nv(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function rv(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function iv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Bg||(Bg={}));class sv{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new av(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Bg.NO_ERROR,i=n.getStatus();if(!t||iv(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Bg.ABORT;return void e(!1,new av(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new av(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Iy){r(Iy)}else if(null!==i){const e=zg();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Gg():qg())}else{r($g())}};this.canceled_?t(0,new av(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class av{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function ov(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function lv(){const e=ov();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(ev())return new Blob(n);throw new Ug(Fg.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function cv(e){if("undefined"===typeof atob)throw t="base-64",new Ug(Fg.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const uv="raw",dv="base64",hv="base64url",fv="data_url";class pv{constructor(e,t){this.data=e,this.contentType=t||null}}function mv(e,t){switch(e){case uv:return new pv(gv(t));case dv:case hv:return new pv(vv(e,t));case fv:return new pv(function(e){const t=new yv(e);return t.base64?vv(dv,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Iy){throw Kg(fv,"Malformed data URL.")}return gv(t)}(t.rest)}(t),new yv(t).contentType)}throw zg()}function gv(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function vv(e,t){switch(e){case dv:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Kg(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case hv:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Kg(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cv(t)}catch(Iy){if(Iy.message.includes("polyfill"))throw Iy;throw Kg(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class yv{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Kg(fv,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class bv{constructor(e,t){let n=0,r="";Zg(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Zg(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new bv(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new bv(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(ev()){const e=t.map((e=>e instanceof bv?e.data_:e));return new bv(lv.apply(null,e))}{const e=t.map((e=>Jg(e)?mv(uv,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new bv(r,!0)}}uploadData(){return this.data_}}function wv(e){let t;try{t=JSON.parse(e)}catch(Iy){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function xv(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Sv(e,t){return t}class kv{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Sv}}let Cv=null;function Ev(){if(Cv)return Cv;const e=[];e.push(new kv("bucket")),e.push(new kv("generation")),e.push(new kv("metageneration")),e.push(new kv("name","fullPath",!0));const t=new kv("name");t.xform=function(e,t){return function(e){return!Jg(e)||e.length<2?e:xv(e)}(t)},e.push(t);const n=new kv("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new kv("timeCreated")),e.push(new kv("updated")),e.push(new kv("md5Hash",null,!0)),e.push(new kv("cacheControl",null,!0)),e.push(new kv("contentDisposition",null,!0)),e.push(new kv("contentEncoding",null,!0)),e.push(new kv("contentLanguage",null,!0)),e.push(new kv("contentType",null,!0)),e.push(new kv("metadata","customMetadata",!0)),Cv=e,Cv}function _v(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Xg(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Nv(e,t,n){const r=wv(t);if(null===r)return null;return _v(e,r,n)}function Iv(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Tv{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Av(e){if(!e)throw zg()}function jv(e,t){return function(n,r){const i=Nv(e,r,t);return Av(null!==i),i}}function Pv(e,t){return function(n,r){const i=Nv(e,r,t);return Av(null!==i),function(e,t,n,r){const i=wv(t);if(null===i)return null;if(!Jg(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return nv("/b/"+a(i)+"/o/"+a(s),n,r)+rv({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Dv(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Ug(Fg.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ug(Fg.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Ug(Fg.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Ug(Fg.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Rv(e){const t=Dv(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Ug(Fg.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Ov(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Lv(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=Ov(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Iv(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=bv.getBlob(c,r,u);if(null===d)throw Hg();const h={name:l.fullPath},f=nv(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Tv(f,"POST",jv(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=Dv(t),m}class Mv{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bg.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Bg.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Bg.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Qg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Iy){return-1}}getResponse(){if(!this.sent_)throw Qg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Uv extends Mv{initXhr(){this.xhr_.responseType="text"}}function Fv(){return new Uv}class Bv{constructor(e,t){this._service=e,this._location=t instanceof Xg?t:Xg.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bv(e,t)}get root(){const e=new Xg(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xv(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Xg(this._location.bucket,e);return new Bv(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Ug(Fg.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Vv(e,t,n){e._throwIfRoot("uploadBytes");const r=Lv(e.storage,e._location,Ev(),new bv(t,!0),n);return e.storage.makeRequestWithTokens(r,Fv).then((t=>({metadata:t,ref:e})))}function zv(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=nv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Tv(r,"GET",Pv(e,n),i);return s.errorHandler=Rv(t),s}(e.storage,e._location,Ev());return e.storage.makeRequestWithTokens(t,Fv).then((e=>{if(null===e)throw new Ug(Fg.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function $v(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=nv(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Tv(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Rv(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Fv)}function qv(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Xg(e._location.bucket,n);return new Bv(e.storage,r)}function Hv(e,t){if(e instanceof Kv){const n=e;if(null==n._bucket)throw new Ug(Fg.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Mg+"' property when initializing the app?");const r=new Bv(n,n._bucket);return null!=t?Hv(r,t):r}return void 0!==t?qv(e,t):e}function Wv(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Kv)return new Bv(e,t);throw Wg("To use ref(service, url), the first argument must be a Storage instance.")}return Hv(e,t)}function Gv(e,t){const n=null===t||void 0===t?void 0:t[Mg];return null==n?null:Xg.makeFromBucketSpec(n,e)}class Kv{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Lg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Xg.makeFromBucketSpec(r,this._host):Gv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Xg.makeFromBucketSpec(this._url,e):this._bucket=Gv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bv(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Yg(Gg());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=rv(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new sv(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Qv="@firebase/storage",Xv="0.13.7",Yv="storage";function Jv(e,t,n){return Vv(e=rt(e),t,n)}function Zv(e){return zv(e=rt(e))}function ey(e){return $v(e=rt(e))}function ty(e,t){return Wv(e=rt(e),t)}function ny(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn(),t=arguments.length>1?arguments[1]:void 0;e=rt(e);const n=mn(e,Yv).getImmediate({identifier:t}),r=Fe("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:$e(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function ry(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Kv(r,i,s,n,bn)}pn(new it(Yv,ry,"PUBLIC").setMultipleInstances(!0)),Sn(Qv,Xv,""),Sn(Qv,Xv,"esm2017");const iy=wn({apiKey:"AIzaSyAFntOsnimhiBnCJAF6AsflDHmBhWhraoc",authDomain:"oceanic-vr-dive.firebaseapp.com",projectId:"oceanic-vr-dive",storageBucket:"oceanic-vr-dive.firebasestorage.app",messagingSenderId:"907684558679",appId:"1:907684558679:web:d46079730c3dfaa4d3f012",measurementId:"G-HKZP6HF4DZ"}),sy=ca(iy),ay=hm(iy),oy=(ny(iy),e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)}),ly=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()};var cy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const uy=(0,t.forwardRef)(((e,n)=>{let{color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:c,...u}=e;return(0,t.createElement)("svg",{ref:n,...cy,width:i,height:i,stroke:r,strokeWidth:a?24*Number(s)/Number(i):s,className:ly("lucide",o),...u},[...c.map((e=>{let[n,r]=e;return(0,t.createElement)(n,r)})),...Array.isArray(l)?l:[l]])})),dy=((e,n)=>{const r=(0,t.forwardRef)(((r,i)=>{let{className:s,...a}=r;return(0,t.createElement)(uy,{ref:i,iconNode:n,className:ly(`lucide-${o=oy(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...a});var o}));return r.displayName=oy(e),r})("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);function hy(){const{user:e}=(0,t.useContext)(Dg),[n,r]=(0,t.useState)([]),[i,s]=(0,t.useState)(!1),[a,o]=(0,t.useState)(!1),l=ee();(0,t.useEffect)((()=>{if(!e)return;const t=Cg(eg(sm(ay,"notifications"),ng("recipientUid","==",e.uid),ng("isRead","==",!1),sg("timestamp","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));t.length>0&&(r(t),o(!0),c())}));return()=>t()}),[e]);const c=()=>{new Audio("/sounds/dingdong.mp3").play()};return(0,Pg.jsxs)("div",{className:"relative",children:[(0,Pg.jsxs)("button",{onClick:()=>{s(!i),o(!1)},className:"relative",children:[(0,Pg.jsx)(dy,{className:"w-6 h-6 text-white"}),a&&(0,Pg.jsx)("span",{className:"animate-ping absolute -top-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]}),i&&(0,Pg.jsx)("div",{className:"absolute right-0 mt-2 w-80 bg-white shadow-lg rounded-lg z-50 max-h-96 overflow-auto",children:0===n.length?(0,Pg.jsx)("div",{className:"p-4 text-sm text-gray-500",children:"\uc54c\ub9bc\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):n.map((e=>(0,Pg.jsxs)("div",{onClick:()=>(async e=>{const t="free"===e.boardType?`/community/free/detail/${e.postId}`:`/gallery/detail/${e.postId}`;await xg(am(ay,"notifications",e.id),{isRead:!0}),l(t)})(e),className:"p-3 text-sm border-b hover:bg-gray-100 cursor-pointer",children:[(0,Pg.jsx)("div",{className:"font-medium text-blue-600",children:e.postTitle}),(0,Pg.jsx)("div",{className:"text-gray-600 truncate",children:e.commentSnippet})]},e.id)))})]})}function fy(){const{user:e,userData:n}=(0,t.useContext)(Dg),r=ee(),[i,s]=(0,t.useState)(!1),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)({visible:!1,x:0,y:0}),h=()=>{u.visible&&d({visible:!1,x:0,y:0})};return(0,t.useEffect)((()=>(window.addEventListener("click",h),()=>window.removeEventListener("click",h)))),(0,Pg.jsxs)("nav",{className:"bg-white shadow-md px-6 py-4 flex justify-between items-center relative",children:[(0,Pg.jsxs)(Ie,{to:"/",className:"text-2xl font-bold text-sky-600 flex items-center gap-2",children:[(0,Pg.jsx)("img",{src:"/images/logo.png",alt:"Oceanic VR Dive Logo",className:"h-12"}),(0,Pg.jsx)("span",{className:"text-3xl font-extrabold text-sky-600",children:"OCEANIC VR DIVE"})]}),(0,Pg.jsxs)("div",{className:"flex gap-6 text-sm font-medium items-center",children:[(0,Pg.jsxs)("div",{className:"relative",onMouseEnter:()=>{clearTimeout(l),s(!0)},onMouseLeave:()=>{const e=setTimeout((()=>s(!1)),200);c(e)},children:[(0,Pg.jsx)("span",{className:"hover:text-sky-500 text-gray-700 cursor-pointer",children:"Community"}),i&&(0,Pg.jsxs)("div",{className:"absolute left-0 top-full mt-2 bg-white shadow-lg rounded-md w-48 z-50",children:[(0,Pg.jsx)(Ie,{to:"/community/free",className:"block px-4 py-2 text-gray-700 hover:bg-sky-100",children:"\uc790\uc720\uac8c\uc2dc\ud310"}),(0,Pg.jsx)(Ie,{to:"/community/tour",className:"block px-4 py-2 text-gray-700 hover:bg-sky-100",children:"\ud22c\uc5b4\uc2e0\uccad"}),(0,Pg.jsx)(Ie,{to:"/community/qna",className:"block px-4 py-2 text-gray-700 hover:bg-sky-100",children:"Q & A"})]})]}),e?(0,Pg.jsx)(Ie,{to:"/gallery",className:"hover:text-sky-500 text-gray-700",children:"Gallery"}):(0,Pg.jsx)("span",{className:"text-gray-400 cursor-not-allowed",title:"\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4",children:"Gallery"}),e?(0,Pg.jsx)(Ie,{to:"/tour-videos",className:"hover:text-sky-500 text-gray-700",children:"Tour Videos"}):(0,Pg.jsx)("span",{className:"text-gray-400 cursor-not-allowed",title:"\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4",children:"Tour Videos"}),e?(0,Pg.jsx)(Ie,{to:"/DiveGear",className:"hover:text-sky-500 text-gray-700",children:"Dive Gears"}):(0,Pg.jsx)("span",{className:"text-gray-400 cursor-not-allowed",title:"\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4",children:"Dive Gears"}),(0,Pg.jsxs)("div",{className:"relative",onMouseEnter:()=>{clearTimeout(l),o(!0)},onMouseLeave:()=>{const e=setTimeout((()=>o(!1)),200);c(e)},children:[(0,Pg.jsx)("span",{className:"hover:text-sky-500 text-gray-700 cursor-pointer",children:"Shopping Mall"}),a&&(0,Pg.jsxs)("div",{className:"absolute left-0 top-full mt-2 bg-white shadow-lg rounded-md w-48 z-50",children:[(0,Pg.jsx)(Ie,{to:"/shop/gear",className:"block px-4 py-2 text-gray-700 hover:bg-sky-100",children:"Dive Gear"}),(0,Pg.jsx)(Ie,{to:"/shop/figure",className:"block px-4 py-2 text-gray-700 hover:bg-sky-100",children:"Figure"}),(0,Pg.jsx)(Ie,{to:"/shop/etc",className:"block px-4 py-2 text-gray-700 hover:bg-sky-100",children:"\uae30\ud0c0"})]})]}),e?(0,Pg.jsx)(Ie,{to:"/points",className:"hover:text-sky-500 text-gray-700",children:"Dive Point"}):(0,Pg.jsx)("span",{className:"text-gray-400 cursor-not-allowed",title:"\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4",children:"Dive Point"}),e?(0,Pg.jsx)(Ie,{to:"/instructor",className:"hover:text-sky-500 text-gray-700",children:"Instructor"}):(0,Pg.jsx)("span",{className:"text-gray-400 cursor-not-allowed",title:"\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4",children:"Instructor"}),e&&(0,Pg.jsxs)(Pg.Fragment,{children:[(0,Pg.jsx)(hy,{}),(0,Pg.jsxs)("span",{onContextMenu:e=>{e.preventDefault(),d({visible:!0,x:e.pageX,y:e.pageY})},className:"text-gray-500 hidden sm:inline hover:underline cursor-pointer",title:"\uc6b0\ud074\ub9ad\uc73c\ub85c \uba54\ub274 \uc5f4\uae30",children:[(null===n||void 0===n?void 0:n.level)&&{OpenWater:"\ud83d\udc20",Advance:"\ud83d\udc2c",Rescue:"\ud83d\udedf",DiveMaster:"\ud83e\udded",Instructor:"\ud83c\udf93",Trainer:"\ud83d\udc51","\uc77c\ubc18":"\ud83d\udc64"}[n.level]," ",(null===n||void 0===n?void 0:n.nickname)||e.email]}),(0,Pg.jsx)("button",{onClick:async()=>{await zi(sy),r("/login")},className:"text-red-500 hover:underline",children:"Logout"})]}),!e&&(0,Pg.jsxs)(Pg.Fragment,{children:[(0,Pg.jsx)(Ie,{to:"/login",className:"hover:text-sky-500",children:"\ub85c\uadf8\uc778\ud558\ub7ec \uac00\uae30"}),(0,Pg.jsx)(Ie,{to:"/signup",className:"hover:text-sky-500",children:"\ud68c\uc6d0\uac00\uc785"})]})]}),u.visible&&(0,Pg.jsx)("div",{className:"absolute bg-white border rounded shadow-md text-sm z-50",style:{top:u.y,left:u.x},children:(0,Pg.jsx)("button",{onClick:()=>r("/profile/edit"),className:"block px-4 py-2 text-left w-full hover:bg-sky-100",children:"\ud83d\udc64 \ud68c\uc6d0\uc815\ubcf4 \uc218\uc815"})})]})}function py(e){let{children:n}=e;const{user:r,loading:i}=(0,t.useContext)(Dg);return i?(0,Pg.jsx)("div",{className:"text-center mt-20 text-gray-500 text-sm",children:"\u23f3 \ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778 \uc911..."}):r?r.emailVerified?n:(0,Pg.jsxs)("div",{className:"text-center mt-20 text-red-500 text-lg",children:["\uc774 \ud398\uc774\uc9c0\ub294 ",(0,Pg.jsx)("strong",{children:"\uc774\uba54\uc77c \uc778\uc99d\uc744 \uc644\ub8cc\ud55c \uc0ac\uc6a9\uc790"}),"\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}):(0,Pg.jsx)(ge,{to:"/login",replace:!0})}function my(e){let{children:n}=e;const{user:r,userData:i,loading:s}=(0,t.useContext)(Dg),a=J();return s?(0,Pg.jsx)("div",{className:"text-center mt-20 text-gray-500 text-sm",children:"\u23f3 \ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778 \uc911..."}):r?null!==i&&void 0!==i&&i.admin?n:(0,Pg.jsxs)("div",{className:"text-center mt-20 text-red-500 text-lg",children:["\uc774 \ud398\uc774\uc9c0\ub294 ",(0,Pg.jsx)("strong",{children:"\uad00\ub9ac\uc790 \uc804\uc6a9"}),"\uc785\ub2c8\ub2e4. \uc811\uadfc \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]}):(0,Pg.jsx)(ge,{to:"/login",state:{from:a},replace:!0})}function gy(e){let{children:n}=e;const{user:r,userData:i,loading:s}=(0,t.useContext)(Dg);return s?(0,Pg.jsx)("div",{className:"text-center mt-20 text-gray-500",children:"\u23f3 \ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778 \uc911..."}):r?"Instructor"!==(null===i||void 0===i?void 0:i.level)&&"Trainer"!==(null===i||void 0===i?void 0:i.level)?(0,Pg.jsxs)("div",{className:"text-center mt-20 text-red-500 text-lg",children:["\uc774 \ud398\uc774\uc9c0\ub294 ",(0,Pg.jsx)("strong",{children:"Instructor \ub610\ub294 Trainer \ub4f1\uae09"}),"\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}):n:(0,Pg.jsx)(ge,{to:"/login",replace:!0})}var vy=n(929),yy=n.n(vy);function by(){const e=hm(),[n,r]=(0,t.useState)([]),[i,s]=(0,t.useState)(!0),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),u=async()=>{const t=eg(sm(e,"users"),ng("isLoggedIn","==",!0),sg("lastLogin","desc"),function(e){return Yp("limit",e),ag._create("limit",e,"F")}(10)),n=await bg(t);r(n.docs.map((e=>({id:e.id,...e.data()}))))};(0,t.useEffect)((()=>{u();const e=setInterval((()=>u()),1e4);return()=>clearInterval(e)}),[]);const d=e=>{try{return e.toDate().toLocaleString()}catch{return"-"}};return(0,Pg.jsxs)(Pg.Fragment,{children:[(0,Pg.jsx)(yy(),{children:(0,Pg.jsxs)("div",{className:"fixed top-40 left-6 z-50 w-64 bg-white border border-gray-300 shadow-lg rounded-lg cursor-move",children:[(0,Pg.jsxs)("div",{className:"flex justify-between items-center px-3 py-2 border-b bg-gray-50",children:[(0,Pg.jsxs)("h3",{className:"text-sm font-semibold text-gray-700",children:["\ud83d\udc65 \uc811\uc18d\uc790 ",(0,Pg.jsx)("span",{className:"text-blue-600",children:n.length}),"\uba85"]}),(0,Pg.jsx)("button",{onClick:()=>s(!i),className:"text-xs text-gray-500 hover:text-gray-700",children:i?"\u23f6 \uc811\uae30":"\u23f7 \ud3bc\uce58\uae30"})]}),i&&(0,Pg.jsx)("div",{className:"max-h-64 overflow-y-auto p-3",children:0===n.length?(0,Pg.jsx)("p",{className:"text-xs text-gray-500",children:"\ud604\uc7ac \uc811\uc18d \uc911\uc778 \uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,Pg.jsx)("ul",{className:"space-y-1 text-sm text-gray-800",children:n.map((t=>(0,Pg.jsxs)("li",{onClick:()=>(async t=>{const n=am(e,"users",t),r=await vg(n);r.exists()&&(c(r.data()),o(t))})(t.id),className:"flex justify-between items-center gap-2 cursor-pointer hover:text-blue-600",children:[(0,Pg.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Pg.jsx)("span",{className:"text-green-500",children:"\u25cf"}),(0,Pg.jsx)("span",{children:t.levelIcon||"\ud83d\udc64"}),(0,Pg.jsx)("span",{children:t.nickname||t.email})]}),(0,Pg.jsx)("div",{className:"text-[10px] text-gray-400",children:d(t.lastLogin)})]},t.id)))})})]})}),l&&a&&(0,Pg.jsx)("div",{id:"user-profile-overlay",onClick:e=>{"user-profile-overlay"===e.target.id&&o(null)},className:"fixed inset-0 z-40 bg-black/0",children:(0,Pg.jsxs)("div",{className:"absolute left-4 bottom-80 w-72 bg-white border border-gray-300 rounded shadow-lg p-4 text-sm z-50",children:[(0,Pg.jsxs)("div",{className:"text-lg font-bold text-gray-800 mb-2",children:["\ud83d\udc64 ",l.nickname]}),(0,Pg.jsxs)("div",{className:"text-gray-700 mb-1",children:["\ub4f1\uae09: ",l.levelIcon||"\uc77c\ubc18"," (",l.level,")"]}),(0,Pg.jsxs)("div",{className:"text-gray-700 mb-2",children:["\uc18c\uc18d \uae30\uad00: ",l.agency||"-"]}),(0,Pg.jsxs)("div",{className:"text-xs text-gray-500",children:["\ub9c8\uc9c0\ub9c9 \uc811\uc18d: ",d(l.lastLogin)]})]})})]})}function wy(){return(0,Pg.jsx)("footer",{className:"bg-gray-100 border-t mt-16 py-6 text-sm text-gray-600",children:(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto px-4 flex flex-col md:flex-row justify-between gap-4",children:[(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("p",{className:"font-semibold text-gray-800",children:"\xa9 2025 Oceanic VR Dive"}),(0,Pg.jsx)("p",{children:"All rights reserved."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("p",{children:"\uc6b4\uc601\uc790: JAYMSTUDIO"}),(0,Pg.jsx)("p",{children:"Email: ykjm0611@gmail.com"})]}),(0,Pg.jsx)("div",{children:(0,Pg.jsxs)("p",{children:[(0,Pg.jsx)("a",{href:"/terms",className:"hover:underline",children:"\uc774\uc6a9\uc57d\uad00"})," |"," ",(0,Pg.jsx)("a",{href:"/privacy",className:"hover:underline",children:"\uac1c\uc778\uc815\ubcf4\ucc98\ub9ac\ubc29\uce68"})]})})]})})}function xy(){const{user:e,userData:n,loading:r}=(0,t.useContext)(Dg),[i,s]=(0,t.useState)(0),a=hm();return(0,t.useEffect)((()=>{if(r)return;(async()=>{try{const e=am(a,"stats","siteStats");if((await vg(e)).exists()){await xg(e,{visitorCount:jg(1)});const t=await vg(e);s(t.data().visitorCount||0)}else await xg(e,{visitorCount:1}),s(1)}catch(e){console.error("\ud83d\udd25 \ubc29\ubb38\uc790\uc218 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",e)}})()}),[a,r]),(0,Pg.jsxs)(Pg.Fragment,{children:[(0,Pg.jsx)(by,{}),(0,Pg.jsxs)("div",{className:"relative",children:[(0,Pg.jsx)("div",{className:"flex justify-end items-center p-4",children:(null===n||void 0===n?void 0:n.admin)&&(0,Pg.jsx)(Ie,{to:"/admin/dashboard",className:"ml-4 bg-yellow-400 text-white px-4 py-2 rounded hover:bg-yellow-500 text-sm font-semibold",children:"\uad00\ub9ac\uc790 \ub300\uc2dc\ubcf4\ub4dc"})}),(0,Pg.jsx)("div",{className:"h-screen bg-no-repeat bg-top bg-cover bg-fixed relative",style:{backgroundImage:"url('/main-hero-vr.png')"},children:(0,Pg.jsxs)("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-white/80 px-6 py-5 rounded-xl shadow-xl text-center max-w-xl",children:[(0,Pg.jsx)("h1",{className:"text-4xl font-bold text-sky-700 mb-2",children:"OCEANIC VR DIVE"}),(0,Pg.jsx)("p",{className:"text-gray-800 text-lg mb-1",children:"\ud83c\udf0a \ub2f9\uc2e0\uc758 \uccab \ubc88\uc9f8 \uc228\uacb0\uc744 \ubc14\ub2e4\uc5d0 \ub9e1\uae30\uc138\uc694"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-sm",children:"\ub204\uad6c\ub098 \uc548\uc804\ud558\uac8c, \uc790\uc720\ub86d\uac8c, \uadf8\ub9ac\uace0 \uac10\ub3d9\uacfc \ud568\uaed8 \ubc14\ub2e4\ub97c \ub9cc\ub098\ub294 \uc0c8\ub85c\uc6b4 \uae38\uc744 \uc5fd\ub2c8\ub2e4."}),!e&&(0,Pg.jsx)(Ie,{to:"/login",className:"mt-4 inline-block bg-sky-500 text-white px-4 py-2 rounded hover:bg-sky-600 transition",children:"\ub85c\uadf8\uc778\ud558\ub7ec \uac00\uae30"})]})}),(0,Pg.jsxs)("div",{className:"pt-20 pb-12 px-4 text-center max-w-3xl mx-auto",children:[(0,Pg.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-sky-800",children:"\u2728 \ub204\uad6c\ub098 \ubc14\ub2e4\ub97c \ub204\ub9b4 \uad8c\ub9ac\uac00 \uc788\ub2e4"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-lg mb-6 leading-relaxed",children:"OCEANIC VR DIVE\ub294 VR \uae30\uc220\uacfc \uc218\uc911 \uc138\uc0c1\uc744 \uacb0\ud569\ud574, \ubaa8\ub4e0 \uc774\uc5d0\uac8c \uacbd\uc774\ub85c\uc6b4 \ud574\uc591 \ud0d0\ud5d8\uc744 \uac00\ub2a5\ucf00 \ud569\ub2c8\ub2e4."}),(0,Pg.jsx)("p",{className:"text-gray-700 text-base mb-6 leading-relaxed",children:"\uc7a5\uc560\uac00 \uc544\ub2cc \uac00\ub2a5\uc131\uc744 \ud5a5\ud574. Oceanic VR Dive\ub294 \ub204\uad6c\ub098 \ubc14\ub2e4\ub97c \uacbd\ud5d8\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uacc4\ub41c \uc0c8\ub85c\uc6b4 \ucc28\uc6d0\uc758 \uc2a4\ucfe0\ubc84 \uccb4\ud5d8 \ud50c\ub7ab\ud3fc\uc785\ub2c8\ub2e4."}),(0,Pg.jsx)("p",{className:"text-gray-700 italic mb-6",children:"\u201c\uac00\uc0c1\ud604\uc2e4\ub85c \ub9cc\ub098\ub294 \ub2f9\uc2e0\uc758 \uccab \ubc14\ub2e4\u201d"}),(0,Pg.jsx)("p",{className:"text-gray-700 italic",children:"\u201c\ubb3c\uc18d \uadf8 \ub108\uba38, \ub2f9\uc2e0\uc758 \uc138\uacc4\uac00 \uc5f4\ub9b0\ub2e4\u201d"}),(0,Pg.jsx)("p",{className:"text-sm text-gray-400 mt-8",children:"(\ud604\uc7ac BETA 1.41 \uc6b4\uc601\uc911\uc785\ub2c8\ub2e4. \ubaa8\ubc14\uc77c \ubc84\uc804\uc740 \uc870\ub9cc\uac04 \uad6c\ucd95 \uc608\uc815\uc785\ub2c8\ub2e4.)"})]}),(0,Pg.jsx)(wy,{})]})]})}function Sy(){var e,n;const[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(""),f=ee(),p=(null===(e=J().state)||void 0===e||null===(n=e.from)||void 0===n?void 0:n.pathname)||"/";(0,t.useEffect)((()=>{if(d){const e=setTimeout((()=>{f(p)}),2e3);return()=>clearTimeout(e)}}),[d,f,p]);return(0,Pg.jsxs)("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow",children:[(0,Pg.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"\ub85c\uadf8\uc778"}),d&&(0,Pg.jsx)("p",{className:"text-green-600 text-sm mb-2 text-center",children:d}),(0,Pg.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(""),u(!1),h("");try{const e=await Fi(sy,r,s);if(!e.user.emailVerified)return await zi(sy),l("\uc774\uba54\uc77c \uc778\uc99d\uc774 \uc644\ub8cc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uc544\ub798 \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc778\uc99d \uba54\uc77c\uc744 \ub2e4\uc2dc \ubc1b\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),void u(!0);h("Oceanic VR Dive\uc5d0 \uc624\uc2e0 \uac83\uc744 \ud658\uc601\ud569\ub2c8\ub2e4.")}catch(t){l("\ub85c\uadf8\uc778 \uc2e4\ud328. \uc774\uba54\uc77c \ub610\ub294 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud558\uc138\uc694.")}},className:"space-y-4",children:[(0,Pg.jsx)("input",{type:"email",placeholder:"\uc774\uba54\uc77c",value:r,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"password",placeholder:"\ube44\ubc00\ubc88\ud638",value:s,onChange:e=>a(e.target.value),className:"w-full p-2 border rounded",required:!0}),o&&(0,Pg.jsx)("p",{className:"text-red-500 text-sm",children:o}),(0,Pg.jsx)("button",{type:"submit",className:"w-full bg-sky-500 text-white py-2 rounded",children:"\ub85c\uadf8\uc778"})]}),c&&(0,Pg.jsx)("div",{className:"mt-4 text-center",children:(0,Pg.jsx)("button",{onClick:async()=>{try{const e=(await Fi(sy,r,s)).user;e.emailVerified||(await Bi(e),await zi(sy),h("\uc778\uc99d \uc774\uba54\uc77c\uc774 \uc7ac\uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uba54\uc77c\ud568\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."))}catch(e){l("\uc778\uc99d \uba54\uc77c \uc7ac\uc804\uc1a1 \uc2e4\ud328: "+e.message)}},className:"text-sm text-blue-500 hover:underline",children:"\uc778\uc99d \uba54\uc77c \ub2e4\uc2dc \ubcf4\ub0b4\uae30"})})]})}function ky(){const[e,n]=(0,t.useState)({name:"",nickname:"",email:"",password:"",confirmPassword:"",phone:"",birthdate:"",agency:"PADI",level:"OpenWater",zipcode:"",address:"",detailAddress:""}),[r,i]=(0,t.useState)(null),[s,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),m=ee(),g=hm();(0,t.useEffect)((()=>{const e=document.createElement("script");e.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",e.async=!0,document.body.appendChild(e)}),[]);const v=e=>{const t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).{8,}$/.test(e);return p(t?"":"\ube44\ubc00\ubc88\ud638\ub294 \uc601\ubb38 \ub300\uc18c\ubb38\uc790, \uc22b\uc790, \ud2b9\uc218\ubb38\uc790\ub97c \ud3ec\ud568\ud574 8\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."),t};(0,t.useEffect)((()=>{const t=e.name.trim()&&e.nickname.trim()&&!0===r&&e.email.trim()&&e.password&&e.confirmPassword&&13===e.phone.length&&e.birthdate&&e.detailAddress.trim()&&s&&e.password===e.confirmPassword&&v(e.password);l(t)}),[e,s,r]);const y=e=>{const{name:t,value:r}=e.target;if("phone"===t){let e=r.replace(/[^0-9]/g,"").slice(0,11);return e.length>=4&&e.length<8?e=`${e.slice(0,3)}-${e.slice(3)}`:e.length>=8&&(e=`${e.slice(0,3)}-${e.slice(3,7)}-${e.slice(7)}`),void n((t=>({...t,phone:e})))}n((e=>({...e,[t]:r}))),"password"===t&&v(r)};return(0,Pg.jsxs)("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-xl shadow-md",children:[(0,Pg.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"\ud68c\uc6d0\uac00\uc785"}),c&&(0,Pg.jsx)("div",{className:"mb-4 text-sm text-green-600 text-center",children:c}),d&&(0,Pg.jsx)("div",{className:"mb-4 text-sm text-red-600 text-center",children:d}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),o)try{const t=await async function(e,t,n){if(gn(e.app))return Promise.reject(zn(e));const r=Kr(e),i=ii(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ni,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ui(e),t})),a=await Ii._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(sy,e.email,e.password),n=t.user;await Bi(n),await wg(am(g,"users",n.uid),{name:e.name,nickname:e.nickname,email:e.email,phone:e.phone,birthdate:e.birthdate,agency:e.agency,level:e.level,zipcode:e.zipcode,address:e.address,detailAddress:e.detailAddress,createdAt:Ig(),admin:!1}),u("\uac00\uc785\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc774\uba54\uc77c \uc778\uc99d\uc744 \uc9c4\ud589\ud574\uc8fc\uc138\uc694!"),setTimeout((()=>m("/login")),3e3)}catch(n){console.error(n),"auth/email-already-in-use"===n.code?h("\uc774\ubbf8 \uac00\uc785\ub41c \uc774\uba54\uc77c\uc785\ub2c8\ub2e4."):h(n.message)}},className:"space-y-4",children:[(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\uc774\ub984"}),(0,Pg.jsx)("input",{name:"name",value:e.name,onChange:y,className:"w-full mt-1 p-2 border rounded",required:!0})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\ub2c9\ub124\uc784"}),(0,Pg.jsxs)("div",{className:"flex gap-2",children:[(0,Pg.jsx)("input",{name:"nickname",value:e.nickname,onChange:y,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("button",{type:"button",onClick:async()=>{if(!e.nickname.trim())return;const t=(await bg(sm(g,"users"))).docs.some((t=>t.data().nickname===e.nickname));i(!t)},className:"px-3 bg-gray-200 hover:bg-gray-300 rounded",children:"\uc911\ubcf5\ud655\uc778"})]}),!1===r&&(0,Pg.jsx)("p",{className:"text-xs text-red-500",children:"\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \ub2c9\ub124\uc784\uc785\ub2c8\ub2e4."}),!0===r&&(0,Pg.jsx)("p",{className:"text-xs text-green-500",children:"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ub2c9\ub124\uc784\uc785\ub2c8\ub2e4."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\uc774\uba54\uc77c"}),(0,Pg.jsx)("input",{name:"email",type:"email",value:e.email,onChange:y,className:"w-full mt-1 p-2 border rounded",required:!0})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\ube44\ubc00\ubc88\ud638"}),(0,Pg.jsx)("input",{name:"password",type:"password",value:e.password,onChange:y,className:"w-full mt-1 p-2 border rounded",required:!0}),f&&(0,Pg.jsx)("p",{className:"text-xs text-red-500",children:f})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,Pg.jsx)("input",{name:"confirmPassword",type:"password",value:e.confirmPassword,onChange:y,className:"w-full mt-1 p-2 border rounded",required:!0}),e.confirmPassword&&e.password!==e.confirmPassword&&(0,Pg.jsx)("p",{className:"text-xs text-red-500",children:"\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\uc6b0\ud3b8\ubc88\ud638"}),(0,Pg.jsxs)("div",{className:"flex gap-2",children:[(0,Pg.jsx)("input",{name:"zipcode",value:e.zipcode,onChange:y,className:"w-full p-2 border rounded",readOnly:!0}),(0,Pg.jsx)("button",{type:"button",onClick:()=>{new window.daum.Postcode({oncomplete:function(e){n((t=>({...t,zipcode:e.zonecode,address:e.roadAddress})))}}).open()},className:"px-3 bg-gray-200 hover:bg-gray-300 rounded",children:"\uc8fc\uc18c\uac80\uc0c9"})]})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\uae30\ubcf8 \uc8fc\uc18c"}),(0,Pg.jsx)("input",{name:"address",value:e.address,onChange:y,className:"w-full mt-1 p-2 border rounded",readOnly:!0})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\uc0c1\uc138 \uc8fc\uc18c"}),(0,Pg.jsx)("input",{name:"detailAddress",value:e.detailAddress,onChange:y,className:"w-full mt-1 p-2 border rounded",required:!0})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\uc5f0\ub77d\ucc98"}),(0,Pg.jsx)("input",{name:"phone",value:e.phone,onChange:y,className:"w-full mt-1 p-2 border rounded",placeholder:"010-0000-0000",required:!0}),13!==e.phone.length&&(0,Pg.jsx)("p",{className:"text-xs text-red-500",children:"\uc5f0\ub77d\ucc98\ub97c \uc815\ud655\ud788 \uc785\ub825\ud574\uc8fc\uc138\uc694."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\uc0dd\ub144\uc6d4\uc77c"}),(0,Pg.jsx)("input",{name:"birthdate",type:"date",value:e.birthdate,onChange:y,className:"w-full mt-1 p-2 border rounded",required:!0})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\ub2e4\uc774\ube59 \ub2e8\uccb4"}),(0,Pg.jsxs)("select",{name:"agency",value:e.agency,onChange:y,className:"w-full mt-1 p-2 border rounded",children:[(0,Pg.jsx)("option",{value:"PADI",children:"PADI"}),(0,Pg.jsx)("option",{value:"SDI",children:"SDI"}),(0,Pg.jsx)("option",{value:"SSI",children:"SSI"}),(0,Pg.jsx)("option",{value:"NAUI",children:"NAUI"}),(0,Pg.jsx)("option",{value:"\uc77c\ubc18",children:"\ud83d\udc64 \uc77c\ubc18"})]})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\ub2e4\uc774\ube59 \ub808\ubca8"}),(0,Pg.jsxs)("select",{name:"level",value:e.level,onChange:y,disabled:"\uc77c\ubc18"===e.agency,className:"w-full mt-1 p-2 border rounded "+("\uc77c\ubc18"===e.agency?"bg-gray-100 cursor-not-allowed text-gray-500":""),children:[(0,Pg.jsx)("option",{value:"OpenWater",children:"\ud83c\udd5e Open Water"}),(0,Pg.jsx)("option",{value:"Advance",children:"\ud83c\udd50 Advance"}),(0,Pg.jsx)("option",{value:"Rescue",children:"\ud83c\udd61 Rescue"}),(0,Pg.jsx)("option",{value:"DiveMaster",children:"\ud83c\udd5c Dive Master"}),(0,Pg.jsx)("option",{value:"Instructor",children:"\ud83c\udd58 Instructor"}),(0,Pg.jsx)("option",{value:"Trainer",children:"\ud83c\udd63 Trainer"})]})]}),(0,Pg.jsxs)("div",{className:"flex items-center",children:[(0,Pg.jsx)("input",{type:"checkbox",id:"agree",checked:s,onChange:e=>a(e.target.checked),className:"mr-2"}),(0,Pg.jsx)("label",{htmlFor:"agree",className:"text-sm",children:"\uac1c\uc778\uc815\ubcf4 \uc218\uc9d1 \ubc0f \uc774\uc6a9\uc5d0 \ub3d9\uc758\ud569\ub2c8\ub2e4."})]}),(0,Pg.jsx)("button",{type:"submit",disabled:!o,className:"w-full text-white py-2 rounded "+(o?"bg-sky-500 hover:bg-sky-600":"bg-gray-300 cursor-not-allowed"),children:"\ud68c\uc6d0\uac00\uc785"})]})]})}function Cy(){const{user:e}=(0,t.useContext)(Dg),[n,r]=(0,t.useState)({name:"",nickname:"",phone:"",birthdate:"",agency:"PADI",level:"",logs:0,zipcode:"",address:"",detailAddress:""}),[i,s]=(0,t.useState)(null),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(""),[g,v]=(0,t.useState)(""),[y,b]=(0,t.useState)(!0),w=ee(),x=hm();(0,t.useEffect)((()=>{const e=document.createElement("script");e.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",e.async=!0,document.body.appendChild(e)}),[]);const S=e=>{switch(e){case"OpenWater":return"\ud83c\udd5e";case"Advance":return"\ud83c\udd50";case"Rescue":return"\ud83c\udd61";case"DiveMaster":return"\ud83c\udd5c";case"Instructor":return"\ud83c\udd58";case"Trainer":return"\ud83c\udd63";default:return"\ud83d\udc64"}};(0,t.useEffect)((()=>{if(!e)return;(async()=>{const t=am(x,"users",e.uid),n=await vg(t);if(n.exists()){const e=n.data();r({name:e.name||"",nickname:e.nickname||"",phone:e.phone||"",birthdate:e.birthdate||"",agency:e.agency||"PADI",level:e.level||"",logs:e.logs||0,zipcode:e.zipcode||"",address:e.address||"",detailAddress:e.detailAddress||""})}b(!1)})()}),[e]);const k=e=>{r({...n,[e.target.name]:e.target.value}),"nickname"===e.target.name&&s(null)};return y?(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ud68c\uc6d0\uc815\ubcf4 \ub85c\ub529 \uc911..."}):(0,Pg.jsxs)("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow space-y-6",children:[(0,Pg.jsx)("h2",{className:"text-2xl font-bold text-center",children:"\ud68c\uc6d0\uc815\ubcf4 \uc218\uc815"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!1!==i)try{const t=am(x,"users",e.uid);await xg(t,{name:n.name,nickname:n.nickname,phone:n.phone,birthdate:n.birthdate,agency:n.agency,level:n.level,levelIcon:S(n.level),logs:Number(n.logs),zipcode:n.zipcode,address:n.address,detailAddress:n.detailAddress}),c("\ud68c\uc6d0\uc815\ubcf4\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),setTimeout((()=>w("/")),2e3)}catch(r){console.error(r),c("\uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}else d("\ub2c9\ub124\uc784\uc774 \uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc785\ub2c8\ub2e4.")},className:"space-y-4",children:[(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\uc774\ub984"}),(0,Pg.jsx)("input",{name:"name",value:n.name,readOnly:!0,className:"w-full mt-1 p-2 border rounded bg-gray-100 text-gray-500"})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block text-sm font-medium",children:"\ub2c9\ub124\uc784"}),(0,Pg.jsxs)("div",{className:"flex gap-2",children:[(0,Pg.jsx)("input",{name:"nickname",value:n.nickname,onChange:k,className:"w-full p-2 border rounded"}),(0,Pg.jsx)("button",{type:"button",onClick:async()=>{if(!n.nickname.trim())return;o(!0);const t=eg(sm(x,"users"),ng("nickname","==",n.nickname)),r=(await bg(t)).docs.some((t=>t.id!==e.uid));s(!r),o(!1)},className:"px-3 bg-gray-200 hover:bg-gray-300 rounded",children:"\uc911\ubcf5\ud655\uc778"})]}),a&&(0,Pg.jsx)("p",{className:"text-sm text-gray-500",children:"\ud655\uc778 \uc911..."}),!0===i&&(0,Pg.jsx)("p",{className:"text-sm text-green-600",children:"\uc0ac\uc6a9 \uac00\ub2a5"}),!1===i&&(0,Pg.jsx)("p",{className:"text-sm text-red-500",children:"\uc774\ubbf8 \uc0ac\uc6a9 \uc911"})]}),(0,Pg.jsx)("input",{name:"phone",value:n.phone,onChange:k,className:"w-full p-2 border rounded",placeholder:"\uc5f0\ub77d\ucc98"}),(0,Pg.jsx)("input",{name:"birthdate",type:"date",value:n.birthdate,onChange:k,className:"w-full p-2 border rounded"}),(0,Pg.jsxs)("div",{className:"flex gap-2",children:[(0,Pg.jsx)("input",{name:"zipcode",value:n.zipcode,readOnly:!0,className:"w-full p-2 border rounded"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>{new window.daum.Postcode({oncomplete:function(e){r((t=>({...t,zipcode:e.zonecode,address:e.roadAddress})))}}).open()},className:"px-3 bg-gray-200 hover:bg-gray-300 rounded",children:"\uc8fc\uc18c \uac80\uc0c9"})]}),(0,Pg.jsx)("input",{name:"address",value:n.address,readOnly:!0,className:"w-full p-2 border rounded bg-gray-100"}),(0,Pg.jsx)("input",{name:"detailAddress",value:n.detailAddress,onChange:k,className:"w-full p-2 border rounded",placeholder:"\uc0c1\uc138\uc8fc\uc18c"}),(0,Pg.jsxs)("select",{name:"agency",value:n.agency,onChange:k,className:"w-full p-2 border rounded",children:[(0,Pg.jsx)("option",{value:"PADI",children:"PADI"}),(0,Pg.jsx)("option",{value:"SDI",children:"SDI"}),(0,Pg.jsx)("option",{value:"SSI",children:"SSI"}),(0,Pg.jsx)("option",{value:"NAUI",children:"NAUI"})]}),(0,Pg.jsxs)("select",{name:"level",value:n.level,onChange:k,className:"w-full p-2 border rounded",children:[(0,Pg.jsx)("option",{value:"OpenWater",children:"\ud83c\udd5e Open Water"}),(0,Pg.jsx)("option",{value:"Advance",children:"\ud83c\udd50 Advance"}),(0,Pg.jsx)("option",{value:"Rescue",children:"\ud83c\udd61 Rescue"}),(0,Pg.jsx)("option",{value:"DiveMaster",children:"\ud83c\udd5c Dive Master"}),(0,Pg.jsx)("option",{value:"Instructor",children:"\ud83c\udd58 Instructor"}),(0,Pg.jsx)("option",{value:"Trainer",children:"\ud83c\udd63 Trainer"}),(0,Pg.jsx)("option",{value:"\uc77c\ubc18",children:"\ud83d\udc64 \uc77c\ubc18"})]}),(0,Pg.jsx)("input",{type:"number",name:"logs",value:n.logs,onChange:k,className:"w-full p-2 border rounded",placeholder:"\ub85c\uadf8 \uc218"}),(0,Pg.jsx)("button",{type:"submit",className:"w-full bg-sky-500 hover:bg-sky-600 text-white py-2 rounded",children:"\uc218\uc815 \uc644\ub8cc"})]}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),p&&g){if((e=>{const t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).{8,}$/.test(e);return f(t?"":"\ube44\ubc00\ubc88\ud638\ub294 \uc601\ubb38 \ub300\uc18c\ubb38\uc790, \uc22b\uc790, \ud2b9\uc218\ubb38\uc790\ub97c \ud3ec\ud568\ud55c 8\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."),t})(g))try{const t=wi.credential(e.email,p);await Li(e,t),await function(e,t){return Vi(rt(e),null,t)}(e,g),c("\ube44\ubc00\ubc88\ud638\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),m(""),v("")}catch(n){console.error(n),d("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc2e4\ud328: "+n.message)}}else d("\ud604\uc7ac \ube44\ubc00\ubc88\ud638\uc640 \uc0c8 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},className:"space-y-4",children:[(0,Pg.jsx)("h3",{className:"text-lg font-semibold",children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"}),(0,Pg.jsx)("input",{type:"password",value:p,onChange:e=>m(e.target.value),className:"w-full p-2 border rounded",placeholder:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638"}),(0,Pg.jsx)("input",{type:"password",value:g,onChange:e=>v(e.target.value),className:"w-full p-2 border rounded",placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638"}),h&&(0,Pg.jsx)("p",{className:"text-sm text-red-500",children:h}),u&&(0,Pg.jsx)("p",{className:"text-red-500 text-sm",children:u}),l&&(0,Pg.jsx)("p",{className:"text-green-600 text-sm",children:l}),(0,Pg.jsx)("button",{type:"submit",className:"w-full bg-emerald-500 text-white py-2 rounded hover:bg-emerald-600",children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})]}),(0,Pg.jsx)("div",{className:"text-center mt-6",children:(0,Pg.jsx)("button",{onClick:async()=>{if(window.confirm("\uc815\ub9d0 \uacc4\uc815\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")&&e)try{await Sg(am(x,"users",e.uid)),await async function(e){return rt(e).delete()}(e),alert("\uacc4\uc815\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),w("/")}catch(t){console.error(t),alert("\uacc4\uc815 \uc0ad\uc81c \uc2e4\ud328: "+t.message)}},className:"text-sm text-red-600 underline hover:text-red-800",children:"\u26d4 \uacc4\uc815 \ud0c8\ud1f4\ud558\uae30"})})]})}function Ey(){const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(null),s=hm(),{userData:a,loading:o}=(0,t.useContext)(Dg);return(0,t.useEffect)((()=>{if(o)return;(async()=>{try{const e=am(s,"community","free","notice"),t=await vg(e);t.exists()&&i(t.data())}catch(e){console.error("\uacf5\uc9c0\uc0ac\ud56d \ub85c\ub529 \uc2e4\ud328:",e)}})()}),[s,o]),(0,t.useEffect)((()=>{if(o)return;const e=Cg(eg(sm(s,"community","free","posts"),sg("createdAt","desc")),(async e=>{try{const t=await Promise.all(e.docs.map((async e=>{const t=e.data(),n=await Ng(sm(s,"community","free","posts",e.id,"comments"));let r="\ud83d\udc64",i=t.author;if(t.authorUid)try{const e=am(s,"users",t.authorUid),n=await vg(e);if(n.exists()){const e=n.data();r=e.levelIcon||"\ud83d\udc64",i=e.nickname||t.author}}catch(a){console.error("\uc791\uc131\uc790 levelIcon \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328:",a)}return{id:e.id,...t,commentCount:n.data().count||0,levelIcon:r,nickname:i}})));n(t)}catch(t){console.error("\ud83d\udd25 \uac8c\uc2dc\uae00 \ub9ac\uc2a4\ud2b8 \ub85c\ub529 \uc2e4\ud328:",t)}}));return()=>e()}),[s,o]),(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto mt-6 px-4",children:[(0,Pg.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Pg.jsx)("h1",{className:"text-xl font-bold",children:"\ud83d\udce2 \uc790\uc720\uac8c\uc2dc\ud310"}),(0,Pg.jsxs)("div",{className:"flex gap-2",children:[(null===a||void 0===a?void 0:a.admin)&&(0,Pg.jsx)(Ie,{to:"/free/notice",className:"bg-yellow-400 text-white px-3 py-1.5 text-sm rounded hover:bg-yellow-500",children:"\uacf5\uc9c0 \uc791\uc131"}),(0,Pg.jsx)(Ie,{to:"/community/free/write",className:"bg-sky-500 text-white px-3 py-1.5 text-sm rounded hover:bg-sky-600",children:"\uc0c8 \uae00 \uc791\uc131"})]})]}),r&&(0,Pg.jsxs)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4 shadow-sm rounded",children:[(0,Pg.jsxs)("h3",{className:"text-sm font-bold text-yellow-800",children:["\ud83d\udce2 ",r.title]}),(0,Pg.jsx)("p",{className:"text-sm text-gray-700 mt-1 whitespace-pre-line",children:r.content})]}),(0,Pg.jsx)("div",{className:"overflow-x-auto",children:(0,Pg.jsxs)("table",{className:"min-w-full text-[0.95rem] leading-[1.8rem] text-center border border-gray-200",children:[(0,Pg.jsx)("thead",{className:"bg-gray-100 text-gray-700",children:(0,Pg.jsxs)("tr",{children:[(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\ubc88\ud638"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border text-left w-[45%]",children:"\uc81c\ubaa9"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-24",children:"\uc791\uc131\uc790"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-28",children:"\uc791\uc131\uc77c"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\ucd94\ucc9c"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\uc870\ud68c"})]})}),(0,Pg.jsx)("tbody",{children:e.map(((t,n)=>{var r,i;return(0,Pg.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:e.length-n}),(0,Pg.jsx)("td",{className:"py-2 px-2 border text-left truncate",children:(0,Pg.jsxs)(Ie,{to:`/community/free/${t.id}`,className:"text-black hover:underline",children:[t.title,(null===(r=t.images)||void 0===r?void 0:r.length)>0&&(0,Pg.jsx)("span",{className:"ml-1",children:"\ud83d\udcf7"}),t.commentCount>0&&(0,Pg.jsxs)("span",{className:"text-sky-600 font-semibold ml-1",children:["(",t.commentCount,")"]})]})}),(0,Pg.jsxs)("td",{className:"py-2 px-2 border truncate",children:[(0,Pg.jsx)("span",{className:"mr-1",children:t.levelIcon}),t.nickname||t.author]}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:null===(i=t.createdAt)||void 0===i?void 0:i.toDate().toLocaleDateString("ko-KR")}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.likes||0}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.views||0})]},t.id)}))})]})})]})}function _y(e,t){return new Promise((function(n,r){let i;return Ny(e).then((function(e){try{return i=e,n(new Blob([t.slice(0,2),i,t.slice(2)],{type:"image/jpeg"}))}catch(e){return r(e)}}),r)}))}const Ny=e=>new Promise(((t,n)=>{const r=new FileReader;r.addEventListener("load",(e=>{let{target:{result:r}}=e;const i=new DataView(r);let s=0;if(65496!==i.getUint16(s))return n("not a valid JPEG");for(s+=2;;){const e=i.getUint16(s);if(65498===e)break;const a=i.getUint16(s+2);if(65505===e&&1165519206===i.getUint32(s+4)){const e=s+10;let o;switch(i.getUint16(e)){case 18761:o=!0;break;case 19789:o=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==i.getUint16(e+2,o))return n("TIFF header contains invalid version");const l=i.getUint32(e+4,o),c=e+l+2+12*i.getUint16(e+l,o);for(let t=e+l+2;t<c;t+=12)if(274==i.getUint16(t,o)){if(3!==i.getUint16(t+2,o))return n("Orientation data type is invalid");if(1!==i.getUint32(t+4,o))return n("Orientation data count is invalid");i.setUint16(t+8,1,o);break}return t(r.slice(s,s+2+a))}s+=2+a}return t(new Blob)})),r.readAsArrayBuffer(e)}));var Iy={},Ty={get exports(){return Iy},set exports(e){Iy=e}};!function(){var e,t,n={};Ty.exports=n,n.parse=function(e,t){for(var r=n.bin.readUshort,i=n.bin.readUint,s=0,a={},o=new Uint8Array(e),l=o.length-4;101010256!=i(o,l);)l--;s=l,s+=4;var c=r(o,s+=4);r(o,s+=2);var u=i(o,s+=2),d=i(o,s+=4);s+=4,s=d;for(var h=0;h<c;h++){i(o,s),s+=4,s+=4,s+=4,i(o,s+=4),u=i(o,s+=4);var f=i(o,s+=4),p=r(o,s+=4),m=r(o,s+2),g=r(o,s+4);s+=6;var v=i(o,s+=8);s+=4,s+=p+m+g,n._readLocal(o,v,a,u,f,t)}return a},n._readLocal=function(e,t,r,i,s,a){var o=n.bin.readUshort,l=n.bin.readUint;l(e,t),o(e,t+=4),o(e,t+=2);var c=o(e,t+=2);l(e,t+=2),l(e,t+=4),t+=4;var u=o(e,t+=8),d=o(e,t+=2);t+=2;var h=n.bin.readUTF8(e,t,u);if(t+=u,t+=d,a)r[h]={size:s,csize:i};else{var f=new Uint8Array(e.buffer,t);if(0==c)r[h]=new Uint8Array(f.buffer.slice(t,t+i));else{if(8!=c)throw"unknown compression method: "+c;var p=new Uint8Array(s);n.inflateRaw(f,p),r[h]=p}}},n.inflateRaw=function(e,t){return n.F.inflate(e,t)},n.inflate=function(e,t){return e[0],e[1],n.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},n.deflate=function(e,t){null==t&&(t={level:6});var r=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[r]=120,i[r+1]=156,r+=2,r=n.F.deflateRaw(e,i,r,t.level);var s=n.adler(e,0,e.length);return i[r+0]=s>>>24&255,i[r+1]=s>>>16&255,i[r+2]=s>>>8&255,i[r+3]=s>>>0&255,new Uint8Array(i.buffer,0,r+4)},n.deflateRaw=function(e,t){null==t&&(t={level:6});var r=new Uint8Array(50+Math.floor(1.1*e.length)),i=n.F.deflateRaw(e,r,i,t.level);return new Uint8Array(r.buffer,0,i)},n.encode=function(e,t){null==t&&(t=!1);var r=0,i=n.bin.writeUint,s=n.bin.writeUshort,a={};for(var o in e){var l=!n._noNeed(o)&&!t,c=e[o],u=n.crc.crc(c,0,c.length);a[o]={cpr:l,usize:c.length,crc:u,file:l?n.deflateRaw(c):c}}for(var o in a)r+=a[o].file.length+30+46+2*n.bin.sizeUTF8(o);r+=22;var d=new Uint8Array(r),h=0,f=[];for(var o in a){var p=a[o];f.push(h),h=n._writeHeader(d,h,o,p,0)}var m=0,g=h;for(var o in a)p=a[o],f.push(h),h=n._writeHeader(d,h,o,p,1,f[m++]);var v=h-g;return i(d,h,101010256),h+=4,s(d,h+=4,m),s(d,h+=2,m),i(d,h+=2,v),i(d,h+=4,g),h+=4,h+=2,d.buffer},n._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},n._writeHeader=function(e,t,r,i,s,a){var o=n.bin.writeUint,l=n.bin.writeUshort,c=i.file;return o(e,t,0==s?67324752:33639248),t+=4,1==s&&(t+=2),l(e,t,20),l(e,t+=2,0),l(e,t+=2,i.cpr?8:0),o(e,t+=2,0),o(e,t+=4,i.crc),o(e,t+=4,c.length),o(e,t+=4,i.usize),l(e,t+=4,n.bin.sizeUTF8(r)),l(e,t+=2,0),t+=2,1==s&&(t+=2,t+=2,o(e,t+=6,a),t+=4),t+=n.bin.writeUTF8(e,t,r),0==s&&(e.set(c,t),t+=c.length),t},n.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(e,t,r,i){for(var s=0;s<i;s++)e=n.crc.table[255&(e^t[r+s])]^e>>>8;return e},crc:function(e,t,r){return 4294967295^n.crc.update(4294967295,e,t,r)}},n.adler=function(e,t,n){for(var r=1,i=0,s=t,a=t+n;s<a;){for(var o=Math.min(s+5552,a);s<o;)i+=r+=e[s++];r%=65521,i%=65521}return i<<16|r},n.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,r){for(var i,s="",a=0;a<r;a++)s+="%"+n.bin.pad(e[t+a].toString(16));try{i=decodeURIComponent(s)}catch(i){return n.bin.readASCII(e,t,r)}return i},writeUTF8:function(e,t,n){for(var r=n.length,i=0,s=0;s<r;s++){var a=n.charCodeAt(s);if(0==(4294967168&a))e[t+i]=a,i++;else if(0==(4294965248&a))e[t+i]=192|a>>6,e[t+i+1]=128|63&a,i+=2;else if(0==(4294901760&a))e[t+i]=224|a>>12,e[t+i+1]=128|a>>6&63,e[t+i+2]=128|63&a,i+=3;else{if(0!=(4292870144&a))throw"e";e[t+i]=240|a>>18,e[t+i+1]=128|a>>12&63,e[t+i+2]=128|a>>6&63,e[t+i+3]=128|63&a,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},n.F={},n.F.deflateRaw=function(e,t,r,i){var s=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],a=n.F.U,o=n.F._goodIndex;n.F._hash;var l=n.F._putsE,c=0,u=r<<3,d=0,h=e.length;if(0==i){for(;c<h;)l(t,u,c+(C=Math.min(65535,h-c))==h?1:0),u=n.F._copyExact(e,c,C,t,u+8),c+=C;return u>>>3}var f=a.lits,p=a.strt,m=a.prev,g=0,v=0,y=0,b=0,w=0,x=0;for(h>2&&(p[x=n.F._hash(e,0)]=0),c=0;c<h;c++){if(w=x,c+1<h-2){x=n.F._hash(e,c+1);var S=c+1&32767;m[S]=p[x],p[x]=S}if(d<=c){(g>14e3||v>26697)&&h-c>100&&(d<c&&(f[g]=c-d,g+=2,d=c),u=n.F._writeBlock(c==h-1||d==h?1:0,f,g,b,e,y,c-y,t,u),g=v=b=0,y=c);var k=0;c<h-2&&(k=n.F._bestMatch(e,c,m,w,Math.min(s[2],h-c),s[3]));var C=k>>>16,E=65535&k;if(0!=k){E=65535&k;var _=o(C=k>>>16,a.of0);a.lhst[257+_]++;var N=o(E,a.df0);a.dhst[N]++,b+=a.exb[_]+a.dxb[N],f[g]=C<<23|c-d,f[g+1]=E<<16|_<<8|N,g+=2,d=c+C}else a.lhst[e[c]]++;v++}}for(y==c&&0!=e.length||(d<c&&(f[g]=c-d,g+=2,d=c),u=n.F._writeBlock(1,f,g,b,e,y,c-y,t,u),g=0,v=0,g=v=b=0,y=c);0!=(7&u);)u++;return u>>>3},n.F._bestMatch=function(e,t,r,i,s,a){var o=32767&t,l=r[o],c=o-l+32768&32767;if(l==o||i!=n.F._hash(e,t-c))return 0;for(var u=0,d=0,h=Math.min(32767,t);c<=h&&0!=--a&&l!=o;){if(0==u||e[t+u]==e[t+u-c]){var f=n.F._howLong(e,t,c);if(f>u){if(d=c,(u=f)>=s)break;c+2<f&&(f=c+2);for(var p=0,m=0;m<f-2;m++){var g=t-c+m+32768&32767,v=g-r[g]+32768&32767;v>p&&(p=v,l=g)}}}c+=(o=l)-(l=r[o])+32768&32767}return u<<16|d},n.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},n.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(e,t,r,i,s,a,o,l,c){var u,d,h,f,p,m,g,v,y,b=n.F.U,w=n.F._putsF,x=n.F._putsE;b.lhst[256]++,d=(u=n.F.getTrees())[0],h=u[1],f=u[2],p=u[3],m=u[4],g=u[5],v=u[6],y=u[7];var S=32+(0==(c+3&7)?0:8-(c+3&7))+(o<<3),k=i+n.F.contSize(b.fltree,b.lhst)+n.F.contSize(b.fdtree,b.dhst),C=i+n.F.contSize(b.ltree,b.lhst)+n.F.contSize(b.dtree,b.dhst);C+=14+3*g+n.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var E=0;E<286;E++)b.lhst[E]=0;for(E=0;E<30;E++)b.dhst[E]=0;for(E=0;E<19;E++)b.ihst[E]=0;var _=S<k&&S<C?0:k<C?1:2;if(w(l,c,e),w(l,c+1,_),c+=3,0==_){for(;0!=(7&c);)c++;c=n.F._copyExact(s,a,o,l,c)}else{var N,I;if(1==_&&(N=b.fltree,I=b.fdtree),2==_){n.F.makeCodes(b.ltree,d),n.F.revCodes(b.ltree,d),n.F.makeCodes(b.dtree,h),n.F.revCodes(b.dtree,h),n.F.makeCodes(b.itree,f),n.F.revCodes(b.itree,f),N=b.ltree,I=b.dtree,x(l,c,p-257),x(l,c+=5,m-1),x(l,c+=5,g-4),c+=4;for(var T=0;T<g;T++)x(l,c+3*T,b.itree[1+(b.ordr[T]<<1)]);c+=3*g,c=n.F._codeTiny(v,b.itree,l,c),c=n.F._codeTiny(y,b.itree,l,c)}for(var A=a,j=0;j<r;j+=2){for(var P=t[j],D=P>>>23,R=A+(8388607&P);A<R;)c=n.F._writeLit(s[A++],N,l,c);if(0!=D){var O=t[j+1],L=O>>16,M=O>>8&255,U=255&O;x(l,c=n.F._writeLit(257+M,N,l,c),D-b.of0[M]),c+=b.exb[M],w(l,c=n.F._writeLit(U,I,l,c),L-b.df0[U]),c+=b.dxb[U],A+=D}}c=n.F._writeLit(256,N,l,c)}return c},n.F._copyExact=function(e,t,n,r,i){var s=i>>>3;return r[s]=n,r[s+1]=n>>>8,r[s+2]=255-r[s],r[s+3]=255-r[s+1],s+=4,r.set(new Uint8Array(e.buffer,t,n),s),i+(n+4<<3)},n.F.getTrees=function(){for(var e=n.F.U,t=n.F._hufTree(e.lhst,e.ltree,15),r=n.F._hufTree(e.dhst,e.dtree,15),i=[],s=n.F._lenCodes(e.ltree,i),a=[],o=n.F._lenCodes(e.dtree,a),l=0;l<i.length;l+=2)e.ihst[i[l]]++;for(l=0;l<a.length;l+=2)e.ihst[a[l]]++;for(var c=n.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&0==e.itree[1+(e.ordr[u-1]<<1)];)u--;return[t,r,c,s,o,u,i,a]},n.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},n.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},n.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},n.F._codeTiny=function(e,t,r,i){for(var s=0;s<e.length;s+=2){var a=e[s],o=e[s+1];i=n.F._writeLit(a,t,r,i);var l=16==a?2:17==a?3:7;a>15&&(n.F._putsE(r,i,o,l),i+=l)}return i},n.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],s=r+3<n?e[r+3]:-1,a=r+5<n?e[r+5]:-1,o=0==r?-1:e[r-1];if(0==i&&s==i&&a==i){for(var l=r+5;l+2<n&&e[l+2]==i;)l+=2;(c=Math.min(l+1-r>>>1,138))<11?t.push(17,c-3):t.push(18,c-11),r+=2*c-2}else if(i==o&&s==i&&a==i){for(l=r+5;l+2<n&&e[l+2]==i;)l+=2;var c=Math.min(l+1-r>>>1,6);t.push(16,c-3),r+=2*c-2}else t.push(i,0)}return n>>>1},n.F._hufTree=function(e,t,r){var i=[],s=e.length,a=t.length,o=0;for(o=0;o<a;o+=2)t[o]=0,t[o+1]=0;for(o=0;o<s;o++)0!=e[o]&&i.push({lit:o,f:e[o]});var l=i.length,c=i.slice(0);if(0==l)return 0;if(1==l){var u=i[0].lit;return c=0==u?1:0,t[1+(u<<1)]=1,t[1+(c<<1)]=1,1}i.sort((function(e,t){return e.f-t.f}));var d=i[0],h=i[1],f=0,p=1,m=2;for(i[0]={lit:-1,f:d.f+h.f,l:d,r:h,d:0};p!=l-1;)d=f!=p&&(m==l||i[f].f<i[m].f)?i[f++]:i[m++],h=f!=p&&(m==l||i[f].f<i[m].f)?i[f++]:i[m++],i[p++]={lit:-1,f:d.f+h.f,l:d,r:h};var g=n.F.setDepth(i[p-1],0);for(g>r&&(n.F.restrictDepth(c,r,g),g=r),o=0;o<l;o++)t[1+(c[o].lit<<1)]=c[o].d;return g},n.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(n.F.setDepth(e.l,t+1),n.F.setDepth(e.r,t+1))},n.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,s=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var a=e[r].d;e[r].d=t,s+=i-(1<<n-a)}for(s>>>=n-t;s>0;)(a=e[r].d)<t?(e[r].d++,s-=1<<t-a-1):r++;for(;r>=0;r--)e[r].d==t&&s<0&&(e[r].d--,s++);0!=s&&console.log("debt left")},n.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},n.F._writeLit=function(e,t,r,i){return n.F._putsF(r,i,t[e<<1]),i+t[1+(e<<1)]},n.F.inflate=function(e,t){var r=Uint8Array;if(3==e[0]&&0==e[1])return t||new r(0);var i=n.F,s=i._bitsF,a=i._bitsE,o=i._decodeTiny,l=i.makeCodes,c=i.codes2map,u=i._get17,d=i.U,h=null==t;h&&(t=new r(e.length>>>2<<3));for(var f,p,m=0,g=0,v=0,y=0,b=0,w=0,x=0,S=0,k=0;0==m;)if(m=s(e,k,1),g=s(e,k+1,2),k+=3,0!=g){if(h&&(t=n.F._check(t,S+(1<<17))),1==g&&(f=d.flmap,p=d.fdmap,w=511,x=31),2==g){v=a(e,k,5)+257,y=a(e,k+5,5)+1,b=a(e,k+10,4)+4,k+=14;for(var C=0;C<38;C+=2)d.itree[C]=0,d.itree[C+1]=0;var E=1;for(C=0;C<b;C++){var _=a(e,k+3*C,3);d.itree[1+(d.ordr[C]<<1)]=_,_>E&&(E=_)}k+=3*b,l(d.itree,E),c(d.itree,E,d.imap),f=d.lmap,p=d.dmap,k=o(d.imap,(1<<E)-1,v+y,e,k,d.ttree);var N=i._copyOut(d.ttree,0,v,d.ltree);w=(1<<N)-1;var I=i._copyOut(d.ttree,v,y,d.dtree);x=(1<<I)-1,l(d.ltree,N),c(d.ltree,N,f),l(d.dtree,I),c(d.dtree,I,p)}for(;;){var T=f[u(e,k)&w];k+=15&T;var A=T>>>4;if(A>>>8==0)t[S++]=A;else{if(256==A)break;var j=S+A-254;if(A>264){var P=d.ldef[A-257];j=S+(P>>>3)+a(e,k,7&P),k+=7&P}var D=p[u(e,k)&x];k+=15&D;var R=D>>>4,O=d.ddef[R],L=(O>>>4)+s(e,k,15&O);for(k+=15&O,h&&(t=n.F._check(t,S+(1<<17)));S<j;)t[S]=t[S++-L],t[S]=t[S++-L],t[S]=t[S++-L],t[S]=t[S++-L];S=j}}}else{0!=(7&k)&&(k+=8-(7&k));var M=4+(k>>>3),U=e[M-4]|e[M-3]<<8;h&&(t=n.F._check(t,S+U)),t.set(new r(e.buffer,e.byteOffset+M,U),S),k=M+U<<3,S+=U}return t.length==S?t:t.slice(0,S)},n.F._check=function(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(Math.max(n<<1,t));return r.set(e,0),r},n.F._decodeTiny=function(e,t,r,i,s,a){for(var o=n.F._bitsE,l=n.F._get17,c=0;c<r;){var u=e[l(i,s)&t];s+=15&u;var d=u>>>4;if(d<=15)a[c]=d,c++;else{var h=0,f=0;16==d?(f=3+o(i,s,2),s+=2,h=a[c-1]):17==d?(f=3+o(i,s,3),s+=3):18==d&&(f=11+o(i,s,7),s+=7);for(var p=c+f;c<p;)a[c]=h,c++}}return s},n.F._copyOut=function(e,t,n,r){for(var i=0,s=0,a=r.length>>>1;s<n;){var o=e[s+t];r[s<<1]=0,r[1+(s<<1)]=o,o>i&&(i=o),s++}for(;s<a;)r[s<<1]=0,r[1+(s<<1)]=0,s++;return i},n.F.makeCodes=function(e,t){for(var r,i,s,a,o=n.F.U,l=e.length,c=o.bl_count,u=0;u<=t;u++)c[u]=0;for(u=1;u<l;u+=2)c[e[u]]++;var d=o.next_code;for(r=0,c[0]=0,i=1;i<=t;i++)r=r+c[i-1]<<1,d[i]=r;for(s=0;s<l;s+=2)0!=(a=e[s+1])&&(e[s]=d[a],d[a]++)},n.F.codes2map=function(e,t,r){for(var i=e.length,s=n.F.U.rev15,a=0;a<i;a+=2)if(0!=e[a+1])for(var o=a>>1,l=e[a+1],c=o<<4|l,u=t-l,d=e[a]<<u,h=d+(1<<u);d!=h;)r[s[d]>>>15-t]=c,d++},n.F.revCodes=function(e,t){for(var r=n.F.U.rev15,i=15-t,s=0;s<e.length;s+=2){var a=e[s]<<t-e[s+1];e[s]=r[a]>>>i}},n.F._putsE=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},n.F._putsF=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},n.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},n.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},n.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},n.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var e=n.F.U,t=0;t<32768;t++){var r=t;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,e.rev15[t]=(r>>>16|r<<16)>>>17}function i(e,t,n){for(;0!=t--;)e.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),n.F.makeCodes(e.fltree,9),n.F.codes2map(e.fltree,9,e.flmap),n.F.revCodes(e.fltree,9),i(e.fdtree,32,5),n.F.makeCodes(e.fdtree,5),n.F.codes2map(e.fdtree,5,e.fdmap),n.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}()}();var Ay=function(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}({__proto__:null,default:Iy},[Iy]);const jy=function(){var e={nextZero(e,t){for(;0!=e[t];)t++;return t},readUshort:(e,t)=>e[t]<<8|e[t+1],writeUshort(e,t,n){e[t]=n>>8&255,e[t+1]=255&n},readUint:(e,t)=>16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3]),writeUint(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},readASCII(e,t,n){let r="";for(let i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII(e,t,n){for(let r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},readBytes(e,t,n){const r=[];for(let i=0;i<n;i++)r.push(e[t+i]);return r},pad:e=>e.length<2?`0${e}`:e,readUTF8(t,n,r){let i,s="";for(let a=0;a<r;a++)s+=`%${e.pad(t[n+a].toString(16))}`;try{i=decodeURIComponent(s)}catch(i){return e.readASCII(t,n,r)}return i}};function t(t,n,r,i){const a=n*r,o=s(i),l=Math.ceil(n*o/8),c=new Uint8Array(4*a),u=new Uint32Array(c.buffer),{ctype:d}=i,{depth:h}=i,f=e.readUshort;if(6==d){const e=a<<2;if(8==h)for(var p=0;p<e;p+=4)c[p]=t[p],c[p+1]=t[p+1],c[p+2]=t[p+2],c[p+3]=t[p+3];if(16==h)for(p=0;p<e;p++)c[p]=t[p<<1]}else if(2==d){const e=i.tabs.tRNS;if(null==e){if(8==h)for(p=0;p<a;p++){var m=3*p;u[p]=255<<24|t[m+2]<<16|t[m+1]<<8|t[m]}if(16==h)for(p=0;p<a;p++)m=6*p,u[p]=255<<24|t[m+4]<<16|t[m+2]<<8|t[m]}else{var g=e[0];const n=e[1],r=e[2];if(8==h)for(p=0;p<a;p++){var v=p<<2;m=3*p,u[p]=255<<24|t[m+2]<<16|t[m+1]<<8|t[m],t[m]==g&&t[m+1]==n&&t[m+2]==r&&(c[v+3]=0)}if(16==h)for(p=0;p<a;p++)v=p<<2,m=6*p,u[p]=255<<24|t[m+4]<<16|t[m+2]<<8|t[m],f(t,m)==g&&f(t,m+2)==n&&f(t,m+4)==r&&(c[v+3]=0)}}else if(3==d){const e=i.tabs.PLTE,s=i.tabs.tRNS,o=s?s.length:0;if(1==h)for(var y=0;y<r;y++){var b=y*l,w=y*n;for(p=0;p<n;p++){v=w+p<<2;var x=3*(S=t[b+(p>>3)]>>7-(7&p)&1);c[v]=e[x],c[v+1]=e[x+1],c[v+2]=e[x+2],c[v+3]=S<o?s[S]:255}}if(2==h)for(y=0;y<r;y++)for(b=y*l,w=y*n,p=0;p<n;p++)v=w+p<<2,x=3*(S=t[b+(p>>2)]>>6-((3&p)<<1)&3),c[v]=e[x],c[v+1]=e[x+1],c[v+2]=e[x+2],c[v+3]=S<o?s[S]:255;if(4==h)for(y=0;y<r;y++)for(b=y*l,w=y*n,p=0;p<n;p++)v=w+p<<2,x=3*(S=t[b+(p>>1)]>>4-((1&p)<<2)&15),c[v]=e[x],c[v+1]=e[x+1],c[v+2]=e[x+2],c[v+3]=S<o?s[S]:255;if(8==h)for(p=0;p<a;p++){var S;v=p<<2,x=3*(S=t[p]),c[v]=e[x],c[v+1]=e[x+1],c[v+2]=e[x+2],c[v+3]=S<o?s[S]:255}}else if(4==d){if(8==h)for(p=0;p<a;p++){v=p<<2;var k=t[C=p<<1];c[v]=k,c[v+1]=k,c[v+2]=k,c[v+3]=t[C+1]}if(16==h)for(p=0;p<a;p++){var C;v=p<<2,k=t[C=p<<2],c[v]=k,c[v+1]=k,c[v+2]=k,c[v+3]=t[C+2]}}else if(0==d)for(g=i.tabs.tRNS?i.tabs.tRNS:-1,y=0;y<r;y++){const e=y*l,r=y*n;if(1==h)for(var E=0;E<n;E++){var _=(k=255*(t[e+(E>>>3)]>>>7-(7&E)&1))==255*g?0:255;u[r+E]=_<<24|k<<16|k<<8|k}else if(2==h)for(E=0;E<n;E++)_=(k=85*(t[e+(E>>>2)]>>>6-((3&E)<<1)&3))==85*g?0:255,u[r+E]=_<<24|k<<16|k<<8|k;else if(4==h)for(E=0;E<n;E++)_=(k=17*(t[e+(E>>>1)]>>>4-((1&E)<<2)&15))==17*g?0:255,u[r+E]=_<<24|k<<16|k<<8|k;else if(8==h)for(E=0;E<n;E++)_=(k=t[e+E])==g?0:255,u[r+E]=_<<24|k<<16|k<<8|k;else if(16==h)for(E=0;E<n;E++)k=t[e+(E<<1)],_=f(t,e+(E<<1))==g?0:255,u[r+E]=_<<24|k<<16|k<<8|k}return c}function n(e,t,n,o){const l=s(e),c=Math.ceil(n*l/8),u=new Uint8Array((c+1+e.interlace)*o);return t=e.tabs.CgBI?i(t,u):r(t,u),0==e.interlace?t=a(t,e,0,n,o):1==e.interlace&&(t=function(e,t){const n=t.width,r=t.height,i=s(t),o=i>>3,l=Math.ceil(n*i/8),c=new Uint8Array(r*l);let u=0;const d=[0,0,4,0,2,0,1],h=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1];let m=0;for(;m<7;){const s=f[m],v=p[m];let y=0,b=0,w=d[m];for(;w<r;)w+=s,b++;let x=h[m];for(;x<n;)x+=v,y++;const S=Math.ceil(y*i/8);a(e,t,u,y,b);let k=0,C=d[m];for(;C<r;){let t=h[m],r=u+k*S<<3;for(;t<n;){var g;if(1==i&&(g=(g=e[r>>3])>>7-(7&r)&1,c[C*l+(t>>3)]|=g<<7-(7&t)),2==i&&(g=(g=e[r>>3])>>6-(7&r)&3,c[C*l+(t>>2)]|=g<<6-((3&t)<<1)),4==i&&(g=(g=e[r>>3])>>4-(7&r)&15,c[C*l+(t>>1)]|=g<<4-((1&t)<<2)),i>=8){const n=C*l+t*o;for(let t=0;t<o;t++)c[n+t]=e[(r>>3)+t]}r+=i,t+=v}k++,C+=s}y*b!=0&&(u+=b*(1+S)),m+=1}return c}(t,e)),t}function r(e,t){return i(new Uint8Array(e.buffer,2,e.length-6),t)}var i=function(){const e={H:{}};return e.H.N=function(t,n){const r=Uint8Array;let i,s,a=0,o=0,l=0,c=0,u=0,d=0,h=0,f=0,p=0;if(3==t[0]&&0==t[1])return n||new r(0);const m=e.H,g=m.b,v=m.e,y=m.R,b=m.n,w=m.A,x=m.Z,S=m.m,k=null==n;for(k&&(n=new r(t.length>>>2<<5));0==a;)if(a=g(t,p,1),o=g(t,p+1,2),p+=3,0!=o){if(k&&(n=e.H.W(n,f+(1<<17))),1==o&&(i=S.J,s=S.h,d=511,h=31),2==o){l=v(t,p,5)+257,c=v(t,p+5,5)+1,u=v(t,p+10,4)+4,p+=14;let e=1;for(var C=0;C<38;C+=2)S.Q[C]=0,S.Q[C+1]=0;for(C=0;C<u;C++){const n=v(t,p+3*C,3);S.Q[1+(S.X[C]<<1)]=n,n>e&&(e=n)}p+=3*u,b(S.Q,e),w(S.Q,e,S.u),i=S.w,s=S.d,p=y(S.u,(1<<e)-1,l+c,t,p,S.v);const n=m.V(S.v,0,l,S.C);d=(1<<n)-1;const r=m.V(S.v,l,c,S.D);h=(1<<r)-1,b(S.C,n),w(S.C,n,i),b(S.D,r),w(S.D,r,s)}for(;;){const e=i[x(t,p)&d];p+=15&e;const r=e>>>4;if(r>>>8==0)n[f++]=r;else{if(256==r)break;{let e=f+r-254;if(r>264){const n=S.q[r-257];e=f+(n>>>3)+v(t,p,7&n),p+=7&n}const i=s[x(t,p)&h];p+=15&i;const a=i>>>4,o=S.c[a],l=(o>>>4)+g(t,p,15&o);for(p+=15&o;f<e;)n[f]=n[f++-l],n[f]=n[f++-l],n[f]=n[f++-l],n[f]=n[f++-l];f=e}}}}else{0!=(7&p)&&(p+=8-(7&p));const i=4+(p>>>3),s=t[i-4]|t[i-3]<<8;k&&(n=e.H.W(n,f+s)),n.set(new r(t.buffer,t.byteOffset+i,s),f),p=i+s<<3,f+=s}return n.length==f?n:n.slice(0,f)},e.H.W=function(e,t){const n=e.length;if(t<=n)return e;const r=new Uint8Array(n<<1);return r.set(e,0),r},e.H.R=function(t,n,r,i,s,a){const o=e.H.e,l=e.H.Z;let c=0;for(;c<r;){const e=t[l(i,s)&n];s+=15&e;const r=e>>>4;if(r<=15)a[c]=r,c++;else{let e=0,t=0;16==r?(t=3+o(i,s,2),s+=2,e=a[c-1]):17==r?(t=3+o(i,s,3),s+=3):18==r&&(t=11+o(i,s,7),s+=7);const n=c+t;for(;c<n;)a[c]=e,c++}}return s},e.H.V=function(e,t,n,r){let i=0,s=0;const a=r.length>>>1;for(;s<n;){const n=e[s+t];r[s<<1]=0,r[1+(s<<1)]=n,n>i&&(i=n),s++}for(;s<a;)r[s<<1]=0,r[1+(s<<1)]=0,s++;return i},e.H.n=function(t,n){const r=e.H.m,i=t.length;let s,a,o,l;const c=r.j;for(var u=0;u<=n;u++)c[u]=0;for(u=1;u<i;u+=2)c[t[u]]++;const d=r.K;for(s=0,c[0]=0,a=1;a<=n;a++)s=s+c[a-1]<<1,d[a]=s;for(o=0;o<i;o+=2)l=t[o+1],0!=l&&(t[o]=d[l],d[l]++)},e.H.A=function(t,n,r){const i=t.length,s=e.H.m.r;for(let e=0;e<i;e+=2)if(0!=t[e+1]){const i=e>>1,a=t[e+1],o=i<<4|a,l=n-a;let c=t[e]<<l;const u=c+(1<<l);for(;c!=u;)r[s[c]>>>15-n]=o,c++}},e.H.l=function(t,n){const r=e.H.m.r,i=15-n;for(let e=0;e<t.length;e+=2){const s=t[e]<<n-t[e+1];t[e]=r[s]>>>i}},e.H.M=function(e,t,n){n<<=7&t;const r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},e.H.I=function(e,t,n){n<<=7&t;const r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},e.H.e=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},e.H.b=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},e.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},e.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},e.H.m=function(){const e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){const t=e.H.m;for(var n=0;n<32768;n++){let e=n;e=(2863311530&e)>>>1|(1431655765&e)<<1,e=(3435973836&e)>>>2|(858993459&e)<<2,e=(4042322160&e)>>>4|(252645135&e)<<4,e=(4278255360&e)>>>8|(16711935&e)<<8,t.r[n]=(e>>>16|e<<16)>>>17}function r(e,t,n){for(;0!=t--;)e.push(0,n)}for(n=0;n<32;n++)t.q[n]=t.S[n]<<3|t.T[n],t.c[n]=t.p[n]<<4|t.z[n];r(t._,144,8),r(t._,112,9),r(t._,24,7),r(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),r(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),r(t.Q,19,0),r(t.C,286,0),r(t.D,30,0),r(t.v,320,0)}(),e.H.N}();function s(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function a(e,t,n,r,i){let a=s(t);const l=Math.ceil(r*a/8);let c,u;a=Math.ceil(a/8);let d=e[n],h=0;if(d>1&&(e[n]=[0,0,1][d-2]),3==d)for(h=a;h<l;h++)e[h+1]=e[h+1]+(e[h+1-a]>>>1)&255;for(let s=0;s<i;s++)if(c=n+s*l,u=c+s+1,d=e[u-1],h=0,0==d)for(;h<l;h++)e[c+h]=e[u+h];else if(1==d){for(;h<a;h++)e[c+h]=e[u+h];for(;h<l;h++)e[c+h]=e[u+h]+e[c+h-a]}else if(2==d)for(;h<l;h++)e[c+h]=e[u+h]+e[c+h-l];else if(3==d){for(;h<a;h++)e[c+h]=e[u+h]+(e[c+h-l]>>>1);for(;h<l;h++)e[c+h]=e[u+h]+(e[c+h-l]+e[c+h-a]>>>1)}else{for(;h<a;h++)e[c+h]=e[u+h]+o(0,e[c+h-l],0);for(;h<l;h++)e[c+h]=e[u+h]+o(e[c+h-a],e[c+h-l],e[c+h-a-l])}return e}function o(e,t,n){const r=e+t-n,i=r-e,s=r-t,a=r-n;return i*i<=s*s&&i*i<=a*a?e:s*s<=a*a?t:n}function l(t,n,r){r.width=e.readUint(t,n),n+=4,r.height=e.readUint(t,n),n+=4,r.depth=t[n],n++,r.ctype=t[n],n++,r.compress=t[n],n++,r.filter=t[n],n++,r.interlace=t[n],n++}function c(e,t,n,r,i,s,a,o,l){const c=Math.min(t,i),u=Math.min(n,s);let d=0,h=0;for(let x=0;x<u;x++)for(let n=0;n<c;n++)if(a>=0&&o>=0?(d=x*t+n<<2,h=(o+x)*i+a+n<<2):(d=(-o+x)*t-a+n<<2,h=x*i+n<<2),0==l)r[h]=e[d],r[h+1]=e[d+1],r[h+2]=e[d+2],r[h+3]=e[d+3];else if(1==l){var f=e[d+3]*(1/255),p=e[d]*f,m=e[d+1]*f,g=e[d+2]*f,v=r[h+3]*(1/255),y=r[h]*v,b=r[h+1]*v,w=r[h+2]*v;const t=1-f,n=f+v*t,i=0==n?0:1/n;r[h+3]=255*n,r[h+0]=(p+y*t)*i,r[h+1]=(m+b*t)*i,r[h+2]=(g+w*t)*i}else if(2==l)f=e[d+3],p=e[d],m=e[d+1],g=e[d+2],v=r[h+3],y=r[h],b=r[h+1],w=r[h+2],f==v&&p==y&&m==b&&g==w?(r[h]=0,r[h+1]=0,r[h+2]=0,r[h+3]=0):(r[h]=p,r[h+1]=m,r[h+2]=g,r[h+3]=f);else if(3==l){if(f=e[d+3],p=e[d],m=e[d+1],g=e[d+2],v=r[h+3],y=r[h],b=r[h+1],w=r[h+2],f==v&&p==y&&m==b&&g==w)continue;if(f<220&&v>20)return!1}return!0}return{decode:function(t){const s=new Uint8Array(t);let a=8;const o=e,c=o.readUshort,u=o.readUint,d={tabs:{},frames:[]},h=new Uint8Array(s.length);let f,p=0,m=0;const g=[137,80,78,71,13,10,26,10];for(var v=0;v<8;v++)if(s[v]!=g[v])throw"The input is not a PNG file!";for(;a<s.length;){const t=o.readUint(s,a);a+=4;const g=o.readASCII(s,a,4);if(a+=4,"IHDR"==g)l(s,a,d);else if("iCCP"==g){for(var y=a;0!=s[y];)y++;o.readASCII(s,a,y-a),s[y+1];const n=s.slice(y+2,a+t);let l=null;try{l=r(n)}catch(e){l=i(n)}d.tabs[g]=l}else if("CgBI"==g)d.tabs[g]=s.slice(a,a+4);else if("IDAT"==g){for(v=0;v<t;v++)h[p+v]=s[a+v];p+=t}else if("acTL"==g)d.tabs[g]={num_frames:u(s,a),num_plays:u(s,a+4)},f=new Uint8Array(s.length);else if("fcTL"==g){0!=m&&((C=d.frames[d.frames.length-1]).data=n(d,f.slice(0,m),C.rect.width,C.rect.height),m=0);const e={x:u(s,a+12),y:u(s,a+16),width:u(s,a+4),height:u(s,a+8)};let t=c(s,a+22);t=c(s,a+20)/(0==t?100:t);const r={rect:e,delay:Math.round(1e3*t),dispose:s[a+24],blend:s[a+25]};d.frames.push(r)}else if("fdAT"==g){for(v=0;v<t-4;v++)f[m+v]=s[a+v+4];m+=t-4}else if("pHYs"==g)d.tabs[g]=[o.readUint(s,a),o.readUint(s,a+4),s[a+8]];else if("cHRM"==g)for(d.tabs[g]=[],v=0;v<8;v++)d.tabs[g].push(o.readUint(s,a+4*v));else if("tEXt"==g||"zTXt"==g){null==d.tabs[g]&&(d.tabs[g]={});var b=o.nextZero(s,a),w=o.readASCII(s,a,b-a),x=a+t-b-1;if("tEXt"==g)k=o.readASCII(s,b+1,x);else{var S=r(s.slice(b+2,b+2+x));k=o.readUTF8(S,0,S.length)}d.tabs[g][w]=k}else if("iTXt"==g){null==d.tabs[g]&&(d.tabs[g]={}),b=0,y=a,b=o.nextZero(s,y),w=o.readASCII(s,y,b-y);const e=s[y=b+1];var k;s[y+1],y+=2,b=o.nextZero(s,y),o.readASCII(s,y,b-y),y=b+1,b=o.nextZero(s,y),o.readUTF8(s,y,b-y),x=t-((y=b+1)-a),0==e?k=o.readUTF8(s,y,x):(S=r(s.slice(y,y+x)),k=o.readUTF8(S,0,S.length)),d.tabs[g][w]=k}else if("PLTE"==g)d.tabs[g]=o.readBytes(s,a,t);else if("hIST"==g){const e=d.tabs.PLTE.length/3;for(d.tabs[g]=[],v=0;v<e;v++)d.tabs[g].push(c(s,a+2*v))}else if("tRNS"==g)3==d.ctype?d.tabs[g]=o.readBytes(s,a,t):0==d.ctype?d.tabs[g]=c(s,a):2==d.ctype&&(d.tabs[g]=[c(s,a),c(s,a+2),c(s,a+4)]);else if("gAMA"==g)d.tabs[g]=o.readUint(s,a)/1e5;else if("sRGB"==g)d.tabs[g]=s[a];else if("bKGD"==g)0==d.ctype||4==d.ctype?d.tabs[g]=[c(s,a)]:2==d.ctype||6==d.ctype?d.tabs[g]=[c(s,a),c(s,a+2),c(s,a+4)]:3==d.ctype&&(d.tabs[g]=s[a]);else if("IEND"==g)break;a+=t,o.readUint(s,a),a+=4}var C;return 0!=m&&((C=d.frames[d.frames.length-1]).data=n(d,f.slice(0,m),C.rect.width,C.rect.height)),d.data=n(d,h,d.width,d.height),delete d.compress,delete d.interlace,delete d.filter,d},toRGBA8:function(e){const n=e.width,r=e.height;if(null==e.tabs.acTL)return[t(e.data,n,r,e).buffer];const i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);const s=n*r*4,a=new Uint8Array(s),o=new Uint8Array(s),l=new Uint8Array(s);for(let d=0;d<e.frames.length;d++){const h=e.frames[d],f=h.rect.x,p=h.rect.y,m=h.rect.width,g=h.rect.height,v=t(h.data,m,g,e);if(0!=d)for(var u=0;u<s;u++)l[u]=a[u];if(0==h.blend?c(v,m,g,a,n,r,f,p,0):1==h.blend&&c(v,m,g,a,n,r,f,p,1),i.push(a.buffer.slice(0)),0==h.dispose);else if(1==h.dispose)c(o,m,g,a,n,r,f,p,0);else if(2==h.dispose)for(u=0;u<s;u++)a[u]=l[u]}return i},_paeth:o,_copyTile:c,_bin:e}}();!function(){const{_copyTile:e}=jy,{_bin:t}=jy,n=jy._paeth;var r={table:function(){const e=new Uint32Array(256);for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update(e,t,n,i){for(let s=0;s<i;s++)e=r.table[255&(e^t[n+s])]^e>>>8;return e},crc:(e,t,n)=>4294967295^r.update(4294967295,e,t,n)};function i(e,t,n,r){t[n]+=e[0]*r>>4,t[n+1]+=e[1]*r>>4,t[n+2]+=e[2]*r>>4,t[n+3]+=e[3]*r>>4}function s(e){return Math.max(0,Math.min(255,e))}function a(e,t){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return n*n+r*r+i*i+s*s}function o(e,t,n,r,o,l,c){null==c&&(c=1);const u=r.length,d=[];for(var h=0;h<u;h++){const e=r[h];d.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(h=0;h<u;h++){let e=4294967295;for(var f=0,p=0;p<u;p++){var m=a(d[h],d[p]);p!=h&&m<e&&(e=m,f=p)}}const g=new Uint32Array(o.buffer),v=new Int16Array(t*n*4),y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(h=0;h<y.length;h++)y[h]=255*((y[h]+.5)/16-.5);for(let w=0;w<n;w++)for(let o=0;o<t;o++){var b;h=4*(w*t+o),2!=c?b=[s(e[h]+v[h]),s(e[h+1]+v[h+1]),s(e[h+2]+v[h+2]),s(e[h+3]+v[h+3])]:(m=y[4*(3&w)+(3&o)],b=[s(e[h]+m),s(e[h+1]+m),s(e[h+2]+m),s(e[h+3]+m)]),f=0;let x=16777215;for(p=0;p<u;p++){const e=a(b,d[p]);e<x&&(x=e,f=p)}const S=d[f],k=[b[0]-S[0],b[1]-S[1],b[2]-S[2],b[3]-S[3]];1==c&&(o!=t-1&&i(k,v,h+4,7),w!=n-1&&(0!=o&&i(k,v,h+4*t-4,3),i(k,v,h+4*t,5),o!=t-1&&i(k,v,h+4*t+4,1))),l[h>>2]=f,g[h>>2]=r[f]}}function l(e,n,i,s,a){null==a&&(a={});const{crc:o}=r,l=t.writeUint,c=t.writeUshort,u=t.writeASCII;let d=8;const h=e.frames.length>1;let f,p=!1,m=33+(h?20:0);if(null!=a.sRGB&&(m+=13),null!=a.pHYs&&(m+=21),null!=a.iCCP&&(f=pako.deflate(a.iCCP),m+=21+f.length+4),3==e.ctype){for(var g=e.plte.length,v=0;v<g;v++)e.plte[v]>>>24!=255&&(p=!0);m+=8+3*g+4+(p?8+1*g+4:0)}for(var y=0;y<e.frames.length;y++)h&&(m+=38),m+=(S=e.frames[y]).cimg.length+12,0!=y&&(m+=4);m+=12;const b=new Uint8Array(m),w=[137,80,78,71,13,10,26,10];for(v=0;v<8;v++)b[v]=w[v];if(l(b,d,13),d+=4,u(b,d,"IHDR"),d+=4,l(b,d,n),d+=4,l(b,d,i),d+=4,b[d]=e.depth,d++,b[d]=e.ctype,d++,b[d]=0,d++,b[d]=0,d++,b[d]=0,d++,l(b,d,o(b,d-17,17)),d+=4,null!=a.sRGB&&(l(b,d,1),d+=4,u(b,d,"sRGB"),d+=4,b[d]=a.sRGB,d++,l(b,d,o(b,d-5,5)),d+=4),null!=a.iCCP){const e=13+f.length;l(b,d,e),d+=4,u(b,d,"iCCP"),d+=4,u(b,d,"ICC profile"),d+=11,d+=2,b.set(f,d),d+=f.length,l(b,d,o(b,d-(e+4),e+4)),d+=4}if(null!=a.pHYs&&(l(b,d,9),d+=4,u(b,d,"pHYs"),d+=4,l(b,d,a.pHYs[0]),d+=4,l(b,d,a.pHYs[1]),d+=4,b[d]=a.pHYs[2],d++,l(b,d,o(b,d-13,13)),d+=4),h&&(l(b,d,8),d+=4,u(b,d,"acTL"),d+=4,l(b,d,e.frames.length),d+=4,l(b,d,null!=a.loop?a.loop:0),d+=4,l(b,d,o(b,d-12,12)),d+=4),3==e.ctype){for(l(b,d,3*(g=e.plte.length)),d+=4,u(b,d,"PLTE"),d+=4,v=0;v<g;v++){const t=3*v,n=e.plte[v],r=255&n,i=n>>>8&255,s=n>>>16&255;b[d+t+0]=r,b[d+t+1]=i,b[d+t+2]=s}if(d+=3*g,l(b,d,o(b,d-3*g-4,3*g+4)),d+=4,p){for(l(b,d,g),d+=4,u(b,d,"tRNS"),d+=4,v=0;v<g;v++)b[d+v]=e.plte[v]>>>24&255;d+=g,l(b,d,o(b,d-g-4,g+4)),d+=4}}let x=0;for(y=0;y<e.frames.length;y++){var S=e.frames[y];h&&(l(b,d,26),d+=4,u(b,d,"fcTL"),d+=4,l(b,d,x++),d+=4,l(b,d,S.rect.width),d+=4,l(b,d,S.rect.height),d+=4,l(b,d,S.rect.x),d+=4,l(b,d,S.rect.y),d+=4,c(b,d,s[y]),d+=2,c(b,d,1e3),d+=2,b[d]=S.dispose,d++,b[d]=S.blend,d++,l(b,d,o(b,d-30,30)),d+=4);const t=S.cimg;l(b,d,(g=t.length)+(0==y?0:4)),d+=4;const n=d;u(b,d,0==y?"IDAT":"fdAT"),d+=4,0!=y&&(l(b,d,x++),d+=4),b.set(t,d),d+=g,l(b,d,o(b,n,d-n)),d+=4}return l(b,d,0),d+=4,u(b,d,"IEND"),d+=4,l(b,d,o(b,d-4,4)),d+=4,b.buffer}function c(e,t,n){for(let r=0;r<e.frames.length;r++){const i=e.frames[r];i.rect.width;const s=i.rect.height,a=new Uint8Array(s*i.bpl+s);i.cimg=f(i.img,s,i.bpp,i.bpl,a,t,n)}}function u(t,n,r,i,s){const a=s[0],l=s[1],c=s[2],u=s[3],f=s[4],p=s[5];let g=6,v=8,y=255;for(var b=0;b<t.length;b++){const e=new Uint8Array(t[b]);for(var w=e.length,x=0;x<w;x+=4)y&=e[x+3]}const S=255!=y,k=function(t,n,r,i,s,a){const o=[];for(var l=0;l<t.length;l++){const d=new Uint8Array(t[l]),f=new Uint32Array(d.buffer);var c;let m=0,g=0,v=n,y=r,b=i?1:0;if(0!=l){const w=a||i||1==l||0!=o[l-2].dispose?1:2;let x=0,S=1e9;for(let e=0;e<w;e++){var u=new Uint8Array(t[l-1-e]);const i=new Uint32Array(t[l-1-e]);let a=n,o=r,c=-1,d=-1;for(let e=0;e<r;e++)for(let t=0;t<n;t++)f[p=e*n+t]!=i[p]&&(t<a&&(a=t),t>c&&(c=t),e<o&&(o=e),e>d&&(d=e));-1==c&&(a=o=c=d=0),s&&(1==(1&a)&&a--,1==(1&o)&&o--);const h=(c-a+1)*(d-o+1);h<S&&(S=h,x=e,m=a,g=o,v=c-a+1,y=d-o+1)}u=new Uint8Array(t[l-1-x]),1==x&&(o[l-1].dispose=2),c=new Uint8Array(v*y*4),e(u,n,r,c,v,y,-m,-g,0),b=e(d,n,r,c,v,y,-m,-g,3)?1:0,1==b?h(d,n,r,c,{x:m,y:g,width:v,height:y}):e(d,n,r,c,v,y,-m,-g,0)}else c=d.slice(0);o.push({rect:{x:m,y:g,width:v,height:y},img:c,blend:b,dispose:0})}if(i)for(l=0;l<o.length;l++){if(1==(m=o[l]).blend)continue;const e=m.rect,i=o[l-1].rect,a=Math.min(e.x,i.x),c=Math.min(e.y,i.y),u={x:a,y:c,width:Math.max(e.x+e.width,i.x+i.width)-a,height:Math.max(e.y+e.height,i.y+i.height)-c};o[l-1].dispose=1,l-1!=0&&d(t,n,r,o,l-1,u,s),d(t,n,r,o,l,u,s)}let f=0;if(1!=t.length)for(var p=0;p<o.length;p++){var m;f+=(m=o[p]).rect.width*m.rect.height}return o}(t,n,r,a,l,c),C={},E=[],_=[];if(0!=i){const e=[];for(x=0;x<k.length;x++)e.push(k[x].img.buffer);const t=function(e){let t=0;for(var n=0;n<e.length;n++)t+=e[n].byteLength;const r=new Uint8Array(t);let i=0;for(n=0;n<e.length;n++){const t=new Uint8Array(e[n]),s=t.length;for(let e=0;e<s;e+=4){let n=t[e],s=t[e+1],a=t[e+2];const o=t[e+3];0==o&&(n=s=a=0),r[i+e]=n,r[i+e+1]=s,r[i+e+2]=a,r[i+e+3]=o}i+=s}return r.buffer}(e),n=m(t,i);for(x=0;x<n.plte.length;x++)E.push(n.plte[x].est.rgba);let r=0;for(x=0;x<k.length;x++){const e=(I=k[x]).img.length;var N=new Uint8Array(n.inds.buffer,r>>2,e>>2);_.push(N);const t=new Uint8Array(n.abuf,r,e);p&&o(I.img,I.rect.width,I.rect.height,E,t,N),I.img.set(t),r+=e}}else for(b=0;b<k.length;b++){var I=k[b];const e=new Uint32Array(I.img.buffer);var T=I.rect.width;for(w=e.length,N=new Uint8Array(w),_.push(N),x=0;x<w;x++){const t=e[x];if(0!=x&&t==e[x-1])N[x]=N[x-1];else if(x>T&&t==e[x-T])N[x]=N[x-T];else{let e=C[t];if(null==e&&(C[t]=e=E.length,E.push(t),E.length>=300))break;N[x]=e}}}const A=E.length;for(A<=256&&0==f&&(v=A<=2?1:A<=4?2:A<=16?4:8,v=Math.max(v,u)),b=0;b<k.length;b++){(I=k[b]).rect.x,I.rect.y,T=I.rect.width;const e=I.rect.height;let t=I.img;new Uint32Array(t.buffer);let n=4*T,r=4;if(A<=256&&0==f){n=Math.ceil(v*T/8);var j=new Uint8Array(n*e);const i=_[b];for(let t=0;t<e;t++){x=t*n;const e=t*T;if(8==v)for(var P=0;P<T;P++)j[x+P]=i[e+P];else if(4==v)for(P=0;P<T;P++)j[x+(P>>1)]|=i[e+P]<<4-4*(1&P);else if(2==v)for(P=0;P<T;P++)j[x+(P>>2)]|=i[e+P]<<6-2*(3&P);else if(1==v)for(P=0;P<T;P++)j[x+(P>>3)]|=i[e+P]<<7-1*(7&P)}t=j,g=3,r=1}else if(0==S&&1==k.length){j=new Uint8Array(T*e*3);const i=T*e;for(x=0;x<i;x++){const e=3*x,n=4*x;j[e]=t[n],j[e+1]=t[n+1],j[e+2]=t[n+2]}t=j,g=2,r=3,n=3*T}I.img=t,I.bpl=n,I.bpp=r}return{ctype:g,depth:v,plte:E,frames:k}}function d(t,n,r,i,s,a,o){const l=Uint8Array,c=Uint32Array,u=new l(t[s-1]),d=new c(t[s-1]),f=s+1<t.length?new l(t[s+1]):null,p=new l(t[s]),m=new c(p.buffer);let g=n,v=r,y=-1,b=-1;for(let e=0;e<a.height;e++)for(let t=0;t<a.width;t++){const r=a.x+t,o=a.y+e,l=o*n+r,c=m[l];0==c||0==i[s-1].dispose&&d[l]==c&&(null==f||0!=f[4*l+3])||(r<g&&(g=r),r>y&&(y=r),o<v&&(v=o),o>b&&(b=o))}-1==y&&(g=v=y=b=0),o&&(1==(1&g)&&g--,1==(1&v)&&v--),a={x:g,y:v,width:y-g+1,height:b-v+1};const w=i[s];w.rect=a,w.blend=1,w.img=new Uint8Array(a.width*a.height*4),0==i[s-1].dispose?(e(u,n,r,w.img,a.width,a.height,-a.x,-a.y,0),h(p,n,r,w.img,a)):e(p,n,r,w.img,a.width,a.height,-a.x,-a.y,0)}function h(t,n,r,i,s){e(t,n,r,i,s.width,s.height,-s.x,-s.y,2)}function f(e,t,n,r,i,s,a){const o=[];let l,c=[0,1,2,3,4];-1!=s?c=[s]:(t*r>5e5||1==n)&&(c=[0]),a&&(l={level:0});const u=Ay;for(var d=0;d<c.length;d++){for(let s=0;s<t;s++)p(i,e,s,r,n,c[d]);o.push(u.deflate(i,l))}let h,f=1e9;for(d=0;d<o.length;d++)o[d].length<f&&(h=d,f=o[d].length);return o[h]}function p(e,t,r,i,s,a){const o=r*i;let l=o+r;if(e[l]=a,l++,0==a)if(i<500)for(var c=0;c<i;c++)e[l+c]=t[o+c];else e.set(new Uint8Array(t.buffer,o,i),l);else if(1==a){for(c=0;c<s;c++)e[l+c]=t[o+c];for(c=s;c<i;c++)e[l+c]=t[o+c]-t[o+c-s]+256&255}else if(0==r){for(c=0;c<s;c++)e[l+c]=t[o+c];if(2==a)for(c=s;c<i;c++)e[l+c]=t[o+c];if(3==a)for(c=s;c<i;c++)e[l+c]=t[o+c]-(t[o+c-s]>>1)+256&255;if(4==a)for(c=s;c<i;c++)e[l+c]=t[o+c]-n(t[o+c-s],0,0)+256&255}else{if(2==a)for(c=0;c<i;c++)e[l+c]=t[o+c]+256-t[o+c-i]&255;if(3==a){for(c=0;c<s;c++)e[l+c]=t[o+c]+256-(t[o+c-i]>>1)&255;for(c=s;c<i;c++)e[l+c]=t[o+c]+256-(t[o+c-i]+t[o+c-s]>>1)&255}if(4==a){for(c=0;c<s;c++)e[l+c]=t[o+c]+256-n(0,t[o+c-i],0)&255;for(c=s;c<i;c++)e[l+c]=t[o+c]+256-n(t[o+c-s],t[o+c-i],t[o+c-s-i])&255}}}function m(e,t){const n=new Uint8Array(e),r=n.slice(0),i=new Uint32Array(r.buffer),s=g(r,t),a=s[0],o=s[1],l=n.length,c=new Uint8Array(l>>2);let u;if(n.length<2e7)for(var d=0;d<l;d+=4)u=v(a,h=n[d]*(1/255),f=n[d+1]*(1/255),p=n[d+2]*(1/255),m=n[d+3]*(1/255)),c[d>>2]=u.ind,i[d>>2]=u.est.rgba;else for(d=0;d<l;d+=4){var h=n[d]*(1/255),f=n[d+1]*(1/255),p=n[d+2]*(1/255),m=n[d+3]*(1/255);for(u=a;u.left;)u=y(u.est,h,f,p,m)<=0?u.left:u.right;c[d>>2]=u.ind,i[d>>2]=u.est.rgba}return{abuf:r.buffer,inds:c,plte:o}}function g(e,t,n){null==n&&(n=1e-4);const r=new Uint32Array(e.buffer),i={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=x(e,i.i0,i.i1),i.est=S(i.bst);const s=[i];for(;s.length<t;){let t=0,i=0;for(var a=0;a<s.length;a++)s[a].est.L>t&&(t=s[a].est.L,i=a);if(t<n)break;const o=s[i],l=b(e,r,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=l||o.i1<=l){o.est.L=0;continue}const c={i0:o.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};c.bst=x(e,c.i0,c.i1),c.est=S(c.bst);const u={i0:l,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(u.bst={R:[],m:[],N:o.bst.N-c.bst.N},a=0;a<16;a++)u.bst.R[a]=o.bst.R[a]-c.bst.R[a];for(a=0;a<4;a++)u.bst.m[a]=o.bst.m[a]-c.bst.m[a];u.est=S(u.bst),o.left=c,o.right=u,s[i]=c,s.push(u)}for(s.sort(((e,t)=>t.bst.N-e.bst.N)),a=0;a<s.length;a++)s[a].ind=a;return[i,s]}function v(e,t,n,r,i){if(null==e.left)return e.tdst=function(e,t,n,r,i){const s=t-e[0],a=n-e[1],o=r-e[2],l=i-e[3];return s*s+a*a+o*o+l*l}(e.est.q,t,n,r,i),e;const s=y(e.est,t,n,r,i);let a=e.left,o=e.right;s>0&&(a=e.right,o=e.left);const l=v(a,t,n,r,i);if(l.tdst<=s*s)return l;const c=v(o,t,n,r,i);return c.tdst<l.tdst?c:l}function y(e,t,n,r,i){const{e:s}=e;return s[0]*t+s[1]*n+s[2]*r+s[3]*i-e.eMq}function b(e,t,n,r,i,s){for(r-=4;n<r;){for(;w(e,n,i)<=s;)n+=4;for(;w(e,r,i)>s;)r-=4;if(n>=r)break;const a=t[n>>2];t[n>>2]=t[r>>2],t[r>>2]=a,n+=4,r-=4}for(;w(e,n,i)>s;)n-=4;return n+4}function w(e,t,n){return e[t]*n[0]+e[t+1]*n[1]+e[t+2]*n[2]+e[t+3]*n[3]}function x(e,t,n){const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],s=n-t>>2;for(let a=t;a<n;a+=4){const t=e[a]*(1/255),n=e[a+1]*(1/255),s=e[a+2]*(1/255),o=e[a+3]*(1/255);i[0]+=t,i[1]+=n,i[2]+=s,i[3]+=o,r[0]+=t*t,r[1]+=t*n,r[2]+=t*s,r[3]+=t*o,r[5]+=n*n,r[6]+=n*s,r[7]+=n*o,r[10]+=s*s,r[11]+=s*o,r[15]+=o*o}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:i,N:s}}function S(e){const{R:t}=e,{m:n}=e,{N:r}=e,i=n[0],s=n[1],a=n[2],o=n[3],l=0==r?0:1/r,c=[t[0]-i*i*l,t[1]-i*s*l,t[2]-i*a*l,t[3]-i*o*l,t[4]-s*i*l,t[5]-s*s*l,t[6]-s*a*l,t[7]-s*o*l,t[8]-a*i*l,t[9]-a*s*l,t[10]-a*a*l,t[11]-a*o*l,t[12]-o*i*l,t[13]-o*s*l,t[14]-o*a*l,t[15]-o*o*l],u=c,d=k;let h=[Math.random(),Math.random(),Math.random(),Math.random()],f=0,p=0;if(0!=r)for(let g=0;g<16&&(h=d.multVec(u,h),p=Math.sqrt(d.dot(h,h)),h=d.sml(1/p,h),!(0!=g&&Math.abs(p-f)<1e-9));g++)f=p;const m=[i*l,s*l,a*l,o*l];return{Cov:c,q:m,e:h,L:f,eMq255:d.dot(d.sml(255,m),h),eMq:d.dot(h,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0]))>>>0}}var k={multVec:(e,t)=>[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]],dot:(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],sml:(e,t)=>[e*t[0],e*t[1],e*t[2],e*t[3]]};jy.encode=function(e,t,n,r,i,s,a){null==r&&(r=0),null==a&&(a=!1);const o=u(e,t,n,r,[!1,!1,!1,0,a,!1]);return c(o,-1),l(o,t,n,i,s)},jy.encodeLL=function(e,t,n,r,i,s,a,o){const u={ctype:0+(1==r?0:2)+(0==i?0:4),depth:s,frames:[]},d=(r+i)*s,h=d*t;for(let l=0;l<e.length;l++)u.frames.push({rect:{x:0,y:0,width:t,height:n},img:new Uint8Array(e[l]),blend:0,dispose:1,bpp:Math.ceil(d/8),bpl:Math.ceil(h/8)});return c(u,0,!0),l(u,t,n,a,o)},jy.encode.compress=u,jy.encode.dither=o,jy.quantize=m,jy.quantize.getKDtree=g,jy.quantize.getNearest=v}();const Py={toArrayBuffer(e,t){const n=e.width,r=e.height,i=n<<2,s=e.getContext("2d").getImageData(0,0,n,r),a=new Uint32Array(s.data.buffer),o=(32*n+31)/32<<2,l=o*r,c=122+l,u=new ArrayBuffer(c),d=new DataView(u),h=1<<20;let f,p,m,g,v=h,y=0,b=0,w=0;function x(e){d.setUint16(b,e,!0),b+=2}function S(e){d.setUint32(b,e,!0),b+=4}function k(e){b+=e}x(19778),S(c),k(4),S(122),S(108),S(n),S(-r>>>0),x(1),x(32),S(3),S(l),S(2835),S(2835),k(8),S(16711680),S(65280),S(255),S(4278190080),S(1466527264),function e(){for(;y<r&&v>0;){for(g=122+y*o,f=0;f<i;)v--,p=a[w++],m=p>>>24,d.setUint32(g+f,p<<8|m),f+=4;y++}w<a.length?(v=h,setTimeout(e,Py._dly)):t(u)}()},toBlob(e,t){this.toArrayBuffer(e,(e=>{t(new Blob([e],{type:"image/bmp"}))}))},_dly:9};var Dy={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Ry={[Dy.CHROME]:16384,[Dy.FIREFOX]:11180,[Dy.DESKTOP_SAFARI]:16384,[Dy.IE]:8192,[Dy.IOS]:4096,[Dy.ETC]:8192};const Oy="undefined"!=typeof window,Ly="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,My=Oy&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Uy=(Oy||Ly)&&(My&&My.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),Fy=(Oy||Ly)&&(My&&My.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function By(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise((r=>{const i=e.split(","),s=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let o=a.length;const l=new Uint8Array(o);for(;o--;)l[o]=a.charCodeAt(o);const c=new Blob([l],{type:s});c.name=t,c.lastModified=n,r(c)}))}function Vy(e){return new Promise(((t,n)=>{const r=new Fy;r.onload=()=>t(r.result),r.onerror=e=>n(e),r.readAsDataURL(e)}))}function zy(e){return new Promise(((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=e=>n(e),r.src=e}))}function $y(){if(void 0!==$y.cachedResult)return $y.cachedResult;let e=Dy.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=Dy.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=Dy.IOS:/Safari/i.test(t)?e=Dy.DESKTOP_SAFARI:/Firefox/i.test(t)?e=Dy.FIREFOX:(/MSIE/i.test(t)||1==!!document.documentMode)&&(e=Dy.IE),$y.cachedResult=e,$y.cachedResult}function qy(e,t){const n=$y(),r=Ry[n];let i=e,s=t,a=i*s;const o=i>s?s/i:i/s;for(;a>r*r;){const e=(r+i)/2,t=(r+s)/2;e<t?(s=t,i=t*o):(s=e*o,i=e),a=i*s}return{width:i,height:s}}function Hy(e,t){let n,r;try{if(n=new OffscreenCanvas(e,t),r=n.getContext("2d"),null===r)throw new Error("getContext of OffscreenCanvas returns null")}catch(e){n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=e,n.height=t,[n,r]}function Wy(e,t){const{width:n,height:r}=qy(e.width,e.height),[i,s]=Hy(n,r);return t&&/jpe?g/.test(t)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(e,0,0,i.width,i.height),i}function Gy(){return void 0!==Gy.cachedResult||(Gy.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),Gy.cachedResult}function Ky(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){let i,s;var a=function(){try{return s=Wy(i,t.fileType||e.type),n([i,s])}catch(e){return r(e)}},o=function(t){try{var n=function(e){try{throw e}catch(e){return r(e)}};try{let t;return Vy(e).then((function(e){try{return t=e,zy(t).then((function(e){try{return i=e,function(){try{return a()}catch(e){return r(e)}}()}catch(e){return n(e)}}),n)}catch(e){return n(e)}}),n)}catch(e){n(e)}}catch(e){return r(e)}};try{if(Gy()||[Dy.DESKTOP_SAFARI,Dy.MOBILE_SAFARI].includes($y()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(e){try{return i=e,a()}catch(e){return o()}}),o)}catch(e){o()}}))}function Qy(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise((function(s,a){let o;if("image/png"===t){let c,u,d;return c=e.getContext("2d"),({data:u}=c.getImageData(0,0,e.width,e.height)),d=jy.encode([u.buffer],e.width,e.height,4096*i),o=new Blob([d],{type:t}),o.name=n,o.lastModified=r,l.call(this)}{if("image/bmp"===t)return new Promise((t=>Py.toBlob(e,t))).then(function(e){try{return o=e,o.name=n,o.lastModified=r,h.call(this)}catch(e){return a(e)}}.bind(this),a);{if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:i}).then(function(e){try{return o=e,o.name=n,o.lastModified=r,f.call(this)}catch(e){return a(e)}}.bind(this),a);{let p;return p=e.toDataURL(t,i),By(p,n,r).then(function(e){try{return o=e,f.call(this)}catch(e){return a(e)}}.bind(this),a)}function f(){return h.call(this)}}function h(){return l.call(this)}}function l(){return s(o)}}))}function Xy(e){e.width=0,e.height=0}function Yy(){return new Promise((function(e,t){let n,r,i,s,a;return void 0!==Yy.cachedResult?e(Yy.cachedResult):(n="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",By("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(n){try{return r=n,Ky(r).then((function(n){try{return i=n[1],Qy(i,r.type,r.name,r.lastModified).then((function(n){try{return s=n,Xy(i),Ky(s).then((function(n){try{return a=n[0],Yy.cachedResult=1===a.width&&2===a.height,e(Yy.cachedResult)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t))}))}function Jy(e){return new Promise(((t,n)=>{const r=new Fy;r.onload=e=>{const n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return t(-2);const r=n.byteLength;let i=2;for(;i<r;){if(n.getUint16(i+2,!1)<=8)return t(-1);const e=n.getUint16(i,!1);if(i+=2,65505==e){if(1165519206!=n.getUint32(i+=2,!1))return t(-1);const e=18761==n.getUint16(i+=6,!1);i+=n.getUint32(i+4,e);const r=n.getUint16(i,e);i+=2;for(let s=0;s<r;s++)if(274==n.getUint16(i+12*s,e))return t(n.getUint16(i+12*s+8,e))}else{if(65280!=(65280&e))break;i+=n.getUint16(i,!1)}}return t(-1)},r.onerror=e=>n(e),r.readAsArrayBuffer(e)}))}function Zy(e,t){const{width:n}=e,{height:r}=e,{maxWidthOrHeight:i}=t;let s,a=e;return isFinite(i)&&(n>i||r>i)&&([a,s]=Hy(n,r),n>r?(a.width=i,a.height=r/n*i):(a.width=n/r*i,a.height=i),s.drawImage(e,0,0,a.width,a.height),Xy(e)),a}function eb(e,t){const{width:n}=e,{height:r}=e,[i,s]=Hy(n,r);switch(t>4&&t<9?(i.width=r,i.height=n):(i.width=n,i.height=r),t){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(e,0,0,n,r),Xy(e),i}function tb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(r,i){let s,a,o,l,c,u,d,h,f,p,m,g,v,y,b,w,x,S,k,C;function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;if(t.signal&&t.signal.aborted)throw t.signal.reason;s+=e,t.onProgress(Math.min(s,100))}function _(e){if(t.signal&&t.signal.aborted)throw t.signal.reason;s=Math.min(Math.max(e,s),100),t.onProgress(s)}return s=n,a=t.maxIteration||10,o=1024*t.maxSizeMB*1024,E(),Ky(e,t).then(function(n){try{return[,l]=n,E(),c=Zy(l,t),E(),new Promise((function(n,r){var i;if(!(i=t.exifOrientation))return Jy(e).then(function(e){try{return i=e,s.call(this)}catch(e){return r(e)}}.bind(this),r);function s(){return n(i)}return s.call(this)})).then(function(n){try{return u=n,E(),Yy().then(function(n){try{return d=n?c:eb(c,u),E(),h=t.initialQuality||1,f=t.fileType||e.type,Qy(d,f,e.name,e.lastModified,h).then(function(n){try{{if(p=n,E(),m=p.size>o,g=p.size>e.size,!m&&!g)return _(100),r(p);var s;function N(){if(a--&&(b>o||b>v)){let t,n;return t=C?.95*k.width:k.width,n=C?.95*k.height:k.height,[x,S]=Hy(t,n),S.drawImage(k,0,0,t,n),h*="image/png"===f?.85:.95,Qy(x,f,e.name,e.lastModified,h).then((function(e){try{return w=e,Xy(k),k=x,b=w.size,_(Math.min(99,Math.floor((y-b)/(y-o)*100))),N}catch(e){return i(e)}}),i)}return[1]}return v=e.size,y=p.size,b=y,k=d,C=!t.alwaysKeepResolution&&m,(s=function(e){for(;e;){if(e.then)return void e.then(s,i);try{if(e.pop){if(e.length)return e.pop()?I.call(this):e;e=N}else e=e.call(this)}catch(e){return i(e)}}}.bind(this))(N);function I(){return Xy(k),Xy(x),Xy(c),Xy(d),Xy(l),_(100),r(w)}}}catch(u){return i(u)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}))}let nb;function rb(e,t){return new Promise(((n,r)=>{nb||(nb=function(e){const t=[];return"function"==typeof e?t.push(`(${e})()`):t.push(e),URL.createObjectURL(new Blob(t))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));const i=new Worker(nb);i.addEventListener("message",(function(e){if(t.signal&&t.signal.aborted)i.terminate();else if(void 0===e.data.progress){if(e.data.error)return r(new Error(e.data.error)),void i.terminate();n(e.data.file),i.terminate()}else t.onProgress(e.data.progress)})),i.addEventListener("error",r),t.signal&&t.signal.addEventListener("abort",(()=>{r(t.signal.reason),i.terminate()})),i.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function ib(e,t){return new Promise((function(n,r){let i,s,a,o,l,c;if(i={...t},a=0,({onProgress:o}=i),i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l="boolean"!=typeof i.useWebWorker||i.useWebWorker,delete i.useWebWorker,i.onProgress=e=>{a=e,"function"==typeof o&&o(a)},!(e instanceof Blob||e instanceof Uy))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return r(new Error("The file given is not an image"));if(c="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!l||"function"!=typeof Worker||c)return tb(e,i).then(function(e){try{return s=e,h.call(this)}catch(e){return r(e)}}.bind(this),r);var u=function(){try{return h.call(this)}catch(e){return r(e)}}.bind(this),d=function(t){try{return tb(e,i).then((function(e){try{return s=e,u()}catch(e){return r(e)}}),r)}catch(e){return r(e)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",rb(e,i).then((function(e){try{return s=e,u()}catch(e){return d()}}),d)}catch(e){d()}function h(){try{s.name=e.name,s.lastModified=e.lastModified}catch(e){}try{i.preserveExif&&"image/jpeg"===e.type&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(s=_y(e,s))}catch(e){}return n(s)}}))}ib.getDataUrlFromFile=Vy,ib.getFilefromDataUrl=By,ib.loadImage=zy,ib.drawImageInCanvas=Wy,ib.drawFileInCanvas=Ky,ib.canvasToFile=Qy,ib.getExifOrientation=Jy,ib.handleMaxWidthOrHeight=Zy,ib.followExifOrientation=eb,ib.cleanupCanvasMemory=Xy,ib.isAutoOrientationInBrowser=Yy,ib.approximateBelowMaximumCanvasSizeOfBrowser=qy,ib.copyExifWithoutOrientation=_y,ib.getBrowserName=$y,ib.version="2.0.2";const sb=e=>{switch(e){case"OpenWater":return"\ud83c\udd5e";case"Advance":return"\ud83c\udd50";case"Rescue":return"\ud83c\udd61";case"DiveMaster":return"\ud83c\udd5c";case"Instructor":return"\ud83c\udd58";case"Trainer":return"\ud83c\udd63";default:return"\ud83d\udc64"}};function ab(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)([]),o=hm(),l=ny(),c=ee(),{user:u,userData:d,loading:h}=(0,t.useContext)(Dg);return(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto mt-10 px-4",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\u270d\ufe0f \uc0c8 \uae00 \uc791\uc131"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h)alert("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824 \uc8fc\uc138\uc694.");else if(u&&null!==d&&void 0!==d&&d.nickname)if(e.trim()&&r.trim())try{const t=await Promise.all(s.map((async(e,t)=>{try{const n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},r=await ib(e,n),i=encodeURIComponent(e.name.replace(/\s+/g,"_")),s=ty(l,`freeboard/${Date.now()}_${i}`);console.log(`\ud83d\udce4 [${t+1}] Uploading: ${s.fullPath}`),await Jv(s,r);const a=await Zv(s);return console.log(`\u2705 [${t+1}] Uploaded URL:`,a),a}catch(n){throw console.error(`\u274c \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328 (${e.name}):`,n),n}}))),n={title:e,content:r,images:t,author:d.nickname,level:d.level||"",levelIcon:sb(d.level),authorUid:u.uid,createdAt:Ig(),likes:0,likedBy:[],views:0};console.log("\ud83d\udcdd \uc800\uc7a5\ub420 \uac8c\uc2dc\uae00 \ub370\uc774\ud130:",n),await kg(sm(o,"community","free","posts"),n),alert("\uc791\uc131 \uc644\ub8cc!"),c("/community/free")}catch(n){console.error("\ud83d\udd25 \uc804\uccb4 \uc5c5\ub85c\ub4dc \uc624\ub958:",n),alert("\uc791\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+n.message)}else alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694");else alert("\ub85c\uadf8\uc778 \ub610\ub294 \ub2c9\ub124\uc784 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},className:"bg-white p-6 shadow rounded space-y-4",children:[(0,Pg.jsx)("input",{type:"text",placeholder:"\uc81c\ubaa9",value:e,onChange:e=>n(e.target.value),className:"w-full p-3 border rounded",required:!0}),(0,Pg.jsx)("textarea",{placeholder:"\ub0b4\uc6a9",value:r,onChange:e=>i(e.target.value),className:"w-full p-3 border rounded min-h-[150px]",required:!0}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-2 font-semibold",children:"\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc (\ucd5c\ub300 5\uc7a5, 1MB \uc774\ud558):"}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);t.length+s.length>5?alert("\uc774\ubbf8\uc9c0\ub294 \ucd5c\ub300 5\uc7a5\uae4c\uc9c0 \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."):a((e=>[...e,...t]))},className:"block"}),(0,Pg.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:s.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative border p-2 rounded bg-gray-50 text-sm text-gray-700",children:["\ud83d\udcf7 ",e.name,(0,Pg.jsx)("button",{type:"button",onClick:()=>{return e=t,void a((t=>t.filter(((t,n)=>n!==e))));var e},className:"absolute top-0 right-0 text-red-500 font-bold px-2",title:"\uc0ad\uc81c",children:"\u2715"})]},t)))})]}),(0,Pg.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600",children:"\uc791\uc131"})]})]})}function ob(){const{id:e}=te(),n=ee(),r=hm(),i=ny(),{user:s,userData:a,loading:o}=(0,t.useContext)(Dg),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)([]),[p,m]=(0,t.useState)([]),[g,v]=(0,t.useState)(!0);(0,t.useEffect)((()=>{if(o||!a)return;(async()=>{try{const t=am(r,"community","free","posts",e),i=await vg(t);if(i.exists()){const e=i.data();if((null===a||void 0===a?void 0:a.nickname)!==e.author)return alert("\uc791\uc131\uc790\ub9cc \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),void n(-1);c(e.title),d(e.content),f(e.images||[]),v(!1)}else alert("\uac8c\uc2dc\uae00\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),n(-1)}catch(t){console.error("\ud83d\udd25 \uac8c\uc2dc\uae00 \ub85c\ub529 \uc624\ub958:",t),alert("\uac8c\uc2dc\uae00\uc744 \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),n(-1)}})()}),[r,e,a,n,o]);return o||g?(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."}):(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto mt-10 px-4",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\u270f\ufe0f \uac8c\uc2dc\uae00 \uc218\uc815"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l.trim()&&u.trim())try{const t=await Promise.all(p.map((async e=>{const t=await ib(e,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),n=encodeURIComponent(e.name.replace(/\s+/g,"_")),r=ty(i,`freeboard/${Date.now()}_${n}`);return await Jv(r,t),await Zv(r)})));await xg(am(r,"community","free","posts",e),{title:l,content:u,images:[...h,...t]}),alert("\uc218\uc815 \uc644\ub8cc!"),n(`/community/free/${e}`)}catch(s){console.error("\ud83d\udd25 \uac8c\uc2dc\uae00 \uc218\uc815 \uc2e4\ud328:",s),alert("\uac8c\uc2dc\uae00 \uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694")},className:"bg-white p-6 shadow rounded space-y-4",children:[(0,Pg.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full p-3 border rounded",required:!0}),(0,Pg.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),className:"w-full p-3 border rounded min-h-[150px]",required:!0}),h.length>0&&(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("p",{className:"font-semibold mb-2",children:"\uae30\uc874 \uc774\ubbf8\uc9c0"}),(0,Pg.jsx)("div",{className:"flex flex-wrap gap-3",children:h.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative",children:[(0,Pg.jsx)("img",{src:e,alt:`img-${t}`,className:"w-32 h-32 object-cover rounded border"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>(e=>{f((t=>t.filter((t=>t!==e))))})(e),className:"absolute top-1 right-1 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"\u274c"})]},t)))})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-2 font-semibold",children:"\uc0c8 \uc774\ubbf8\uc9c0 \ucd94\uac00 (\ucd5c\ub300 5\uc7a5)"}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);h.length+p.length+t.length>5?alert("\uc774\ubbf8\uc9c0\ub294 \ucd5c\ub300 5\uc7a5\uae4c\uc9c0 \uac00\ub2a5\ud569\ub2c8\ub2e4."):m((e=>[...e,...t]))},className:"block"}),(0,Pg.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:p.map(((e,t)=>(0,Pg.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-700 bg-gray-100 px-2 py-1 rounded",children:[(0,Pg.jsxs)("span",{children:["\ud83d\udcf7 ",e.name]}),(0,Pg.jsx)("button",{type:"button",onClick:()=>{return e=t,void m((t=>t.filter(((t,n)=>n!==e))));var e},className:"text-red-600 hover:underline",children:"\u274c"})]},t)))})]}),(0,Pg.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600",children:"\uc800\uc7a5\ud558\uae30"})]})]})}function lb(){var e,n;const{id:r}=te(),i=ee(),s=hm(),{user:a,userData:o,loading:l}=(0,t.useContext)(Dg),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)([]),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)({}),[v,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(l||!r)return;(async()=>{try{const e=am(s,"community","free","posts",r),t=await vg(e);if(!t.exists())return alert("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uac8c\uc2dc\uae00\uc785\ub2c8\ub2e4."),i("/community/free");const n=t.data();let o="\ud83d\udc64",l=n.author;if(n.authorUid){const e=am(s,"users",n.authorUid),t=await vg(e);t.exists()&&(o=t.data().levelIcon||"\ud83d\udc64",l=t.data().nickname||n.author)}if(u({id:t.id,...n,levelIcon:o,nickname:l}),null!==a&&void 0!==a&&a.uid){const t=am(s,"community","free","posts",r,"views",a.uid);(await vg(t)).exists()||(await wg(t,{viewedAt:Ig()}),await xg(e,{views:jg(1)}))}}catch(e){console.error("\ud83d\udd25 \uac8c\uc2dc\uae00 \ub85c\ub529 \uc2e4\ud328:",e)}})()}),[s,r,i,a,l]),(0,t.useEffect)((()=>{if(l||!r)return;const e=Cg(eg(sm(s,"community","free","posts",r,"comments"),sg("createdAt","asc")),(async e=>{try{const t=await Promise.all(e.docs.map((async e=>{const t=e.data();let n="\ud83d\udc64";if(t.authorUid){const e=am(s,"users",t.authorUid),r=await vg(e);r.exists()&&(n=r.data().levelIcon||"\ud83d\udc64")}const r=await x(e.id);return{id:e.id,...t,levelIcon:n,replies:r}})));h(t)}catch(t){console.error("\ud83d\udd25 \ub313\uae00 \ub85c\ub529 \uc2e4\ud328:",t)}}));return()=>e()}),[s,r,l]);const x=async e=>{try{const t=eg(sm(s,"community","free","posts",r,"comments",e,"replies"),sg("createdAt","asc")),n=await bg(t);return Promise.all(n.docs.map((async e=>{const t=e.data();let n="\ud83d\udc64";if(t.authorUid){const e=am(s,"users",t.authorUid),r=await vg(e);r.exists()&&(n=r.data().levelIcon||"\ud83d\udc64")}return{id:e.id,...t,levelIcon:n}})))}catch(t){return console.error("\ud83d\udd25 \ub300\ub313\uae00 \ub85c\ub529 \uc2e4\ud328:",t),[]}};return c?(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto mt-10 px-4",children:[(0,Pg.jsx)(Ie,{to:"/community/free",className:"text-blue-600 hover:underline text-sm",children:"\u2190 \ubaa9\ub85d\uc73c\ub85c \uac00\uae30"}),(0,Pg.jsxs)("div",{className:"bg-gray-100 p-4 rounded mt-4",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-2",children:c.title}),(0,Pg.jsxs)("div",{className:"text-sm text-gray-600",children:["\uc791\uc131\uc790: ",(0,Pg.jsx)("span",{className:"mr-1",children:c.levelIcon}),c.nickname," / \uc791\uc131\uc77c: ",null===(e=c.createdAt)||void 0===e?void 0:e.toDate().toLocaleString()," / \ucd94\ucc9c: ",c.likes||0," / \uc870\ud68c\uc218: ",c.views||0,(0,Pg.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(null===a||void 0===a?void 0:a.uid)&&!v&&(0,Pg.jsx)("button",{onClick:async()=>{try{var e;const t=am(s,"community","free","posts",r),n=(await vg(t)).data();if(null!==(e=n.likedBy)&&void 0!==e&&e.includes(a.uid))return void alert("\uc774\ubbf8 \ucd94\ucc9c\ud558\uc168\uc2b5\ub2c8\ub2e4.");await xg(t,{likes:jg(1),likedBy:[...n.likedBy||[],a.uid]}),y(!0)}catch(t){console.error("\ud83d\udd25 \ucd94\ucc9c \ucc98\ub9ac \uc2e4\ud328:",t)}},className:"text-blue-600 hover:underline text-sm",children:"\ud83d\udc4d \ucd94\ucc9c\ud558\uae30"}),(null===a||void 0===a?void 0:a.uid)===c.authorUid&&(0,Pg.jsxs)(Pg.Fragment,{children:[(0,Pg.jsx)(Ie,{to:`/community/free/edit/${r}`,className:"text-sm text-green-600 hover:underline",children:"\u270f\ufe0f \uc218\uc815"}),(0,Pg.jsx)("button",{onClick:async()=>{if(window.confirm("\uac8c\uc2dc\uae00\uc744 \uc0ad\uc81c\ud560\uae4c\uc694?"))try{await Sg(am(s,"community","free","posts",r)),i("/community/free")}catch(e){console.error("\ud83d\udd25 \uac8c\uc2dc\uae00 \uc0ad\uc81c \uc2e4\ud328:",e)}},className:"text-sm text-red-500 hover:underline ml-2",children:"\ud83d\uddd1 \uc0ad\uc81c"})]})]})]})]}),(0,Pg.jsx)("div",{className:"space-y-4 my-6",children:null===(n=c.images)||void 0===n?void 0:n.map(((e,t)=>(0,Pg.jsx)("img",{src:e,alt:`img-${t}`,className:"w-full rounded"},t)))}),(0,Pg.jsx)("p",{className:"whitespace-pre-line text-gray-800 mb-10",children:c.content}),(0,Pg.jsx)("div",{className:"flex justify-end mb-4",children:(0,Pg.jsx)("button",{onClick:()=>i("/community/free"),className:"bg-blue-500 hover:bg-blue-600 text-white text-sm px-4 py-2 rounded",children:"\ud83d\udccb \ubaa9\ub85d\uc73c\ub85c \uac00\uae30"})}),(0,Pg.jsxs)("div",{className:"border-t pt-6",children:[(0,Pg.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["\ud83d\udcac \ub313\uae00 (",d.length,")"]}),d.map((e=>{var t,n;return(0,Pg.jsxs)("div",{className:"border-b pb-3 mb-6 text-sm",children:[(0,Pg.jsxs)("div",{className:"flex justify-between text-gray-600 mb-1",children:[(0,Pg.jsxs)("span",{children:[e.levelIcon," ",e.nickname||e.author]}),(0,Pg.jsx)("span",{children:null===(t=e.createdAt)||void 0===t?void 0:t.toDate().toLocaleString()})]}),(0,Pg.jsx)("p",{className:"text-gray-800",children:e.content}),(null===a||void 0===a?void 0:a.uid)===e.authorUid&&(0,Pg.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud560\uae4c\uc694?"))try{await Sg(am(s,"community","free","posts",r,"comments",e))}catch(t){console.error("\ud83d\udd25 \ub313\uae00 \uc0ad\uc81c \uc2e4\ud328:",t)}})(e.id),className:"text-xs text-red-500 hover:underline mt-1",children:"\uc0ad\uc81c"}),a&&(0,Pg.jsx)("div",{className:"mt-2",children:b===e.id?(0,Pg.jsxs)("form",{onSubmit:t=>(async(e,t)=>{e.preventDefault();const n=m[t];if(null!==n&&void 0!==n&&n.trim())try{await kg(sm(s,"community","free","posts",r,"comments",t,"replies"),{content:n,author:null===a||void 0===a?void 0:a.email,nickname:(null===o||void 0===o?void 0:o.nickname)||"",authorUid:null===a||void 0===a?void 0:a.uid,createdAt:Ig()}),g((e=>({...e,[t]:""}))),w(null)}catch(i){console.error("\ud83d\udd25 \ub2f5\uae00 \uc791\uc131 \uc2e4\ud328:",i)}})(t,e.id),className:"space-y-2",children:[(0,Pg.jsx)("textarea",{value:m[e.id]||"",onChange:t=>g((n=>({...n,[e.id]:t.target.value}))),className:"w-full border rounded p-2 min-h-[60px]",placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694"}),(0,Pg.jsxs)("div",{className:"flex gap-2",children:[(0,Pg.jsx)("button",{type:"submit",className:"bg-gray-500 text-white text-xs px-3 py-1 rounded hover:bg-gray-600",children:"\ub2f5\uae00 \uc791\uc131"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>w(null),className:"text-xs text-red-500 hover:underline",children:"\ucde8\uc18c"})]})]}):(0,Pg.jsx)("button",{onClick:()=>w(e.id),className:"text-xs text-blue-500 hover:underline",children:"\ub2f5\uae00\uc4f0\uae30"})}),(null===(n=e.replies)||void 0===n?void 0:n.length)>0&&(0,Pg.jsx)("div",{className:"mt-4 ml-4 space-y-3 border-l pl-4",children:e.replies.map((t=>{var n;return(0,Pg.jsxs)("div",{children:[(0,Pg.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,Pg.jsxs)("span",{children:[t.levelIcon," ",t.nickname||t.author]}),(0,Pg.jsx)("span",{children:null===(n=t.createdAt)||void 0===n?void 0:n.toDate().toLocaleString()})]}),(0,Pg.jsx)("p",{className:"text-gray-800",children:t.content}),(null===a||void 0===a?void 0:a.uid)===t.authorUid&&(0,Pg.jsx)("button",{onClick:()=>Sg(am(s,"community","free","posts",r,"comments",e.id,"replies",t.id)),className:"text-xs text-red-500 hover:underline mt-1",children:"\uc0ad\uc81c"})]},t.id)}))})]},e.id)})),a?(0,Pg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f.trim())try{await kg(sm(s,"community","free","posts",r,"comments"),{content:f,author:null===a||void 0===a?void 0:a.email,nickname:(null===o||void 0===o?void 0:o.nickname)||"",authorUid:null===a||void 0===a?void 0:a.uid,createdAt:Ig()}),p("")}catch(t){console.error("\ud83d\udd25 \ub313\uae00 \uc791\uc131 \uc2e4\ud328:",t)}},className:"space-y-2",children:[(0,Pg.jsx)("textarea",{value:f,onChange:e=>p(e.target.value),className:"w-full border rounded p-2 min-h-[80px]",placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-600 text-white px-4 py-2 rounded hover:bg-sky-700",children:"\ub313\uae00 \uc791\uc131"})]}):(0,Pg.jsx)("p",{className:"text-sm text-gray-500",children:"\u203b \ub85c\uadf8\uc778 \ud6c4 \ub313\uae00\uc744 \uc791\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})]}):(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."})}function cb(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),s=ee(),a=hm();return(0,Pg.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded shadow mt-8",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\ud83d\udce2 \uacf5\uc9c0\uc0ac\ud56d \uc791\uc131"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await wg(am(a,"community","free","notice"),{title:e,content:r,createdAt:Ig()}),alert("\uacf5\uc9c0\uc0ac\ud56d\uc774 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),s("/community/free")}catch(n){console.error("\uacf5\uc9c0 \uc791\uc131 \uc2e4\ud328:",n),alert("\uacf5\uc9c0 \ub4f1\ub85d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},children:[(0,Pg.jsx)("input",{type:"text",placeholder:"\uacf5\uc9c0 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",value:e,onChange:e=>n(e.target.value),className:"w-full mb-4 p-3 border rounded text-base",required:!0}),(0,Pg.jsx)("textarea",{placeholder:"\uacf5\uc9c0 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694",value:r,onChange:e=>i(e.target.value),className:"w-full mb-4 p-3 border rounded h-48 text-base",required:!0}),(0,Pg.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Pg.jsx)("button",{type:"button",onClick:()=>s(-1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400",children:"\ucde8\uc18c"}),(0,Pg.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\ub4f1\ub85d\ud558\uae30"})]})]})]})}function ub(){const[e,n]=(0,t.useState)([]),r=hm(),{user:i}=(0,t.useContext)(Dg);return(0,t.useEffect)((()=>{(async()=>{const e=eg(sm(r,"community","qna","posts"),sg("createdAt","desc")),t=await bg(e),i=await Promise.all(t.docs.map((async e=>{const t=e.data(),n=await bg(sm(r,"community","qna","posts",e.id,"comments"));let i="\ud83d\udc64";if(t.authorUid){const e=am(r,"users",t.authorUid),n=await vg(e);n.exists()&&(i=n.data().levelIcon||"\ud83d\udc64")}return{id:e.id,...t,commentCount:n.size,levelIcon:i}})));n(i)})()}),[r]),(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto mt-6 px-4",children:[(0,Pg.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,Pg.jsx)("h1",{className:"text-xl font-bold",children:"\u2753 \uc9c8\ubb38\uacfc \ub2f5\ubcc0"}),(0,Pg.jsx)(Ie,{to:"/community/qna/write",className:"bg-sky-500 text-white px-3 py-1.5 text-sm rounded hover:bg-sky-600",children:"\uc9c8\ubb38\ud558\uae30"})]}),(0,Pg.jsx)("div",{className:"overflow-x-auto",children:(0,Pg.jsxs)("table",{className:"min-w-full text-[0.95rem] leading-[1.8rem] text-center border border-gray-200",children:[(0,Pg.jsx)("thead",{className:"bg-gray-100 text-gray-700",children:(0,Pg.jsxs)("tr",{children:[(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\ubc88\ud638"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border text-left w-[45%]",children:"\uc81c\ubaa9"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-24",children:"\uc791\uc131\uc790"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-28",children:"\uc791\uc131\uc77c"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\ucd94\ucc9c"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\uc870\ud68c"})]})}),(0,Pg.jsx)("tbody",{children:e.map(((t,n)=>{var r;return(0,Pg.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:e.length-n}),(0,Pg.jsx)("td",{className:"py-2 px-2 border text-left truncate",children:(0,Pg.jsxs)(Ie,{to:`/community/qna/${t.id}`,className:"text-black hover:underline",children:[t.title,t.commentCount>0&&(0,Pg.jsxs)("span",{className:"text-sky-600 font-semibold",children:[" (",t.commentCount,")"]}),t.solutionId&&(0,Pg.jsx)("span",{className:"text-green-600 font-semibold ml-2",children:"[Solution]"})]})}),(0,Pg.jsxs)("td",{className:"py-2 px-2 border truncate",children:[t.levelIcon||"\ud83d\udc64"," ",t.nickname||t.author]}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:null===(r=t.createdAt)||void 0===r?void 0:r.toDate().toLocaleDateString("ko-KR")}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.likes||0}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.viewCount||0})]},t.id)}))})]})})]})}function db(){var e,n;const{id:r}=te(),i=hm(),s=ee(),{user:a,userData:o}=(0,t.useContext)(Dg),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)({}),[g,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(!0),[w,x]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{try{const e=am(i,"community","qna","posts",r),t=await vg(e);if(!t.exists())return alert("\uc9c8\ubb38\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),s("/community/qna");const n=t.data();if(null!==a&&void 0!==a&&a.uid){const t=am(i,"community","qna","posts",r,"views",a.uid);(await vg(t)).exists()||(await xg(e,{viewCount:jg(1)}),await wg(t,{viewedAt:Ig()}))}else await xg(e,{viewCount:jg(1)});let o="\ud83d\udc64";if(n.authorUid){const e=am(i,"users",n.authorUid),t=await vg(e);t.exists()&&(o=t.data().levelIcon||"\ud83d\udc64")}if(c({id:t.id,...n,levelIcon:o}),null!==a&&void 0!==a&&a.uid){const e=await vg(am(i,"community","qna","posts",r,"likes",a.uid));x(e.exists())}}catch(e){console.error("\ud83d\udd25 \uac8c\uc2dc\uae00 \ub85c\ub529 \uc2e4\ud328:",e)}})()}),[i,r,s,null===a||void 0===a?void 0:a.uid]),(0,t.useEffect)((()=>{const e=Cg(eg(sm(i,"community","qna","posts",r,"comments"),sg("createdAt","asc")),(()=>{S()}));return()=>e()}),[i,r]);const S=async()=>{try{const e=eg(sm(i,"community","qna","posts",r,"comments"),sg("createdAt")),t=await bg(e),n=await Promise.all(t.docs.map((async e=>{const t=e.data();let n="\ud83d\udc64";if(t.uid){const e=am(i,"users",t.uid),r=await vg(e);r.exists()&&(n=r.data().levelIcon||"\ud83d\udc64")}const s=(await bg(eg(sm(i,"community","qna","posts",r,"comments",e.id,"replies"),sg("createdAt")))).docs.map((e=>({id:e.id,...e.data()})));return{id:e.id,...t,levelIcon:n,replies:s}})));d(n),b(!1)}catch(e){console.error("\ud83d\udd25 \ub313\uae00 \ub85c\ub529 \uc2e4\ud328:",e)}};return l?(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto mt-10 bg-white border rounded shadow-sm",children:[(0,Pg.jsxs)("div",{className:"border-b px-6 py-4 bg-gray-200",children:[(0,Pg.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:l.title}),(0,Pg.jsxs)("div",{className:"text-sm text-gray-600 mt-1 flex gap-4 flex-wrap",children:[(0,Pg.jsxs)("span",{children:["\uc791\uc131\uc790: ",l.levelIcon||"\ud83d\udc64"," ",l.author]}),(0,Pg.jsxs)("span",{children:["\uc791\uc131\uc77c: ",(null===(e=l.createdAt)||void 0===e?void 0:e.toDate().toLocaleString())||"-"]}),(0,Pg.jsxs)("span",{children:["\uc870\ud68c\uc218: ",l.viewCount||0]}),(0,Pg.jsxs)("span",{children:["\ucd94\ucc9c: ",l.likes||0]})]})]}),(0,Pg.jsx)("div",{className:"px-6 py-6 border-b whitespace-pre-line text-gray-800",children:l.content}),(null===(n=l.images)||void 0===n?void 0:n.length)>0&&(0,Pg.jsxs)("div",{className:"px-6 py-4 border-b",children:[(0,Pg.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"\ud83d\udcf7 \ucca8\ubd80 \uc774\ubbf8\uc9c0"}),(0,Pg.jsx)("div",{className:"flex flex-col gap-4",children:l.images.map(((e,t)=>(0,Pg.jsx)("img",{src:e,alt:`\ucca8\ubd80 \uc774\ubbf8\uc9c0 ${t+1}`,className:"w-full max-w-2xl object-cover rounded-md shadow"},t)))})]}),(null===a||void 0===a?void 0:a.uid)===l.authorUid&&(0,Pg.jsx)("div",{className:"px-6 py-4 flex justify-end border-b",children:(0,Pg.jsx)("button",{onClick:async()=>{window.confirm("\uc774 \uc9c8\ubb38\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await Sg(am(i,"community","qna","posts",r)),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),s("/community/qna"))},className:"text-sm text-red-600 border border-red-300 hover:bg-red-50 px-4 py-2 rounded",children:"\ud83d\uddd1\ufe0f \uc9c8\ubb38 \uc0ad\uc81c"})}),(0,Pg.jsxs)("div",{className:"px-6 py-4 flex justify-between items-center",children:[(0,Pg.jsx)("button",{onClick:()=>s("/community/qna"),className:"text-sm bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"\ud83d\udccb \ubaa9\ub85d\uc73c\ub85c \uac00\uae30"}),(0,Pg.jsx)("button",{onClick:async()=>{if(null===a||void 0===a||!a.uid)return alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const e=am(i,"community","qna","posts",r,"likes",a.uid);if((await vg(e)).exists())return void alert("\uc774\ubbf8 \ucd94\ucc9c\ud558\uc168\uc2b5\ub2c8\ub2e4.");await wg(e,{likedAt:Ig()});const t=am(i,"community","qna","posts",r);await xg(t,{likes:jg(1)}),c((e=>({...e,likes:(e.likes||0)+1}))),x(!0)},disabled:w,className:"text-sm px-4 py-2 rounded "+(w?"bg-gray-300 text-gray-600":"bg-red-500 hover:bg-red-600 text-white"),children:"\ud83d\udc4d \ucd94\ucc9c\ud558\uae30"})]}),(0,Pg.jsxs)("div",{className:"px-6 py-6",children:[(0,Pg.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["\ud83d\udcac \ub2f5\ubcc0 (",u.length,")"]}),y?(0,Pg.jsx)("div",{className:"text-center",children:"\ub313\uae00\uc744 \ub85c\ub529 \uc911..."}):(0,Pg.jsx)("div",{className:"space-y-4 mb-6",children:u.map((e=>{var t,n;return(0,Pg.jsxs)("div",{className:"border p-3 rounded "+(l.solutionId===e.id?"border-green-500 bg-green-50":"border-gray-200"),children:[(0,Pg.jsxs)("div",{className:"text-sm text-gray-600 mb-1 flex justify-between",children:[(0,Pg.jsxs)("span",{children:[e.levelIcon||"\ud83d\udc64"," ",e.author," \xb7 ",null===(t=e.createdAt)||void 0===t?void 0:t.toDate().toLocaleString()]}),(null===a||void 0===a?void 0:a.uid)===e.uid&&(0,Pg.jsx)("button",{onClick:()=>(async e=>{window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await Sg(am(i,"community","qna","posts",r,"comments",e)),await S())})(e.id),className:"text-xs text-red-500 hover:underline",children:"\uc0ad\uc81c"})]}),(0,Pg.jsx)("div",{className:"text-gray-800 mb-2",children:e.content}),(null===(n=e.replies)||void 0===n?void 0:n.length)>0&&(0,Pg.jsx)("div",{className:"mt-3 ml-4 space-y-2 border-l pl-4",children:e.replies.map((t=>{var n;return(0,Pg.jsxs)("div",{children:[(0,Pg.jsxs)("div",{className:"text-xs text-gray-600 flex justify-between",children:[(0,Pg.jsxs)("span",{children:[t.author," \xb7 ",null===(n=t.createdAt)||void 0===n?void 0:n.toDate().toLocaleString()]}),(null===a||void 0===a?void 0:a.uid)===t.uid&&(0,Pg.jsx)("button",{onClick:()=>(async(e,t)=>{window.confirm("\ub2f5\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await Sg(am(i,"community","qna","posts",r,"comments",e,"replies",t)),await S())})(e.id,t.id),className:"text-red-400 text-xs hover:underline",children:"\uc0ad\uc81c"})]}),(0,Pg.jsx)("div",{className:"text-sm text-gray-800",children:t.content})]},t.id)}))}),l.authorUid===(null===a||void 0===a?void 0:a.uid)&&l.solutionId!==e.id&&(0,Pg.jsx)("button",{onClick:()=>(async e=>{const t=am(i,"community","qna","posts",r);await xg(t,{solutionId:e}),c((t=>({...t,solutionId:e})))})(e.id),className:"text-xs px-2 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200",children:"\ud83d\udca1 \ub2f5\ubcc0\ucc44\ud0dd\ud558\uae30"}),l.solutionId===e.id&&(0,Pg.jsx)("span",{className:"text-green-700 text-xs font-bold",children:"\u2714 \ucc44\ud0dd\ub41c \ub2f5\ubcc0"}),a&&(0,Pg.jsx)("div",{className:"mt-2",children:g===e.id?(0,Pg.jsxs)("form",{onSubmit:t=>(async(e,t)=>{e.preventDefault();const n=p[t];if(null!==n&&void 0!==n&&n.trim())try{await kg(sm(i,"community","qna","posts",r,"comments",t,"replies"),{content:n,author:(null===o||void 0===o?void 0:o.nickname)||"\uc775\uba85",uid:null===a||void 0===a?void 0:a.uid,createdAt:Ig()}),m((e=>({...e,[t]:""}))),v(null),await S()}catch(s){console.error("\ud83d\udd25 \ub2f5\uae00 \uc791\uc131 \uc2e4\ud328:",s)}})(t,e.id),className:"space-y-2",children:[(0,Pg.jsx)("textarea",{value:p[e.id]||"",onChange:t=>m((n=>({...n,[e.id]:t.target.value}))),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",className:"w-full p-2 border rounded min-h-[60px] text-sm"}),(0,Pg.jsxs)("div",{className:"flex gap-2",children:[(0,Pg.jsx)("button",{type:"submit",className:"text-xs px-3 py-1 bg-gray-300 rounded hover:bg-gray-400",children:"\ub2f5\uae00 \uc791\uc131"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>v(null),className:"text-xs text-red-500 hover:underline",children:"\ucde8\uc18c"})]})]}):(0,Pg.jsx)("button",{onClick:()=>v(e.id),className:"text-xs text-blue-500 hover:underline",children:"\ub2f5\uae00\uc4f0\uae30"})})]},e.id)}))}),a?(0,Pg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h.trim())try{await kg(sm(i,"community","qna","posts",r,"comments"),{content:h,author:(null===o||void 0===o?void 0:o.nickname)||"\uc775\uba85",uid:null===a||void 0===a?void 0:a.uid,createdAt:Ig(),isSolution:!1}),null!==a&&void 0!==a&&a.uid&&a.uid!==(null===l||void 0===l?void 0:l.authorUid)&&null!==l&&void 0!==l&&l.authorUid&&await kg(sm(i,"notifications"),{recipientUid:l.authorUid,postId:r,boardType:"qna",postTitle:l.title||"Q&A \uc9c8\ubb38",commentSnippet:h.slice(0,30),timestamp:Ig(),isRead:!1}),f(""),await S()}catch(t){console.error("\ud83d\udd25 \ub313\uae00 \uc791\uc131 \uc2e4\ud328:",t)}},className:"space-y-2",children:[(0,Pg.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),className:"w-full border rounded p-2 min-h-[80px]",placeholder:"\ub2f5\ubcc0\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-500 hover:bg-sky-600 text-white px-4 py-2 rounded",children:"\ub2f5\ubcc0 \uc791\uc131"})]}):(0,Pg.jsx)("p",{className:"text-gray-500 text-sm",children:"\u203b \ub85c\uadf8\uc778 \ud6c4 \ub2f5\ubcc0\uc744 \uc791\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})]}):(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."})}function hb(){const e=hm(),n=ny(),r=ee(),{user:i,userData:s}=(0,t.useContext)(Dg),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)([]);return(0,Pg.jsxs)("div",{className:"max-w-3xl mx-auto mt-10 p-6 bg-white rounded shadow",children:[(0,Pg.jsx)("h1",{className:"text-xl font-bold mb-4",children:"\u2753 \uc9c8\ubb38 \ub4f1\ub85d"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!a.trim()||!l.trim())return alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694.");try{const t=await Promise.all(u.map((async e=>{const t=await ib(e,{maxSizeMB:.7,maxWidthOrHeight:1920,useWebWorker:!0}),r=ty(n,`qna/${Date.now()}_${e.name}`);return await Jv(r,t),await Zv(r)}))),o=await kg(sm(e,"community","qna","posts"),{title:a,content:l,author:(null===s||void 0===s?void 0:s.nickname)||(null===i||void 0===i?void 0:i.email)||"\uc775\uba85",authorUid:null===i||void 0===i?void 0:i.uid,createdAt:Ig(),likes:0,views:0,solutionId:null,images:t});alert("\uc9c8\ubb38\uc774 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),r(`/community/qna/${o.id}`)}catch(o){console.error("\ub4f1\ub85d \uc2e4\ud328:",o),alert("\ub4f1\ub85d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"space-y-4",children:[(0,Pg.jsx)("input",{type:"text",placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",value:a,onChange:e=>o(e.target.value),className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("textarea",{placeholder:"\uc9c8\ubb38 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694",value:l,onChange:e=>c(e.target.value),className:"w-full p-2 border rounded min-h-[200px]",required:!0}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-1 font-semibold",children:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc (\ucd5c\ub300 10\uc7a5, 700KB \uc774\ud558)"}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);t.length+u.length>10?alert("\uc774\ubbf8\uc9c0\ub294 \ucd5c\ub300 10\uc7a5\uae4c\uc9c0 \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."):d((e=>[...e,...t]))}}),(0,Pg.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:u.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative text-sm text-gray-700",children:[(0,Pg.jsxs)("span",{children:["\ud83d\udcf7 ",e.name]}),(0,Pg.jsx)("button",{type:"button",onClick:()=>(e=>{d((t=>t.filter(((t,n)=>n!==e))))})(t),className:"ml-2 text-xs text-red-500",children:"\uc0ad\uc81c"})]},t)))})]}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-500 text-white px-4 py-2 rounded hover:bg-sky-600",children:"\uc9c8\ubb38 \ub4f1\ub85d"})]})]})}function fb(){const{id:e}=te(),n=hm(),r=ee(),{user:i}=(0,t.useContext)(Dg),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{const t=am(n,"community","qna","posts",e),s=await vg(t);if(s.exists()){const e=s.data();e.authorUid!==(null===i||void 0===i?void 0:i.uid)&&(alert("\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),r(-1)),a(e.title),l(e.content)}else alert("\uac8c\uc2dc\uae00\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),r(-1)})()}),[n,e,r,i]);return(0,Pg.jsxs)("div",{className:"max-w-3xl mx-auto mt-10 p-6 bg-white rounded shadow",children:[(0,Pg.jsx)("h1",{className:"text-xl font-bold mb-4",children:"\u270f\ufe0f \uc9c8\ubb38 \uc218\uc815"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!s.trim()||!o.trim())return alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");try{const t=am(n,"community","qna","posts",e);await xg(t,{title:s,content:o}),alert("\uc218\uc815\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),r(`/community/qna/${e}`)}catch(i){console.error("\uc218\uc815 \uc624\ub958:",i),alert("\uc218\uc815 \uc911 \uc624\ub958 \ubc1c\uc0dd")}},className:"space-y-4",children:[(0,Pg.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("textarea",{value:o,onChange:e=>l(e.target.value),className:"w-full p-2 border rounded min-h-[200px]",required:!0}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-500 text-white px-4 py-2 rounded hover:bg-sky-600",children:"\uc218\uc815 \uc644\ub8cc"})]})]})}function pb(){const e=hm(),n=ny(),r=ee(),{user:i,userData:s}=(0,t.useContext)(Dg),[a,o]=(0,t.useState)({name:"",level:"",phone:"",date:"",location:"",region:"\uad6d\ub0b4",overnight:"\ub2f9\uc77c",nights:"",participants:"",requiredLevel:"",requiredLogs:"",notes:""}),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(null),h=e=>{o({...a,[e.target.name]:e.target.value})};return(0,Pg.jsxs)("div",{className:"max-w-2xl mx-auto mt-10 bg-white p-6 rounded shadow",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\ud83d\udccb \ud22c\uc5b4 \uc2e0\uccad"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await(async e=>{const t=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyCCBzHxOQXYO9D4OO1ubHzcxzJ9kXEc6nI`),n=await t.json();if("OK"===n.status){const{lat:e,lng:t}=n.results[0].geometry.location;return{lat:e,lng:t}}throw new Error("\uc8fc\uc18c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")})(a.location);d(t);const c=[];for(let e of l)try{e.size>512e3&&(e=await ib(e,{maxSizeMB:.5,maxWidthOrHeight:1920,useWebWorker:!0}));const t=encodeURIComponent(e.name.replace(/\s+/g,"_")),r=ty(n,`tourImages/${Date.now()}_${t}`);await Jv(r,e);const i=await Zv(r);c.push(i)}catch(o){console.warn(`\u274c \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328 (${e.name}):`,o)}await kg(sm(e,"tourRequests"),{...a,nights:"\uc219\ubc15"===a.overnight?a.nights:"0",images:c,coordinates:t,author:i.email,authorUid:i.uid,nickname:(null===s||void 0===s?void 0:s.nickname)||i.email,createdAt:Ig()}),alert("\ud22c\uc5b4 \uc2e0\uccad\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),r("/community/tour")}catch(c){console.error("\ud83d\udd25 \ud22c\uc5b4 \uc2e0\uccad \uc624\ub958:",c),alert("\uc2e0\uccad \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"space-y-4",children:[(0,Pg.jsx)("input",{type:"text",name:"name",placeholder:"\uc774\ub984",value:a.name,onChange:h,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsxs)("select",{name:"level",value:a.level,onChange:h,className:"w-full p-2 border rounded",required:!0,children:[(0,Pg.jsx)("option",{value:"",children:"\uc790\uaca9 \ub4f1\uae09 \uc120\ud0dd"}),(0,Pg.jsx)("option",{value:"\uc77c\ubc18",children:"\uc77c\ubc18"}),(0,Pg.jsx)("option",{value:"OpenWater",children:"Open Water"}),(0,Pg.jsx)("option",{value:"Advance",children:"Advance"}),(0,Pg.jsx)("option",{value:"Rescue",children:"Rescue"}),(0,Pg.jsx)("option",{value:"DiveMaster",children:"Dive Master"}),(0,Pg.jsx)("option",{value:"Instructor",children:"Instructor"}),(0,Pg.jsx)("option",{value:"Trainer",children:"Trainer"})]}),(0,Pg.jsx)("input",{type:"tel",name:"phone",placeholder:"\uc5f0\ub77d\ucc98 (\uc804\ud654\ubc88\ud638)",value:a.phone,onChange:h,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"date",name:"date",value:a.date,onChange:h,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",name:"location",placeholder:"\ud22c\uc5b4 \uc7a5\uc18c (\uc9c0\uc5ed\uba85 \ub610\ub294 \uc8fc\uc18c)",value:a.location,onChange:h,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsxs)("div",{className:"flex gap-4",children:[(0,Pg.jsxs)("select",{name:"region",value:a.region,onChange:h,className:"w-1/2 p-2 border rounded",children:[(0,Pg.jsx)("option",{value:"\uad6d\ub0b4",children:"\uad6d\ub0b4"}),(0,Pg.jsx)("option",{value:"\ud574\uc678",children:"\ud574\uc678"})]}),(0,Pg.jsxs)("select",{name:"overnight",value:a.overnight,onChange:h,className:"w-1/2 p-2 border rounded",children:[(0,Pg.jsx)("option",{value:"\ub2f9\uc77c",children:"\ub2f9\uc77c"}),(0,Pg.jsx)("option",{value:"\uc219\ubc15",children:"\uc219\ubc15"})]})]}),"\uc219\ubc15"===a.overnight&&(0,Pg.jsx)("input",{type:"text",name:"nights",placeholder:"\uc608: 2\ubc15 3\uc77c",value:a.nights,onChange:h,className:"w-full p-2 border rounded"}),(0,Pg.jsx)("input",{type:"number",name:"participants",placeholder:"\ud22c\uc5b4 \uc778\uc6d0 \uc218",value:a.participants,onChange:h,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsxs)("select",{name:"requiredLevel",value:a.requiredLevel,onChange:h,className:"w-full p-2 border rounded",children:[(0,Pg.jsx)("option",{value:"",children:"\ud544\uc694 \ub4f1\uae09 \uc120\ud0dd"}),(0,Pg.jsx)("option",{value:"OpenWater",children:"Open Water"}),(0,Pg.jsx)("option",{value:"Advance",children:"Advance"}),(0,Pg.jsx)("option",{value:"Rescue",children:"Rescue"}),(0,Pg.jsx)("option",{value:"DiveMaster",children:"Dive Master"}),(0,Pg.jsx)("option",{value:"Instructor",children:"Instructor"})]}),(0,Pg.jsx)("input",{type:"number",name:"requiredLogs",placeholder:"\ud544\uc694 \ub85c\uadf8 \uc218",value:a.requiredLogs,onChange:h,className:"w-full p-2 border rounded"}),(0,Pg.jsx)("textarea",{name:"notes",placeholder:"\uc694\uccad\uc0ac\ud56d \uc785\ub825",value:a.notes,onChange:h,className:"w-full p-2 border rounded h-24"}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-1 font-medium",children:"\ud22c\uc5b4 \uc7a5\uc18c \uc0ac\uc9c4 (\ucd5c\ub300 10\uc7a5, 500KB \uc774\ud558)"}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);t.length+l.length>10?alert("\ucd5c\ub300 10\uc7a5\uae4c\uc9c0 \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."):c((e=>[...e,...t]))},className:"w-full"}),(0,Pg.jsx)("ul",{className:"mt-3 space-y-2",children:l.map(((e,t)=>(0,Pg.jsxs)("li",{className:"flex justify-between items-center text-sm bg-white border border-gray-200 rounded px-3 py-2 shadow",children:[(0,Pg.jsx)("span",{className:"truncate max-w-[70%]",children:e.name}),(0,Pg.jsx)("button",{type:"button",onClick:()=>{return e=t,void c((t=>t.filter(((t,n)=>n!==e))));var e},className:"bg-red-500 text-white text-xs px-2 py-1 rounded hover:bg-red-600",children:"\uc0ad\uc81c"})]},t)))})]}),(0,Pg.jsx)("button",{type:"submit",className:"w-full bg-sky-500 text-white py-2 rounded hover:bg-sky-600",children:"\uc2e0\uccad\ud558\uae30"})]}),u&&(0,Pg.jsx)("div",{className:"mt-6",children:(0,Pg.jsx)("iframe",{width:"100%",height:"300",style:{border:0},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps/embed/v1/view?key=AIzaSyCCBzHxOQXYO9D4OO1ubHzcxzJ9kXEc6nI&center=${u.lat},${u.lng}&zoom=14`,title:"\ud22c\uc5b4 \uc704\uce58",className:"rounded"})})]})}function mb(){const[e,n]=(0,t.useState)([]),r=hm(),i=ee(),{user:s}=(0,t.useContext)(Dg);return(0,t.useEffect)((()=>{(async()=>{const e=eg(sm(r,"tourRequests"),sg("createdAt","desc")),t=(await bg(e)).docs.map((e=>({id:e.id,...e.data()})));n(t)})()}),[r]),(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto mt-10 px-4",children:[(0,Pg.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold",children:"\ud83c\udf0a \ud22c\uc5b4 \uc2e0\uccad \ub9ac\uc2a4\ud2b8"}),(0,Pg.jsx)("button",{onClick:()=>i("/community/tour/request"),className:"bg-sky-500 text-white px-4 py-2 rounded hover:bg-sky-600",children:"\u270d\ufe0f \ud22c\uc5b4 \uc2e0\uccad"})]}),(0,Pg.jsx)("div",{className:"overflow-x-auto",children:(0,Pg.jsxs)("table",{className:"min-w-full text-sm text-center border border-gray-200",children:[(0,Pg.jsx)("thead",{className:"bg-gray-100 text-gray-700",children:(0,Pg.jsxs)("tr",{children:[(0,Pg.jsx)("th",{className:"py-2 px-3 border",children:"\ubc88\ud638"}),(0,Pg.jsx)("th",{className:"py-2 px-3 border",children:"\ud22c\uc5b4 \ub0a0\uc9dc"}),(0,Pg.jsx)("th",{className:"py-2 px-3 border",children:"\uc7a5\uc18c"}),(0,Pg.jsx)("th",{className:"py-2 px-3 border",children:"\uc2e0\uccad\uc790"}),(0,Pg.jsx)("th",{className:"py-2 px-3 border",children:"\ub4f1\uae09"}),(0,Pg.jsx)("th",{className:"py-2 px-3 border",children:"\uc778\uc6d0"}),(0,Pg.jsx)("th",{className:"py-2 px-3 border",children:"\ucc38\uc5ec\uc790"})]})}),(0,Pg.jsx)("tbody",{children:e.map(((t,n)=>(0,Pg.jsxs)("tr",{className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>i(`/community/tour/${t.id}`),children:[(0,Pg.jsx)("td",{className:"py-2 px-3 border",children:e.length-n}),(0,Pg.jsx)("td",{className:"py-2 px-3 border",children:t.date||"-"}),(0,Pg.jsx)("td",{className:"py-2 px-3 border",children:t.location||"-"}),(0,Pg.jsx)("td",{className:"py-2 px-3 border",children:t.name||"-"}),(0,Pg.jsx)("td",{className:"py-2 px-3 border",children:t.level||"-"}),(0,Pg.jsx)("td",{className:"py-2 px-3 border",children:t.participants||"-"}),(0,Pg.jsx)("td",{className:"py-2 px-3 border",children:t.attendees?t.attendees.length:0})]},t.id)))})]})})]})}function gb(){const{id:e}=te(),n=hm(),r=ee(),{user:i,userData:s}=(0,t.useContext)(Dg),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{const t=am(n,"tourRequests",e),i=await vg(t);if(i.exists()){const e=i.data();o({id:i.id,...e}),await p(e.attendees||[])}else alert("\uc2e0\uccad \ub370\uc774\ud130\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),r("/community/tour")})()}),[n,e,r]),(0,t.useEffect)((()=>{const t=Cg(eg(sm(n,"tourRequests",e,"comments"),sg("createdAt")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));c(t)}));return()=>t()}),[n,e]);const p=async e=>{const t=eg(sm(n,"users")),r=(await bg(t)).docs.map((e=>e.data())),i=e.map((e=>{const t=r.find((t=>t.nickname===e));return{nickname:e,name:(null===t||void 0===t?void 0:t.name)||"",phone:(null===t||void 0===t?void 0:t.phone)||""}}));f(i)},m=async()=>{if(!i)return;const t=(null===s||void 0===s?void 0:s.nickname)||(null===i||void 0===i?void 0:i.email)||"\uc775\uba85",r=am(n,"tourRequests",e);await xg(r,{attendees:Ag(t)});const a=await vg(r);o({id:r.id,...a.data()}),await p(a.data().attendees||[])};if(!a)return(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."});const g=a.imageUrls||a.images||[];return(0,Pg.jsxs)("div",{className:"max-w-5xl mx-auto mt-10 p-6 bg-white rounded shadow text-base",children:[(0,Pg.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center",children:"\ud83d\udccc \ud22c\uc5b4 \uc2e0\uccad \uc0c1\uc138"}),(0,Pg.jsx)("h3",{className:"text-xl font-semibold mb-2 text-gray-700",children:"\ud83d\uddc2\ufe0f \ud22c\uc5b4 \uc815\ubcf4"}),(0,Pg.jsx)("div",{className:"border rounded overflow-hidden mb-8",children:[{label:"\uc2e0\uccad\uc790",value:a.name},{label:"\ub4f1\uae09",value:a.level},{label:"\uc5f0\ub77d\ucc98",value:a.phone},{label:"\ud22c\uc5b4 \ub0a0\uc9dc",value:a.date},{label:"\uc7a5\uc18c",value:a.location},{label:"\uad6c\ubd84",value:`${a.region} / ${a.overnight}`},..."\uc219\ubc15"===a.overnight?[{label:"\uc219\ubc15\uc77c\uc218",value:a.nights}]:[],{label:"\uc778\uc6d0\uc218",value:a.participants},{label:"\ud544\uc694 \ub4f1\uae09",value:a.requiredLevel},{label:"\ud544\uc694 \ub85c\uadf8 \uc218",value:a.requiredLogs},{label:"\uc694\uccad\uc0ac\ud56d",value:a.notes}].map(((e,t)=>(0,Pg.jsxs)("div",{className:"flex border-b last:border-none",children:[(0,Pg.jsx)("div",{className:"w-40 bg-gray-100 px-4 py-2 font-medium text-gray-700 border-r",children:e.label}),(0,Pg.jsx)("div",{className:"flex-1 px-4 py-2 text-gray-800",children:e.value||"-"})]},t)))}),(a.coordinates||a.location)&&(0,Pg.jsxs)("div",{className:"mt-6",children:[(0,Pg.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"\ud83d\udccd \ud22c\uc5b4 \uc704\uce58"}),(0,Pg.jsx)("iframe",{title:"\ud22c\uc5b4 \uc704\uce58 \uc9c0\ub3c4",width:"100%",height:"300",style:{border:0},loading:"lazy",allowFullScreen:!0,className:"rounded",src:a.coordinates?`https://www.google.com/maps/embed/v1/view?key=AIzaSyCCBzHxOQXYO9D4OO1ubHzcxzJ9kXEc6nI&center=${a.coordinates.lat},${a.coordinates.lng}&zoom=14`:`https://maps.google.com/maps?q=${encodeURIComponent(a.location)}&output=embed`})]}),g.length>0&&(0,Pg.jsxs)("div",{className:"mt-8",children:[(0,Pg.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"\ud83d\udcf7 \uc7a5\uc18c \uc0ac\uc9c4"}),(0,Pg.jsx)("div",{className:"space-y-6",children:g.map(((e,t)=>(0,Pg.jsx)("img",{src:e,alt:`\ud22c\uc5b4 \uc774\ubbf8\uc9c0 ${t+1}`,className:"w-full object-contain rounded border shadow min-h-[100px]",onError:e=>{e.target.onerror=null,e.target.src="/broken-image.png"}},t)))})]}),(0,Pg.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[a.authorUid===(null===i||void 0===i?void 0:i.uid)&&(0,Pg.jsxs)(Pg.Fragment,{children:[(0,Pg.jsx)("button",{onClick:()=>r(`/tour/edit/${a.id}`),className:"px-4 py-2 bg-yellow-300 text-sm rounded hover:bg-yellow-400",children:"\u270f\ufe0f \uc218\uc815\ud558\uae30"}),(0,Pg.jsx)("button",{onClick:async()=>{if(window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await Sg(am(n,"tourRequests",e)),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),r("/community/tour")}catch(t){console.error("\uc0ad\uc81c \uc2e4\ud328:",t),alert("\uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd")}},className:"px-4 py-2 bg-red-300 text-sm rounded hover:bg-red-400",children:"\ud83d\uddd1\ufe0f \uc0ad\uc81c"})]}),(0,Pg.jsx)("button",{onClick:()=>r(-1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded border text-sm",children:"\ud83d\udd19 \ub3cc\uc544\uac00\uae30"})]}),(0,Pg.jsx)("div",{className:"relative mt-4 flex justify-end",children:(0,Pg.jsxs)("div",{className:"group",children:[(0,Pg.jsx)("button",{onClick:async()=>{if(!i)return alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const t=am(n,"tourRequests",e);await xg(t,{attendees:Tg((null===s||void 0===s?void 0:s.nickname)||(null===i||void 0===i?void 0:i.email)||"\uc775\uba85")});const r=await vg(t);o({id:t.id,...r.data()}),await p(r.data().attendees||[])},className:"bg-yellow-300 hover:bg-yellow-400 text-black font-bold rounded w-[104px] h-[104px] transition-all duration-200",children:"\ud83d\ude4b \ucc38\uc11d\ud558\uae30"}),(0,Pg.jsxs)("div",{className:"absolute right-0 mt-2 w-80 text-sm bg-yellow-100 text-gray-700 rounded p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:["\ud574\ub2f9 \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uc6d0\ud65c\ud55c \ud22c\uc5b4\uc9c4\ud589\uc744 \uc704\ud574",(0,Pg.jsx)("br",{}),"\ud22c\uc5b4\uc2e0\uccad\uc790\uc5d0\uac8c \uc5f0\ub77d\ucc98\uac00 \uacf5\uac1c\ub429\ub2c8\ub2e4."]})]})}),h.length>0&&(0,Pg.jsxs)("div",{className:"mt-10",children:[(0,Pg.jsx)("h3",{className:"text-base font-semibold mb-2",children:"\u2705 \ucc38\uc11d\uc790 \uba85\ub2e8"}),(0,Pg.jsx)("ul",{className:"text-sm text-gray-700",children:h.map(((e,t)=>(0,Pg.jsxs)("li",{className:"flex items-center gap-2",children:[(0,Pg.jsxs)("span",{children:["\u2022 ",a.authorUid===(null===i||void 0===i?void 0:i.uid)?`${e.name} (${e.nickname}) - ${e.phone}`:e.nickname]}),e.nickname===(null===s||void 0===s?void 0:s.nickname)&&(0,Pg.jsx)("button",{onClick:m,className:"text-xs text-red-500 hover:underline",children:"\u274c"})]},t)))})]}),(0,Pg.jsxs)("div",{className:"mt-10",children:[(0,Pg.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\ud83d\udcac \ub313\uae00"}),(0,Pg.jsx)("div",{className:"space-y-3",children:l.map((t=>{var r;return(0,Pg.jsxs)("div",{className:"border border-gray-200 p-3 rounded",children:[(0,Pg.jsxs)("div",{className:"text-sm text-gray-600 mb-1 flex justify-between",children:[(0,Pg.jsxs)("span",{children:[t.author," \xb7 ",null===(r=t.createdAt)||void 0===r?void 0:r.toDate().toLocaleString()]}),(null===i||void 0===i?void 0:i.uid)===t.uid&&(0,Pg.jsx)("button",{onClick:()=>(async t=>{window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&await Sg(am(n,"tourRequests",e,"comments",t))})(t.id),className:"text-red-500 text-xs hover:underline",children:"\uc0ad\uc81c"})]}),(0,Pg.jsx)("div",{children:t.content})]},t.id)}))}),i?(0,Pg.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),u.trim()&&(await kg(sm(n,"tourRequests",e,"comments"),{content:u,author:(null===s||void 0===s?void 0:s.nickname)||(null===i||void 0===i?void 0:i.email)||"\uc775\uba85",uid:null===i||void 0===i?void 0:i.uid,createdAt:Ig()}),null!==i&&void 0!==i&&i.uid&&i.uid!==(null===a||void 0===a?void 0:a.authorUid)&&null!==a&&void 0!==a&&a.authorUid&&await kg(sm(n,"notifications"),{recipientUid:a.authorUid,postId:e,boardType:"tour",postTitle:a.title||"\ud22c\uc5b4 \uc2e0\uccad\uae00",commentSnippet:u.slice(0,30),timestamp:Ig(),isRead:!1}),d(""))},className:"mt-4 space-y-2",children:[(0,Pg.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",className:"w-full p-2 border rounded min-h-[80px]"}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-500 hover:bg-sky-600 text-white px-4 py-2 rounded",children:"\ub313\uae00 \uc791\uc131"})]}):(0,Pg.jsx)("p",{className:"text-gray-500 text-sm mt-4",children:"\u203b \ub85c\uadf8\uc778 \ud6c4 \ub313\uae00\uc744 \uc791\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})]})}function vb(){const{id:e}=te(),n=hm(),r=ny(),i=ee(),{user:s}=(0,t.useContext)(Dg),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)([]),[p,m]=(0,t.useState)([]),[g,v]=(0,t.useState)([]);function y(e,t){const n=decodeURIComponent(t),r=`https://firebasestorage.googleapis.com/v0/b/${e.app.options.storageBucket}/o/`;if(!n.startsWith(r))throw new Error("Invalid storage URL");return ty(e,n.slice(r.length).split("?")[0].replace(/%2F/g,"/"))}(0,t.useEffect)((()=>{(async()=>{const t=am(n,"tourRequests",e),r=await vg(t);if(r.exists()){const e=r.data();if(e.authorUid!==(null===s||void 0===s?void 0:s.uid))return alert("\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),void i("/community/tour");o(e),m(e.imageUrls||e.images||[])}else alert("\ud574\ub2f9 \ud22c\uc5b4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),i("/community/tour");c(!1)})()}),[n,e,i,null===s||void 0===s?void 0:s.uid]);const b=e=>{o({...a,[e.target.name]:e.target.value})};return l||!a?(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."}):(0,Pg.jsxs)("div",{className:"max-w-2xl mx-auto mt-10 bg-white p-6 rounded shadow",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\ud83d\udee0\ufe0f \ud22c\uc5b4 \uc2e0\uccad \uc218\uc815"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await(async e=>{const t=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyCCBzHxOQXYO9D4OO1ubHzcxzJ9kXEc6nI`),n=await t.json();if("OK"===n.status){const{lat:e,lng:t}=n.results[0].geometry.location;return{lat:e,lng:t}}throw alert(`\u2757 \uc785\ub825\ud55c \uc704\uce58 "${e}" \uc5d0 \ub300\ud55c \uc88c\ud45c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.`),new Error("\uc8fc\uc18c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")})(a.location);for(const e of g)try{const t=y(r,e);await ey(t)}catch(o){console.warn(`\ud83d\udd25 \uc774\ubbf8\uc9c0 \uc0ad\uc81c \uc2e4\ud328: ${e}`,o.message)}let l=[];if(u.length>0){const e=u.map((async e=>{const t=ty(r,`tourRequests/${s.uid}/${Date.now()}-${e.name}`),n=await Jv(t,e);return await Zv(n.ref)}));l=await Promise.all(e)}const c=[...p.filter((e=>!g.includes(e))),...l],d=am(n,"tourRequests",e);await xg(d,{...a,coordinates:t,imageUrls:c,updatedAt:Ig()}),alert("\uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),i(`/community/tour/${e}`)}catch(o){console.error("\u274c \uc218\uc815 \uc2e4\ud328:",o.message),alert("\uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"space-y-4",children:[(0,Pg.jsx)("input",{type:"text",name:"name",value:a.name,onChange:b,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"tel",name:"phone",value:a.phone,onChange:b,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"date",name:"date",value:a.date,onChange:b,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",name:"location",value:a.location,onChange:b,className:"w-full p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",name:"requiredLevel",value:a.requiredLevel,onChange:b,className:"w-full p-2 border rounded"}),(0,Pg.jsx)("input",{type:"number",name:"requiredLogs",value:a.requiredLogs,onChange:b,className:"w-full p-2 border rounded"}),(0,Pg.jsx)("textarea",{name:"notes",value:a.notes||"",onChange:b,className:"w-full p-2 border rounded min-h-[100px]",placeholder:"\uc694\uccad\uc0ac\ud56d"}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block font-semibold mb-1",children:"\uae30\uc874 \uc5c5\ub85c\ub4dc \uc0ac\uc9c4"}),(0,Pg.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative w-24 h-24",children:[(0,Pg.jsx)("img",{src:e,alt:"\uc5c5\ub85c\ub4dc \uc0ac\uc9c4",className:"w-full h-full object-cover rounded"}),(0,Pg.jsx)("button",{type:"button",className:"absolute top-0 right-0 bg-red-600 text-white rounded-full w-5 h-5 text-xs",onClick:()=>(e=>{v((t=>[...t,e])),m((t=>t.filter((t=>t!==e))))})(e),children:"\u2715"})]},t)))})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block font-semibold mb-1",children:"\uc0c8 \uc0ac\uc9c4 \uc120\ud0dd"}),(0,Pg.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=Array.from(e.target.files);d([...u,...t]);const n=t.map((e=>URL.createObjectURL(e)));f([...h,...n])},className:"w-full"}),(0,Pg.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:h.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative w-24 h-24",children:[(0,Pg.jsx)("img",{src:e,alt:"\ubbf8\ub9ac\ubcf4\uae30",className:"w-full h-full object-cover rounded"}),(0,Pg.jsx)("button",{type:"button",className:"absolute top-0 right-0 bg-red-600 text-white rounded-full w-5 h-5 text-xs",onClick:()=>{return e=t,d((t=>t.filter(((t,n)=>n!==e)))),void f((t=>t.filter(((t,n)=>n!==e))));var e},children:"\u2715"})]},t)))})]}),(0,Pg.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600",children:"\uc218\uc815 \uc644\ub8cc"})]})]})}function yb(){const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),{userData:s}=(0,t.useContext)(Dg),a=hm(),o=ee();return(0,t.useEffect)((()=>{const e=Cg(eg(sm(a,"gallery"),sg("createdAt","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));n(t),i(!1)}),(e=>{console.error("\ud83d\udd25 Firestore \uc5d0\ub7ec:",e),i(!1)}));return()=>e()}),[a]),(0,Pg.jsx)("div",{className:"w-full min-h-screen bg-gray-500",children:(0,Pg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[(0,Pg.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Pg.jsx)("h1",{className:"text-3xl font-bold text-white",children:"\ud83d\udcf8 \uac24\ub7ec\ub9ac"}),(0,Pg.jsx)("button",{onClick:()=>o("/gallery/upload"),className:"bg-gray-800 text-white px-4 py-2 rounded border border-white/30  shadow-md transition-all duration-150  active:translate-y-[2px] active:shadow-inner",children:"\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc"})]}),r?(0,Pg.jsx)("div",{className:"text-center text-gray-200",children:"\uc774\ubbf8\uc9c0\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."}):0===e.length?(0,Pg.jsx)("div",{className:"text-center text-gray-300",children:"\uc5c5\ub85c\ub4dc\ub41c \uc774\ubbf8\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,Pg.jsx)("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:e.map((e=>{var t,n;return(0,Pg.jsxs)("div",{className:"relative group rounded-lg overflow-hidden shadow-lg border border-gray-300 bg-white hover:shadow-xl cursor-pointer transition",onClick:()=>o(`/gallery/${e.id}`),children:[(0,Pg.jsx)("img",{src:e.url||(null===(t=e.images)||void 0===t?void 0:t[0]),alt:e.title,className:"w-full h-60 object-cover transition-transform duration-300 group-hover:scale-105"}),(0,Pg.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-3 text-xs",children:[(0,Pg.jsx)("h3",{className:"text-sm font-semibold truncate",children:e.title}),(0,Pg.jsx)("div",{className:"flex justify-between items-center mt-1",children:(0,Pg.jsxs)("span",{children:[e.levelIcon||"\ud83d\udc64"," ",e.nickname||e.author]})}),(0,Pg.jsxs)("div",{className:"flex justify-end text-[11px] text-gray-300 mt-1",children:["\ud83d\udc4d ",e.likes||0]}),(0,Pg.jsx)("div",{className:"flex justify-end text-[11px] text-gray-400",children:null===(n=e.createdAt)||void 0===n?void 0:n.toDate().toLocaleDateString("ko-KR")})]})]},e.id)}))})]})})}var bb="undefined"!=typeof self?self:global;const wb="undefined"!=typeof navigator,xb=wb&&"undefined"==typeof HTMLImageElement,Sb=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),kb=bb.Buffer,Cb=bb.BigInt,Eb=!!kb,_b=e=>e;function Nb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_b;if(Sb)try{return"function"==typeof require?Promise.resolve(t(require(e))):import(e).then(t)}catch(t){console.warn(`Couldn't load ${e}`)}}let Ib=bb.fetch;if(!bb.fetch){const e=Nb("http",(e=>e)),t=Nb("https",(e=>e)),n=function(r){let{headers:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((async(s,a)=>{let{port:o,hostname:l,pathname:c,protocol:u,search:d}=new URL(r);const h={method:"GET",hostname:l,path:encodeURI(c)+d,headers:i};""!==o&&(h.port=Number(o));const f=("https:"===u?await t:await e).request(h,(e=>{if(301===e.statusCode||302===e.statusCode){let t=new URL(e.headers.location,r).toString();return n(t,{headers:i}).then(s).catch(a)}s({status:e.statusCode,arrayBuffer:()=>new Promise((t=>{let n=[];e.on("data",(e=>n.push(e))),e.on("end",(()=>t(Buffer.concat(n))))}))})}));f.on("error",a),f.end()}))};(e=>{Ib=e})(n)}function Tb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ab=e=>Pb(e)?void 0:e,jb=e=>void 0!==e;function Pb(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(jb).length)}function Db(e){let t=new Error(e);throw delete t.stack,t}function Rb(e){return""===(e=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(e).trim())?void 0:e}function Ob(e){let t=function(e){let t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Lb=e=>String.fromCharCode.apply(null,e),Mb="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function Ub(e){return Mb?Mb.decode(e):Eb?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Lb(e)))}class Fb{static from(e,t){return e instanceof this&&e.le===t?e:new Fb(e,void 0,void 0,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("boolean"==typeof r&&(this.le=r),Array.isArray(e)&&(e=new Uint8Array(e)),0===e)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){void 0===n&&(n=e.byteLength-t);let r=new DataView(e,t,n);this._swapDataView(r)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Fb){void 0===n&&(n=e.byteLength-t),(t+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Db("Creating view outside of available memory in ArrayBuffer");let r=new DataView(e.buffer,t,n);this._swapDataView(r)}else if("number"==typeof e){let t=new DataView(new ArrayBuffer(e));this._swapDataView(t)}else Db("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fb;return e instanceof DataView||e instanceof Fb?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Db("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new n(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new Fb(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;return Ub(this.getUint8Array(e,t))}getLatin1String(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=this.getUint8Array(e,t);return Lb(n)}getUnicodeString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;const n=[];for(let r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return Lb(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(e,t)}getInt32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(e,t)}getUint16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(e,t)}getUint32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(e,t)}getFloat32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}getFloat64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}getFloat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}getDouble(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}getUintBytes(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Bb(e,t){Db(`${e} '${t}' was not loaded, try using full build of exifr.`)}class Vb extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Bb(this.kind,e),t&&(e in t||function(e,t){Db(`Unknown ${e} '${t}'.`)}(this.kind,e),t[e].enabled||Bb(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var zb=new Vb("file parser"),$b=new Vb("segment parser"),qb=new Vb("file reader");function Hb(e,t){return"string"==typeof e?Wb(e,t):wb&&!xb&&e instanceof HTMLImageElement?Wb(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Fb(e):wb&&e instanceof Blob?Gb(e,t,"blob",Xb):void Db("Invalid input argument")}function Wb(e,t){return(n=e).startsWith("data:")||n.length>1e4?Kb(e,t,"base64"):Sb&&e.includes("://")?Gb(e,t,"url",Qb):Sb?Kb(e,t,"fs"):wb?Gb(e,t,"url",Qb):void Db("Invalid input argument");var n}async function Gb(e,t,n,r){return qb.has(n)?Kb(e,t,n):r?async function(e,t){let n=await t(e);return new Fb(n)}(e,r):void Db(`Parser ${n} is not loaded`)}async function Kb(e,t,n){let r=new(qb.get(n))(e,t);return await r.read(),r}const Qb=e=>Ib(e).then((e=>e.arrayBuffer())),Xb=e=>new Promise(((t,n)=>{let r=new FileReader;r.onloadend=()=>t(r.result||new ArrayBuffer),r.onerror=n,r.readAsArrayBuffer(e)}));class Yb extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Jb(e,t,n){let r=new Yb;for(let[i,s]of n)r.set(i,s);if(Array.isArray(t))for(let i of t)e.set(i,r);else e.set(t,r);return r}function Zb(e,t,n){let r,i=e.get(t);for(r of n)i.set(r[0],r[1])}const ew=new Map,tw=new Map,nw=new Map,rw=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],iw=["jfif","xmp","icc","iptc","ihdr"],sw=["tiff",...iw],aw=["ifd0","ifd1","exif","gps","interop"],ow=[...sw,...aw],lw=["makerNote","userComment"],cw=["translateKeys","translateValues","reviveValues","multiSegment"],uw=[...cw,"sanitize","mergeOutput","silentErrors"];class dw{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class hw extends dw{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,n,r){if(super(),Tb(this,"enabled",!1),Tb(this,"skip",new Set),Tb(this,"pick",new Set),Tb(this,"deps",new Set),Tb(this,"translateKeys",!1),Tb(this,"translateValues",!1),Tb(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=aw.includes(e),this.canBeFiltered&&(this.dict=ew.get(e)),void 0!==n)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if("object"==typeof n){if(this.enabled=!0,this.parse=!1!==n.parse,this.canBeFiltered){let{pick:e,skip:t}=n;e&&e.length>0&&this.translateTagSet(e,this.pick),t&&t.length>0&&this.translateTagSet(t,this.skip)}this.applyInheritables(n)}else!0===n||!1===n?this.parse=this.enabled=n:Db(`Invalid options argument: ${n}`)}applyInheritables(e){let t,n;for(t of cw)n=e[t],void 0!==n&&(this[t]=n)}translateTagSet(e,t){if(this.dict){let n,r,{tagKeys:i,tagValues:s}=this.dict;for(n of e)"string"==typeof n?(r=s.indexOf(n),-1===r&&(r=i.indexOf(Number(n))),-1!==r&&t.add(Number(i[r]))):t.add(n)}else for(let n of e)t.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,yw(this.pick,this.deps)):this.enabled&&this.pick.size>0&&yw(this.pick,this.deps)}}var fw={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},pw=new Map;class mw extends dw{static useCached(e){let t=pw.get(e);return void 0!==t||(t=new this(e),pw.set(e,t)),t}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):"object"==typeof e?this.setupFromObject(e):Db(`Invalid options argument ${e}`),void 0===this.firstChunkSize&&(this.firstChunkSize=wb?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of rw)this[e]=fw[e];for(e of uw)this[e]=fw[e];for(e of lw)this[e]=fw[e];for(e of ow)this[e]=new hw(e,fw[e],void 0,this)}setupFromTrue(){let e;for(e of rw)this[e]=fw[e];for(e of uw)this[e]=fw[e];for(e of lw)this[e]=!0;for(e of ow)this[e]=new hw(e,!0,void 0,this)}setupFromArray(e){let t;for(t of rw)this[t]=fw[t];for(t of uw)this[t]=fw[t];for(t of lw)this[t]=fw[t];for(t of ow)this[t]=new hw(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,aw)}setupFromObject(e){let t;for(t of(aw.ifd0=aw.ifd0||aw.image,aw.ifd1=aw.ifd1||aw.thumbnail,Object.assign(this,e),rw))this[t]=vw(e[t],fw[t]);for(t of uw)this[t]=vw(e[t],fw[t]);for(t of lw)this[t]=vw(e[t],fw[t]);for(t of sw)this[t]=new hw(t,fw[t],e[t],this);for(t of aw)this[t]=new hw(t,fw[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,aw,ow),!0===e.tiff?this.batchEnableWithBool(aw,!0):!1===e.tiff?this.batchEnableWithUserValue(aw,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,aw):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,aw)}batchEnableWithBool(e,t){for(let n of e)this[n].enabled=t}batchEnableWithUserValue(e,t){for(let n of e){let e=t[n];this[n].enabled=!1!==e&&void 0!==e}}setupGlobalFilters(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(e&&e.length){for(let e of r)this[e].enabled=!1;let t=gw(e,n);for(let[e,n]of t)yw(this[e].pick,n),this[e].enabled=!0}else if(t&&t.length){let e=gw(t,n);for(let[t,n]of e)yw(this[t].skip,n)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:n,iptc:r,icc:i}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:n,interop:r}=this;r.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=aw.some((e=>!0===this[e].enabled))||this.makerNote||this.userComment;for(let i of aw)this[i].finalizeFilters()}get onlyTiff(){return!iw.map((e=>this[e].enabled)).some((e=>!0===e))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of sw)this[e].enabled&&!$b.has(e)&&Bb("segment parser",e)}}function gw(e,t){let n,r,i,s,a=[];for(i of t){for(s of(n=ew.get(i),r=[],n))(e.includes(s[0])||e.includes(s[1]))&&r.push(s[0]);r.length&&a.push([i,r])}return a}function vw(e,t){return void 0!==e?e:void 0!==t?t:void 0}function yw(e,t){for(let n of t)e.add(n)}Tb(mw,"default",fw);class bw{constructor(e){Tb(this,"parsers",{}),Tb(this,"output",{}),Tb(this,"errors",[]),Tb(this,"pushToErrors",(e=>this.errors.push(e))),this.options=mw.useCached(e)}async read(e){this.file=await Hb(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[n,r]of zb)if(r.canHandle(e,t))return this.fileParser=new r(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Db("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Ab(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async t=>{let n=await t.parse();t.assignToOutput(e,n)}));this.options.silentErrors&&(t=t.map((e=>e.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,n=$b.get("tiff",e);var r;if(t.tiff?r={start:0,type:"tiff"}:t.jpeg&&(r=await this.fileParser.getOrFindSegment("tiff")),void 0===r)return;let i=await this.fileParser.ensureSegmentChunk(r),s=this.parsers.tiff=new n(i,e,t),a=await s.extractThumbnail();return t.close&&t.close(),a}}async function ww(e,t){let n=new bw(t);return await n.read(e),n.parse()}var xw=Object.freeze({__proto__:null,parse:ww,Exifr:bw,fileParsers:zb,segmentParsers:$b,fileReaders:qb,tagKeys:ew,tagValues:tw,tagRevivers:nw,createDictionary:Jb,extendDictionary:Zb,fetchUrlAsArrayBuffer:Qb,readBlobAsArrayBuffer:Xb,chunkedProps:rw,otherSegments:iw,segments:sw,tiffBlocks:aw,segmentsAndBlocks:ow,tiffExtractables:lw,inheritables:cw,allFormatters:uw,Options:mw});class Sw{constructor(e,t,n){Tb(this,"errors",[]),Tb(this,"ensureSegmentChunk",(async e=>{let t=e.start,n=e.size||65536;if(this.file.chunked)if(this.file.available(t,n))e.chunk=this.file.subarray(t,n);else try{e.chunk=await this.file.readChunk(t,n)}catch(t){Db(`Couldn't read segment: ${JSON.stringify(e)}. ${t.message}`)}else this.file.byteLength>t+n?e.chunk=this.file.subarray(t,n):void 0===e.size?e.chunk=this.file.subarray(t):Db("Segment unreachable: "+JSON.stringify(e));return e.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=n}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let n=new($b.get(e))(t,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let t of e){let{type:e,chunk:n}=t,r=this.options[e];if(r&&r.enabled){let t=this.parsers[e];t&&t.append||t||this.createParser(e,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class kw{static findPosition(e,t){let n=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,i=t+r,s=n-r;return{offset:t,length:n,headerLength:r,start:i,size:s,end:i+s}}static parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,new mw({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Fb?e:new Fb(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;Tb(this,"errors",[]),Tb(this,"raw",new Map),Tb(this,"handleError",(e=>{if(!this.options.silentErrors)throw e;this.errors.push(e.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let n=nw.get(t),r=tw.get(t),i=ew.get(t),s=this.options[t],a=s.reviveValues&&!!n,o=s.translateValues&&!!r,l=s.translateKeys&&!!i,c={};for(let[u,d]of e)a&&n.has(u)?d=n.get(u)(d):o&&r.has(u)&&(d=this.translateValue(d,r.get(u))),l&&i.has(u)&&(u=i.get(u)||u),c[u]=d;return c}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}}function Cw(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function Ew(e){return e>=224&&e<=239}function _w(e,t,n){for(let[r,i]of $b)if(i.canHandle(e,t,n))return r}Tb(kw,"headerLength",4),Tb(kw,"type",void 0),Tb(kw,"multiSegment",!1),Tb(kw,"canHandle",(()=>!1));class Nw extends Sw{constructor(){super(...arguments),Tb(this,"appSegments",[]),Tb(this,"jpegSegments",[]),Tb(this,"unknownSegments",[])}static canHandle(e,t){return 65496===t}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set($b.keyList())):(e=void 0===e?$b.keyList().filter((e=>this.options[e].enabled)):e.filter((e=>this.options[e].enabled&&$b.has(e))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.setupSegmentFinderArgs(t);let{file:n,findAll:r,wanted:i,remaining:s}=this;if(!r&&this.file.chunked&&(r=Array.from(i).some((e=>{let t=$b.get(e),n=this.options[e];return t.multiSegment&&n.multiSegment})),r&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let t=!1;for(;s.size>0&&!t&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:r}=n,i=this.appSegments.some((e=>!this.file.available(e.offset||e.start,e.length||e.size)));if(t=e>r&&!i?!await n.readNextChunk(e):!await n.readNextChunk(r),void 0===(e=this.findAppSegmentsInRange(e,n.byteLength)))return}}}findAppSegmentsInRange(e,t){t-=2;let n,r,i,s,a,o,{file:l,findAll:c,wanted:u,remaining:d,options:h}=this;for(;e<t;e++)if(255===l.getUint8(e))if(n=l.getUint8(e+1),Ew(n)){if(r=l.getUint16(e+2),i=_w(l,e,r),i&&u.has(i)&&(s=$b.get(i),a=s.findPosition(l,e),o=h[i],a.type=i,this.appSegments.push(a),!c&&(s.multiSegment&&o.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||d.delete(i)):d.delete(i),0===d.size)))break;h.recordUnknownSegments&&(a=kw.findPosition(l,e),a.marker=n,this.unknownSegments.push(a)),e+=r+1}else if(Cw(n)){if(r=l.getUint16(e+2),218===n&&!1!==h.stopAfterSos)return;h.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}return e}mergeMultiSegments(){if(!this.appSegments.some((e=>e.multiSegment)))return;let e=function(e){let t,n,r,i=new Map;for(let s=0;s<e.length;s++)t=e[s],n=t.type,i.has(n)?r=i.get(n):i.set(n,r=[]),r.push(t);return Array.from(i)}(this.appSegments);this.mergedAppSegments=e.map((e=>{let[t,n]=e,r=$b.get(t,this.options);return r.handleMultiSegments?{type:t,chunk:r.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return void 0===t&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}Tb(Nw,"type","jpeg"),zb.set("jpeg",Nw);const Iw=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Tw extends kw{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,{pick:r,skip:i}=this.options[t];r=new Set(r);let s=r.size>0,a=0===i.size,o=this.chunk.getUint16(e);e+=2;for(let l=0;l<o;l++){let o=this.chunk.getUint16(e);if(s){if(r.has(o)&&(n.set(o,this.parseTag(e,o,t)),r.delete(o),0===r.size))break}else!a&&i.has(o)||n.set(o,this.parseTag(e,o,t));e+=12}return n}parseTag(e,t,n){let{chunk:r}=this,i=r.getUint16(e+2),s=r.getUint32(e+4),a=Iw[i];if(a*s<=4?e+=8:e=r.getUint32(e+8),(i<1||i>13)&&Db(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${i}, offset ${e}`),e>r.byteLength&&Db(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${r.byteLength}`),1===i)return r.getUint8Array(e,s);if(2===i)return Rb(r.getString(e,s));if(7===i)return r.getUint8Array(e,s);if(1===s)return this.parseTagValue(i,e);{let t=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(i))(s),n=a;for(let r=0;r<s;r++)t[r]=this.parseTagValue(i,e),e+=n;return t}}parseTagValue(e,t){let{chunk:n}=this;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:case 13:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);default:Db(`Invalid tiff type ${e}`)}}}class Aw extends Tw{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let n=new Map;return this[t]=n,this.parseTags(e,t,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Db("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Db(`IFD0 offset points to outside of file.\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,Ob(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==t.size?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Ob(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let n=e.get(t);n&&1===n.length&&e.set(t,n[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",jw(...e.get(2),e.get(1))),e.set("longitude",jw(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,n,r={};for(t of aw)if(e=this[t],!Pb(e))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if("ifd1"===t)continue;Object.assign(r,n)}else r[t]=n;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[n,r]of Object.entries(t))this.assignObjectToOutput(e,n,r)}}function jw(e,t,n,r){var i=e+t/60+n/3600;return"S"!==r&&"W"!==r||(i*=-1),i}Tb(Aw,"type","tiff"),Tb(Aw,"headerLength",10),$b.set("tiff",Aw);var Pw=Object.freeze({__proto__:null,default:xw,Exifr:bw,fileParsers:zb,segmentParsers:$b,fileReaders:qb,tagKeys:ew,tagValues:tw,tagRevivers:nw,createDictionary:Jb,extendDictionary:Zb,fetchUrlAsArrayBuffer:Qb,readBlobAsArrayBuffer:Xb,chunkedProps:rw,otherSegments:iw,segments:sw,tiffBlocks:aw,segmentsAndBlocks:ow,tiffExtractables:lw,inheritables:cw,allFormatters:uw,Options:mw,parse:ww});const Dw={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Rw=Object.assign({},Dw,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Ow(e){let t=new bw(Rw);await t.read(e);let n=await t.parse();if(n&&n.gps){let{latitude:e,longitude:t}=n.gps;return{latitude:e,longitude:t}}}const Lw=Object.assign({},Dw,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Mw(e){let t=new bw(Lw);await t.read(e);let n=await t.extractThumbnail();return n&&Eb?kb.from(n):n}async function Uw(e){let t=await this.thumbnail(e);if(void 0!==t){let e=new Blob([t]);return URL.createObjectURL(e)}}const Fw=Object.assign({},Dw,{firstChunkSize:4e4,ifd0:[274]});async function Bw(e){let t=new bw(Fw);await t.read(e);let n=await t.parse();if(n&&n.ifd0)return n.ifd0[274]}const Vw=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let zw=!0,$w=!0;if("object"==typeof navigator){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,e,n]=t,r=Number(e)+.1*Number(n);zw=r<13.4,$w=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);zw=$w=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);zw=$w=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);zw=$w=Number(t)<77}}async function qw(e){let t=await Bw(e);return Object.assign({canvas:zw,css:$w},Vw[t])}class Hw extends Fb{constructor(){super(...arguments),Tb(this,"ranges",new Ww),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,n){if(0===e&&0===this.byteLength&&n){let e=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(e)}else{let n=e+t;if(n>this.byteLength){let{dataView:e}=this._extend(n);this._swapDataView(e)}}}_extend(e){let t;t=Eb?kb.allocUnsafe(e):new Uint8Array(e);let n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}subarray(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||this._lengthToEnd(e),n&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class Ww{constructor(){Tb(this,"list",[])}get length(){return this.list.length}add(e,t){let n=e+t,r=this.list.filter((t=>Gw(e,t.offset,n)||Gw(e,t.end,n)));if(r.length>0){e=Math.min(e,...r.map((e=>e.offset))),n=Math.max(n,...r.map((e=>e.end))),t=n-e;let i=r.shift();i.offset=e,i.length=t,i.end=n,this.list=this.list.filter((e=>!r.includes(e)))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let n=e+t;return this.list.some((t=>t.offset<=e&&n<=t.end))}}function Gw(e,t,n){return e<=t&&t<=n}class Kw extends Hw{constructor(e,t){super(0),Tb(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nextChunkOffset;if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,n=await this.readChunk(e,t);return!!n&&n.byteLength===t}async readChunk(e,t){if(this.chunksRead++,0!==(t=this.safeWrapAddress(e,t)))return this._readChunk(e,t)}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}qb.set("blob",class extends Kw{async readWhole(){this.chunked=!1;let e=await Xb(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let n=t?e+t:void 0,r=this.input.slice(e,n),i=await Xb(r);return this.set(i,e,!0)}});var Qw=Object.freeze({__proto__:null,default:Pw,Exifr:bw,fileParsers:zb,segmentParsers:$b,fileReaders:qb,tagKeys:ew,tagValues:tw,tagRevivers:nw,createDictionary:Jb,extendDictionary:Zb,fetchUrlAsArrayBuffer:Qb,readBlobAsArrayBuffer:Xb,chunkedProps:rw,otherSegments:iw,segments:sw,tiffBlocks:aw,segmentsAndBlocks:ow,tiffExtractables:lw,inheritables:cw,allFormatters:uw,Options:mw,parse:ww,gpsOnlyOptions:Rw,gps:Ow,thumbnailOnlyOptions:Lw,thumbnail:Mw,thumbnailUrl:Uw,orientationOnlyOptions:Fw,orientation:Bw,rotations:Vw,get rotateCanvas(){return zw},get rotateCss(){return $w},rotation:qw});qb.set("url",class extends Kw{async readWhole(){this.chunked=!1;let e=await Qb(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let n=t?e+t-1:void 0,r=this.options.httpHeaders||{};(e||n)&&(r.range=`bytes=${[e,n].join("-")}`);let i=await Ib(this.input,{headers:r}),s=await i.arrayBuffer(),a=s.byteLength;if(416!==i.status)return a!==t&&(this.size=e+a),this.set(s,e,!0)}}),Fb.prototype.getUint64=function(e){let t=this.getUint32(e),n=this.getUint32(e+4);return t<1048575?t<<32|n:void 0!==typeof Cb?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Cb(t)<<Cb(32)|Cb(n)):void Db("Trying to read 64b value but JS can only handle 53b numbers.")};class Xw extends Sw{parseBoxes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(t.push(n),0===n.length)break;e+=n.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return void 0===e.boxes&&this.parseSubBoxes(e),e.boxes.find((e=>e.kind===t))}parseBoxHead(e){let t=this.file.getUint32(e),n=this.file.getString(e+4,4),r=e+8;return 1===t&&(t=this.file.getUint64(e+8),r+=8),{offset:e,length:t,kind:n,start:r}}parseBoxFullHead(e){if(void 0!==e.version)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class Yw extends Xw{static canHandle(e,t){if(0!==t)return!1;let n=e.getUint16(2);if(n>50)return!1;let r=16,i=[];for(;r<n;)i.push(e.getString(r,4)),r+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;"meta"!==t.kind;)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,n){await this.file.ensureChunk(t,n);let r=this.file.subarray(t,n);this.createParser(e,r)}async findIcc(e){let t=this.findBox(e,"iprp");if(void 0===t)return;let n=this.findBox(t,"ipco");if(void 0===n)return;let r=this.findBox(n,"colr");void 0!==r&&await this.registerSegment("icc",r.offset+12,r.length)}async findExif(e){let t=this.findBox(e,"iinf");if(void 0===t)return;let n=this.findBox(e,"iloc");if(void 0===n)return;let r=this.findExifLocIdInIinf(t),i=this.findExtentInIloc(n,r);if(void 0===i)return;let[s,a]=i;await this.file.ensureChunk(s,a);let o=4+this.file.getUint32(s);s+=o,a-=o,await this.registerSegment("tiff",s,a)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,n,r,i,s=e.start,a=this.file.getUint16(s);for(s+=2;a--;){if(t=this.parseBoxHead(s),this.parseBoxFullHead(t),n=t.start,t.version>=2&&(r=3===t.version?4:2,i=this.file.getString(n+r+2,4),"Exif"===i))return this.file.getUintBytes(n,r);s+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let n=e.start,[r,i]=this.get8bits(n++),[s,a]=this.get8bits(n++),o=2===e.version?4:2,l=1===e.version||2===e.version?2:0,c=a+r+i,u=2===e.version?4:2,d=this.file.getUintBytes(n,u);for(n+=u;d--;){let e=this.file.getUintBytes(n,o);n+=o+l+2+s;let u=this.file.getUint16(n);if(n+=2,e===t)return u>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(n+a,r),this.file.getUintBytes(n+a+r,i)];n+=u*c}}}class Jw extends Yw{}Tb(Jw,"type","heic");class Zw extends Yw{}Tb(Zw,"type","avif"),zb.set("heic",Jw),zb.set("avif",Zw),Jb(ew,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Jb(ew,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Jb(ew,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Jb(tw,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let ex=Jb(tw,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const tx={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};ex.set(37392,tx),ex.set(41488,tx);const nx={0:"Normal",1:"Low",2:"High"};function rx(e){return"object"==typeof e&&void 0!==e.length?e[0]:e}function ix(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map((e=>String.fromCharCode(e)))),"0"!==t[2]&&0!==t[2]||t.pop(),t.join(".")}function sx(e){if("string"==typeof e){var[t,n,r,i,s,a]=e.trim().split(/[-: ]/g).map(Number),o=new Date(t,n-1,r);return Number.isNaN(i)||Number.isNaN(s)||Number.isNaN(a)||(o.setHours(i),o.setMinutes(s),o.setSeconds(a)),Number.isNaN(+o)?e:o}}function ax(e){if("string"==typeof e)return e;let t=[];if(0===e[1]&&0===e[e.length-1])for(let n=0;n<e.length;n+=2)t.push(ox(e[n+1],e[n]));else for(let n=0;n<e.length;n+=2)t.push(ox(e[n],e[n+1]));return Rb(String.fromCodePoint(...t))}function ox(e,t){return e<<8|t}ex.set(41992,nx),ex.set(41993,nx),ex.set(41994,nx),Jb(nw,["ifd0","ifd1"],[[50827,function(e){return"string"!=typeof e?Ub(e):e}],[306,sx],[40091,ax],[40092,ax],[40093,ax],[40094,ax],[40095,ax]]),Jb(nw,"exif",[[40960,ix],[36864,ix],[36867,sx],[36868,sx],[40962,rx],[40963,rx]]),Jb(nw,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class lx extends kw{static canHandle(e,t){return 225===e.getUint8(t+1)&&1752462448===e.getUint32(t+4)&&"http://ns.adobe.com/"===e.getString(t+4,20)}static headerLength(e,t){return"http://ns.adobe.com/xmp/extension/"===e.getString(t+4,34)?79:33}static findPosition(e,t){let n=super.findPosition(e,t);return n.multiSegment=n.extended=79===n.headerLength,n.multiSegment?(n.chunkCount=e.getUint8(t+72),n.chunkNumber=e.getUint8(t+76),0!==e.getUint8(t+77)&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((e=>e.chunk.getString())).join("")}normalizeInput(e){return"string"==typeof e?e:Fb.from(e).getString()}parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chunk;if(!this.localOptions.parse)return e;e=function(e){let t={},n={};for(let r of vx)t[r]=[],n[r]=0;return e.replace(yx,((e,r,i)=>{if("<"===r){let r=++n[i];return t[i].push(r),`${e}#${r}`}return`${e}#${t[i].pop()}`}))}(e);let t=ux.findAll(e,"rdf","Description");0===t.length&&t.push(new ux("rdf","Description",void 0,e));let n,r={};for(let i of t)for(let e of i.properties)n=px(e.ns,r),dx(e,n);return function(e){let t;for(let n in e)t=e[n]=Ab(e[n]),void 0===t&&delete e[n];return Ab(e)}(r)}assignToOutput(e,t){if(this.localOptions.parse)for(let[n,r]of Object.entries(t))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",r);break;case"exif":this.assignObjectToOutput(e,"exif",r);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,r)}else e.xmp=t}}Tb(lx,"type","xmp"),Tb(lx,"multiSegment",!0),$b.set("xmp",lx);class cx{static findAll(e){return mx(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(cx.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],r=e[3].slice(1,-1);return r=gx(r),new cx(t,n,r)}constructor(e,t,n){this.ns=e,this.name=t,this.value=n}serialize(){return this.value}}class ux{static findAll(e,t,n){if(void 0!==t||void 0!==n){t=t||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var r=new RegExp(`<(${t}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else r=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return mx(e,r).map(ux.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],r=e[4],i=e[8];return new ux(t,n,r,i)}constructor(e,t,n,r){this.ns=e,this.name=t,this.attrString=n,this.innerXml=r,this.attrs=cx.findAll(n),this.children=ux.findAll(r),this.value=0===this.children.length?gx(r):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return"rdf"===e&&("Seq"===t||"Bag"===t||"Alt"===t)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return fx(this.children.map(hx));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let e={};for(let t of this.properties)dx(t,e);return void 0!==this.value&&(e.value=this.value),Ab(e)}}function dx(e,t){let n=e.serialize();void 0!==n&&(t[e.name]=n)}var hx=e=>e.serialize(),fx=e=>1===e.length?e[0]:e,px=(e,t)=>t[e]?t[e]:t[e]={};function mx(e,t){let n,r=[];if(!e)return r;for(;null!==(n=t.exec(e));)r.push(n);return r}function gx(e){if(function(e){return null==e||"null"===e||"undefined"===e||""===e||""===e.trim()}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let n=e.toLowerCase();return"true"===n||"false"!==n&&e.trim()}const vx=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],yx=new RegExp(`(<|\\/)(${vx.join("|")})`,"g");Object.freeze({__proto__:null,default:Qw,Exifr:bw,fileParsers:zb,segmentParsers:$b,fileReaders:qb,tagKeys:ew,tagValues:tw,tagRevivers:nw,createDictionary:Jb,extendDictionary:Zb,fetchUrlAsArrayBuffer:Qb,readBlobAsArrayBuffer:Xb,chunkedProps:rw,otherSegments:iw,segments:sw,tiffBlocks:aw,segmentsAndBlocks:ow,tiffExtractables:lw,inheritables:cw,allFormatters:uw,Options:mw,parse:ww,gpsOnlyOptions:Rw,gps:Ow,thumbnailOnlyOptions:Lw,thumbnail:Mw,thumbnailUrl:Uw,orientationOnlyOptions:Fw,orientation:Bw,rotations:Vw,get rotateCanvas(){return zw},get rotateCss(){return $w},rotation:qw});let bx=Nb("fs",(e=>e.promises));qb.set("fs",class extends Kw{async readWhole(){this.chunked=!1,this.fs=await bx;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await bx,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){void 0===this.fh&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){void 0===this.fh&&await this.open(),e+t>this.size&&(t=this.size-e);var n=this.subarray(e,t,!0);return await this.fh.read(n.dataView,0,t,e),n}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}}),qb.set("base64",class extends Kw{constructor(){super(...arguments),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let n,r,i=this.input;void 0===e?(e=0,n=0,r=0):(n=4*Math.floor(e/3),r=e-n/4*3),void 0===t&&(t=this.size);let s=e+t,a=n+4*Math.ceil(s/3);i=i.slice(n,a);let o=Math.min(t,this.size-e);if(Eb){let t=kb.from(i,"base64").slice(r,r+o);return this.set(t,e,!0)}{let t=this.subarray(e,o,!0),n=atob(i),s=t.toUint8();for(let e=0;e<o;e++)s[e]=n.charCodeAt(r+e);return t}}});class wx extends Sw{static canHandle(e,t){return 18761===t||19789===t}extendOptions(e){let{ifd0:t,xmp:n,iptc:r,icc:i}=e;n.enabled&&t.deps.add(700),r.enabled&&t.deps.add(33723),i.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:n,icc:r}=this.options;if(e.enabled||t.enabled||n.enabled||r.enabled){let e=Math.max(Ob(this.options),this.options.chunkSize);await this.file.ensureChunk(0,e),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}Tb(wx,"type","tiff"),zb.set("tiff",wx);let xx=Nb("zlib");const Sx=["ihdr","iccp","text","itxt","exif"];class kx extends Sw{constructor(){super(...arguments),Tb(this,"catchError",(e=>this.errors.push(e))),Tb(this,"metaChunks",[]),Tb(this,"unknownChunks",[])}static canHandle(e,t){return 35152===t&&2303741511===e.getUint32(0)&&218765834===e.getUint32(4)}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:n}=this;for(;e<t;){let t=n.getUint32(e),r=n.getUint32(e+4),i=n.getString(e+4,4).toLowerCase(),s=t+4+4+4,a={type:i,offset:e,length:s,start:e+4+4,size:t,marker:r};Sx.includes(i)?this.metaChunks.push(a):this.unknownChunks.push(a),e+=s}}parseTextChunks(){let e=this.metaChunks.filter((e=>"text"===e.type));for(let t of e){let[e,n]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(e,n)}}injectKeyValToIhdr(e,t){let n=this.parsers.ihdr;n&&n.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find((e=>"ihdr"===e.type));e&&!1!==this.options.ihdr.enabled&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((e=>"exif"===e.type));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((e=>"itxt"===e.type));for(let t of e)"XML:com.adobe.xmp"===t.chunk.getString(0,17)&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find((e=>"iccp"===e.type));if(!e)return;let{chunk:t}=e,n=t.getUint8Array(0,81),r=0;for(;r<80&&0!==n[r];)r++;let i=r+2,s=t.getString(0,r);if(this.injectKeyValToIhdr("ProfileName",s),Sb){let e=await xx,n=t.getUint8Array(i);n=e.inflateSync(n),this.injectSegment("icc",n)}}}Tb(kx,"type","png"),zb.set("png",kx),Jb(ew,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Zb(ew,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Cx=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Zb(ew,"ifd0",Cx),Zb(ew,"exif",Cx),Jb(tw,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class Ex extends kw{static canHandle(e,t){return 224===e.getUint8(t+1)&&1246120262===e.getUint32(t+4)&&0===e.getUint8(t+8)}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Tb(Ex,"type","jfif"),Tb(Ex,"headerLength",9),$b.set("jfif",Ex),Jb(ew,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class _x extends kw{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Tb(_x,"type","ihdr"),$b.set("ihdr",_x),Jb(ew,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Jb(tw,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Nx extends kw{static canHandle(e,t){return 226===e.getUint8(t+1)&&1229144927===e.getUint32(t+4)}static findPosition(e,t){let n=super.findPosition(e,t);return n.chunkNumber=e.getUint8(t+16),n.chunkCount=e.getUint8(t+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return function(e){let t=function(e){let t=e[0].constructor,n=0;for(let s of e)n+=s.length;let r=new t(n),i=0;for(let s of e)r.set(s,i),i+=s.length;return r}(e.map((e=>e.chunk.toUint8())));return new Fb(t)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Db("ICC header is too short");for(let[t,n]of Object.entries(Ix)){t=parseInt(t,10);let r=n(this.chunk,t);"\0\0\0\0"!==r&&e.set(t,r)}}parseTags(){let e,t,n,r,i,{raw:s}=this,a=this.chunk.getUint32(128),o=132,l=this.chunk.byteLength;for(;a--;){if(e=this.chunk.getString(o,4),t=this.chunk.getUint32(o+4),n=this.chunk.getUint32(o+8),r=this.chunk.getString(t,4),t+n>l)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(r,t,n),void 0!==i&&"\0\0\0\0"!==i&&s.set(e,i),o+=12}}parseTag(e,t,n){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,n);case"sig ":return this.parseSig(t)}if(!(t+n>this.chunk.byteLength))return this.chunk.getUint8Array(t,n)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return Rb(this.chunk.getString(e+12,t))}parseText(e,t){return Rb(this.chunk.getString(e+8,t-8))}parseSig(e){return Rb(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,n=t.getUint32(e+8),r=t.getUint32(e+12),i=e+16,s=[];for(let a=0;a<n;a++){let n=t.getString(i+0,2),a=t.getString(i+2,2),o=t.getUint32(i+4),l=t.getUint32(i+8)+e,c=Rb(t.getUnicodeString(l,o));s.push({lang:n,country:a,text:c}),i+=r}return 1===n?s[0].text:s}translateValue(e,t){return"string"==typeof e?t[e]||t[e.toLowerCase()]||e:t[e]||e}}Tb(Nx,"type","icc"),Tb(Nx,"multiSegment",!0),Tb(Nx,"headerLength",18);const Ix={4:Tx,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map((e=>e.toString(10))).join(".")},12:Tx,16:Tx,20:Tx,24:function(e,t){const n=e.getUint16(t),r=e.getUint16(t+2)-1,i=e.getUint16(t+4),s=e.getUint16(t+6),a=e.getUint16(t+8),o=e.getUint16(t+10);return new Date(Date.UTC(n,r,i,s,a,o))},36:Tx,40:Tx,48:Tx,52:Tx,64:(e,t)=>e.getUint32(t),80:Tx};function Tx(e,t){return Rb(e.getString(t,4))}$b.set("icc",Nx),Jb(ew,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Ax={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},jx={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Jb(tw,"icc",[[4,Ax],[12,jx],[40,Object.assign({},Ax,jx)],[48,Ax],[80,Ax],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Px extends kw{static canHandle(e,t,n){return 237===e.getUint8(t+1)&&"Photoshop"===e.getString(t+4,9)&&void 0!==this.containsIptc8bim(e,t,n)}static headerLength(e,t,n){let r,i=this.containsIptc8bim(e,t,n);if(void 0!==i)return r=e.getUint8(t+i+7),r%2!=0&&(r+=1),0===r&&(r=4),i+8+r}static containsIptc8bim(e,t,n){for(let r=0;r<n;r++)if(this.isIptcSegmentHead(e,t+r))return r}static isIptcSegmentHead(e,t){return 56===e.getUint8(t)&&943868237===e.getUint32(t)&&1028===e.getUint16(t+4)}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,n=!1;for(let r=0;r<t;r++)if(28===this.chunk.getUint8(r)&&2===this.chunk.getUint8(r+1)){n=!0;let t=this.chunk.getUint16(r+3),i=this.chunk.getUint8(r+2),s=this.chunk.getLatin1String(r+5,t);e.set(i,this.pluralizeValue(e.get(i),s)),r+=4+t}else if(n)break;return this.translate(),this.output}pluralizeValue(e,t){return void 0!==e?e instanceof Array?(e.push(t),e):[e,t]:t}}Tb(Px,"type","iptc"),Tb(Px,"translateValues",!1),Tb(Px,"reviveValues",!1),$b.set("iptc",Px),Jb(ew,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Jb(tw,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);function Dx(){const{user:e,userData:n}=(0,t.useContext)(Dg),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)([]),[f,p]=(0,t.useState)(!1),m=ee(),g=hm(),v=ny(),y=async e=>{const t={maxSizeMB:1.5,maxWidthOrHeight:1024,useWebWorker:!0};try{return await ib(e,t)}catch(n){return console.error("\uc774\ubbf8\uc9c0 \ub9ac\uc0ac\uc774\uc9d5 \uc2e4\ud328:",n),e}},b=async e=>{try{const t=await ww(e,["Make","Model","DateTimeOriginal","FNumber","ExposureTime","ISO"]);return{cameraModel:`${t.Make||""} ${t.Model||""}`.trim(),takenAt:t.DateTimeOriginal||"",aperture:t.FNumber?`f/${t.FNumber}`:"",shutter:t.ExposureTime||"",iso:t.ISO||""}}catch(t){return console.warn("EXIF \ucd94\ucd9c \uc2e4\ud328:",t),{}}};return(0,Pg.jsxs)("div",{className:"max-w-2xl mx-auto mt-10 bg-white p-6 shadow rounded",children:[(0,Pg.jsx)("h2",{className:"text-2xl font-bold mb-4 text-sky-700",children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e)return alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");if(!r||!d.length)return alert("\uc81c\ubaa9\uacfc \uc774\ubbf8\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");p(!0);try{const t=[],i=[],a=[];for(const n of d){const r=await y(n),s=`${Date.now()}-${n.name}`,o=`gallery/${e.uid}/${s}`,l=ty(v,o);await Jv(l,r);const c=await Zv(l);t.push(c),i.push(o);const u=await b(n);a.push(u)}const l=o.split(",").map((e=>e.trim())).filter((e=>""!==e));await kg(sm(g,"gallery"),{title:r,description:s,url:t[0],images:t,imagePath:i[0],isPublic:c,hashtags:l,author:e.email,nickname:(null===n||void 0===n?void 0:n.nickname)||e.email,authorUid:e.uid,levelIcon:(null===n||void 0===n?void 0:n.levelIcon)||"\ud83d\udc64",createdAt:Ig(),metadata:a}),alert("\uc5c5\ub85c\ub4dc \uc644\ub8cc!"),m("/gallery")}catch(i){console.error("\uc5c5\ub85c\ub4dc \uc2e4\ud328:",i),alert("\uc5c5\ub85c\ub4dc \uc911 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{p(!1)}},className:"space-y-4",children:[(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files),n=[...d,...t].filter(((e,t,n)=>t===n.findIndex((t=>t.name===e.name&&t.size===e.size))));n.length>20?alert("\ucd5c\ub300 20\uc7a5\uae4c\uc9c0\ub9cc \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."):h(n)}}),(0,Pg.jsx)("p",{className:"text-xs text-gray-500",children:"\ucd5c\ub300 20\uc7a5, 1.5MB \uc774\ud558\ub85c \uc790\ub3d9 \uc555\ucd95\ub429\ub2c8\ub2e4."}),(0,Pg.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:d.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative border rounded overflow-hidden",children:[(0,Pg.jsx)("img",{src:URL.createObjectURL(e),alt:`preview-${t}`,className:"w-full h-40 object-cover"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>(e=>{const t=[...d];t.splice(e,1),h(t)})(t),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full text-xs px-2 py-0.5 hover:bg-red-600",children:"\u2715"})]},t)))}),(0,Pg.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"\uc81c\ubaa9",className:"w-full border rounded p-2",required:!0}),(0,Pg.jsx)("textarea",{value:s,onChange:e=>a(e.target.value),placeholder:"\uc124\uba85 (\uc120\ud0dd)",className:"w-full border rounded p-2 min-h-[100px]"}),(0,Pg.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"\ud574\uc2dc\ud0dc\uadf8 \uc785\ub825 (\uc608: \uac10\uc131, \ubc14\ub2e4, \uc5ec\ud589)",className:"w-full border rounded p-2"}),(0,Pg.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,Pg.jsx)("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked)}),"\uacf5\uac1c \uc5ec\ubd80"]}),(0,Pg.jsx)("button",{type:"submit",disabled:f,className:"bg-sky-600 hover:bg-sky-700 text-white px-4 py-2 rounded",children:f?"\uc5c5\ub85c\ub4dc \uc911...":"\uc5c5\ub85c\ub4dc"})]})]})}function Rx(){var e,n;const{id:r}=te(),i=ee(),s=hm(),{user:a,userData:o}=(0,t.useContext)(Dg),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)({}),[g,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1),[w,x]=(0,t.useState)(null),[S,k]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{const e=am(s,"gallery",r),t=await vg(e);if(t.exists()){var n;const e=t.data();let r="\ud83d\udc64";if(e.authorUid){const t=am(s,"users",e.authorUid),n=await vg(t);n.exists()&&(r=n.data().levelIcon||"\ud83d\udc64")}c({id:t.id,...e,levelIcon:r}),k(null===(n=e.likedBy)||void 0===n?void 0:n.includes(null===a||void 0===a?void 0:a.uid))}else alert("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uac8c\uc2dc\ubb3c\uc785\ub2c8\ub2e4."),i("/gallery")})()}),[s,r,i,null===a||void 0===a?void 0:a.uid]),(0,t.useEffect)((()=>{const e=Cg(eg(sm(s,"gallery",r,"comments"),sg("createdAt","asc")),(async e=>{const t=await Promise.all(e.docs.map((async e=>{const t=e.data();let n="\ud83d\udc64";if(t.authorUid){const e=am(s,"users",t.authorUid),r=await vg(e);r.exists()&&(n=r.data().levelIcon||"\ud83d\udc64")}const r=await C(e.id);return{id:e.id,...t,levelIcon:n,replies:r}})));d(t)}));return()=>e()}),[s,r]);const C=async e=>{const t=eg(sm(s,"gallery",r,"comments",e,"replies"),sg("createdAt"));return(await bg(t)).docs.map((e=>({id:e.id,...e.data()})))},E=e=>{if(!l.metadata||!l.metadata[e]||!y||w!==e)return null;const t=l.metadata[e];return(0,Pg.jsxs)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-70 text-white text-xs p-2 rounded max-w-xs",children:[(0,Pg.jsxs)("div",{children:["\ud83d\udcf7 ",t.model||"\uce74\uba54\ub77c \uc815\ubcf4 \uc5c6\uc74c"]}),(0,Pg.jsxs)("div",{children:["\ud83d\udcc5 ",t.date||"\ucd2c\uc601\uc77c \uc5c6\uc74c"]}),(0,Pg.jsxs)("div",{children:["\ud83c\udf19 \uc870\ub9ac\uac1c: ",t.aperture||"-"]}),(0,Pg.jsxs)("div",{children:["\u23f1 \uc154\ud130\uc18d\ub3c4: ",t.shutterSpeed||"-"]}),(0,Pg.jsxs)("div",{children:["\ud83d\udcf8 ISO: ",t.iso||"-"]})]})};return l?(0,Pg.jsx)("div",{className:"w-full min-h-screen",style:{backgroundColor:"#f3f4f6"},children:(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto bg-white border rounded shadow px-6 py-8",children:[(0,Pg.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,Pg.jsx)(Ie,{to:"/gallery",className:"text-blue-600 hover:underline text-sm",children:"\u2190 \uac24\ub7ec\ub9ac \ubaa9\ub85d\uc73c\ub85c"}),(null===a||void 0===a?void 0:a.uid)===l.authorUid&&(0,Pg.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,Pg.jsx)(Ie,{to:`/gallery/edit/${r}`,className:"text-green-600 hover:underline",children:"\u270f\ufe0f \uc218\uc815"}),(0,Pg.jsx)("button",{onClick:async()=>{window.confirm("\uc774 \uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await Sg(am(s,"gallery",r)),i("/gallery"))},className:"text-red-500 hover:underline",children:"\ud83d\uddd1 \uc0ad\uc81c"})]})]}),(0,Pg.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:l.title}),(0,Pg.jsxs)("div",{className:"text-sm text-gray-600 mb-4 flex gap-4 flex-wrap",children:[(0,Pg.jsxs)("span",{children:["\uc791\uc131\uc790: ",l.levelIcon||"\ud83d\udc64"," ",l.nickname||l.author]}),(0,Pg.jsxs)("span",{children:["\uc791\uc131\uc77c: ",null===(e=l.createdAt)||void 0===e?void 0:e.toDate().toLocaleString()]}),(0,Pg.jsxs)("span",{children:["\ucd94\ucc9c: ",l.likes||0]}),(null===a||void 0===a?void 0:a.uid)&&!S&&(0,Pg.jsx)("button",{onClick:async()=>{var e;const t=am(s,"gallery",r),n=(await vg(t)).data();null!==(e=n.likedBy)&&void 0!==e&&e.includes(a.uid)?alert("\uc774\ubbf8 \ucd94\ucc9c\ud558\uc168\uc2b5\ub2c8\ub2e4."):(await xg(t,{likes:jg(1),likedBy:[...n.likedBy||[],a.uid]}),k(!0),c((e=>({...e,likes:(e.likes||0)+1}))))},className:"text-blue-600 hover:underline text-sm",children:"\ud83d\udc4d \ucd94\ucc9c\ud558\uae30"})]}),(0,Pg.jsx)("div",{className:"space-y-8 mb-8",children:null===(n=l.images)||void 0===n?void 0:n.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative",children:[(0,Pg.jsx)("img",{src:e,alt:`\uc5c5\ub85c\ub4dc \uc774\ubbf8\uc9c0 ${t+1}`,className:"w-full max-w-3xl object-cover rounded-md cursor-pointer",onClick:()=>(e=>{x(e===w?null:e),b(e!==w)})(t)}),E(t)]},t)))}),l.description&&(0,Pg.jsx)("p",{className:"whitespace-pre-line text-gray-800 mb-10",children:l.description}),(0,Pg.jsxs)("div",{className:"mt-10 border-t pt-6",children:[(0,Pg.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["\ud83d\udcac \ub313\uae00 (",u.length,")"]}),0===u.length?(0,Pg.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"\ub313\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,Pg.jsx)("div",{className:"space-y-4 mb-6",children:u.map((e=>{var t,n,i;return(0,Pg.jsxs)("div",{className:"border-b pb-3 text-sm",children:[(0,Pg.jsxs)("div",{className:"flex justify-between text-gray-600 mb-1",children:[(0,Pg.jsxs)("span",{children:[e.levelIcon||"\ud83d\udc64"," ",e.nickname||e.author]}),(0,Pg.jsx)("span",{children:null===(t=e.createdAt)||void 0===t?void 0:t.toDate().toLocaleString()})]}),(0,Pg.jsx)("p",{className:"text-gray-800",children:e.content}),(0,Pg.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-3 mt-1",children:[(0,Pg.jsxs)("span",{children:["\ucd94\ucc9c: ",e.likes||0]}),(null===a||void 0===a?void 0:a.uid)&&!(null!==(n=e.likedBy)&&void 0!==n&&n.includes(a.uid))&&(0,Pg.jsx)("button",{onClick:()=>(async e=>{var t;if(null===a||void 0===a||!a.uid)return;const n=am(s,"gallery",r,"comments",e),i=(await vg(n)).data();null!==(t=i.likedBy)&&void 0!==t&&t.includes(a.uid)?alert("\uc774\ubbf8 \ucd94\ucc9c\ud558\uc168\uc2b5\ub2c8\ub2e4."):await xg(n,{likes:jg(1),likedBy:[...i.likedBy||[],a.uid]})})(e.id),className:"text-blue-500 hover:underline",children:"\ud83d\udc4d \ub313\uae00 \ucd94\ucc9c\ud558\uae30"})]}),(null===a||void 0===a?void 0:a.uid)===e.authorUid&&(0,Pg.jsx)("button",{onClick:()=>(async e=>{window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&await Sg(am(s,"gallery",r,"comments",e))})(e.id),className:"text-xs text-red-500 hover:underline mt-1",children:"\uc0ad\uc81c"}),(null===(i=e.replies)||void 0===i?void 0:i.length)>0&&(0,Pg.jsx)("div",{className:"mt-3 ml-4 space-y-2 border-l pl-4",children:e.replies.map((t=>{var n;return(0,Pg.jsxs)("div",{children:[(0,Pg.jsxs)("div",{className:"text-xs text-gray-600 flex justify-between",children:[(0,Pg.jsxs)("span",{children:[t.nickname||t.author," \xb7 ",null===(n=t.createdAt)||void 0===n?void 0:n.toDate().toLocaleString()]}),(null===a||void 0===a?void 0:a.uid)===t.authorUid&&(0,Pg.jsx)("button",{onClick:()=>(async(e,t)=>{window.confirm("\ub2f5\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&await Sg(am(s,"gallery",r,"comments",e,"replies",t))})(e.id,t.id),className:"text-red-400 text-xs hover:underline",children:"\uc0ad\uc81c"})]}),(0,Pg.jsx)("div",{className:"text-sm text-gray-800",children:t.content})]},t.id)}))}),a&&(0,Pg.jsx)("div",{className:"mt-2",children:g===e.id?(0,Pg.jsxs)("form",{onSubmit:t=>(async(e,t)=>{e.preventDefault();const n=p[t];null!==n&&void 0!==n&&n.trim()&&(await kg(sm(s,"gallery",r,"comments",t,"replies"),{content:n,author:(null===a||void 0===a?void 0:a.email)||"\uc775\uba85",nickname:(null===o||void 0===o?void 0:o.nickname)||"",authorUid:(null===a||void 0===a?void 0:a.uid)||"",createdAt:Ig()}),m((e=>({...e,[t]:""}))),v(null))})(t,e.id),className:"space-y-2",children:[(0,Pg.jsx)("textarea",{value:p[e.id]||"",onChange:t=>m((n=>({...n,[e.id]:t.target.value}))),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",className:"w-full p-2 border rounded min-h-[60px] text-sm"}),(0,Pg.jsxs)("div",{className:"flex gap-2",children:[(0,Pg.jsx)("button",{type:"submit",className:"text-xs px-3 py-1 bg-gray-300 rounded hover:bg-gray-400",children:"\ub2f5\uae00 \uc791\uc131"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>v(null),className:"text-xs text-red-500 hover:underline",children:"\ucde8\uc18c"})]})]}):(0,Pg.jsx)("button",{onClick:()=>v(e.id),className:"text-xs text-blue-500 hover:underline",children:"\ub2f5\uae00\uc4f0\uae30"})})]},e.id)}))}),a?(0,Pg.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h.trim()&&(await kg(sm(s,"gallery",r,"comments"),{content:h,author:(null===a||void 0===a?void 0:a.email)||"\uc775\uba85",nickname:(null===o||void 0===o?void 0:o.nickname)||"",authorUid:(null===a||void 0===a?void 0:a.uid)||"",createdAt:Ig(),likes:0,likedBy:[]}),null!==a&&void 0!==a&&a.uid&&a.uid!==(null===l||void 0===l?void 0:l.authorUid)&&null!==l&&void 0!==l&&l.authorUid&&await kg(sm(s,"notifications"),{recipientUid:l.authorUid,postId:r,boardType:"gallery",postTitle:l.title||"\uac24\ub7ec\ub9ac \uac8c\uc2dc\ubb3c",commentSnippet:h.slice(0,30),timestamp:Ig(),isRead:!1}),f(""))},className:"space-y-2",children:[(0,Pg.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),className:"w-full border rounded p-2 min-h-[80px]",placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-600 text-white px-4 py-2 rounded hover:bg-sky-700",children:"\ub313\uae00 \uc791\uc131"})]}):(0,Pg.jsx)("p",{className:"text-sm text-gray-500",children:"\u203b \ub85c\uadf8\uc778 \ud6c4 \ub313\uae00\uc744 \uc791\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})]})}):(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\uac8c\uc2dc\ubb3c\uc744 \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."})}function Ox(){const{id:e}=te(),n=ee(),r=hm(),i=ny(),{user:s}=(0,t.useContext)(Dg),[a,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(""),[g,v]=(0,t.useState)(!0),[y,b]=(0,t.useState)([]),[w,x]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{const t=am(r,"gallery",e),i=await vg(t);if(i.exists()){var a,l;const e=i.data();if((null===s||void 0===s?void 0:s.uid)!==e.authorUid)return alert("\uc791\uc131\uc790\ub9cc \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),void n("/gallery");c(e),d(e.title),f(e.description||""),m((null===(a=e.hashtags)||void 0===a?void 0:a.join(", "))||""),v(null===(l=e.isPublic)||void 0===l||l),b(e.images||[])}else alert("\uac8c\uc2dc\uae00\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),n("/gallery");o(!1)})()}),[r,e,s,n]);return a?(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."}):(0,Pg.jsxs)("div",{className:"max-w-3xl mx-auto mt-10 p-4",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center text-sky-700",children:"\ud83d\udd8a \uac24\ub7ec\ub9ac \uac8c\uc2dc\uae00 \uc218\uc815"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0);try{const t=[...y];for(const e of w){const n=await ib(e,{maxSizeMB:1}),r=`${s.uid}_${Date.now()}_${e.name}`,a=ty(i,`gallery/${s.uid}/${r}`);await Jv(a,n);const o=await Zv(a);t.push(o)}const a=p.split(",").map((e=>e.trim())).filter((e=>""!==e));await xg(am(r,"gallery",e),{title:u,description:h,hashtags:a,isPublic:g,images:t}),alert("\uc218\uc815 \uc644\ub8cc!"),n(`/gallery/${e}`)}catch(a){console.error("\uc218\uc815 \uc2e4\ud328:",a),alert("\uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}o(!1)},className:"space-y-4",children:[(0,Pg.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),placeholder:"\uc81c\ubaa9",required:!0,className:"w-full border rounded p-2"}),(0,Pg.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),placeholder:"\uc124\uba85",className:"w-full border rounded p-2 min-h-[100px]"}),(0,Pg.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),placeholder:"\ud574\uc2dc\ud0dc\uadf8 (\uc608: \ubc14\ub2e4, \uc5ec\ud589)",className:"w-full border rounded p-2"}),(0,Pg.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Pg.jsx)("input",{type:"checkbox",checked:g,onChange:e=>v(e.target.checked)}),"\uacf5\uac1c \uc5ec\ubd80"]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"font-semibold mb-2",children:"\ud83d\udcf7 \uae30\uc874 \uc774\ubbf8\uc9c0"}),(0,Pg.jsx)("div",{className:"grid grid-cols-2 gap-4",children:y.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative",children:[(0,Pg.jsx)("img",{src:e,alt:`img-${t}`,className:"w-full rounded"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>(e=>{if(!window.confirm("\uc774\ubbf8\uc9c0\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))return;const t=y.filter(((t,n)=>n!==e));b(t)})(t),className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:"\uc0ad\uc81c"})]},t)))})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"font-semibold mt-6 mb-2",children:"\u2795 \uc0c8 \uc774\ubbf8\uc9c0 \ucd94\uac00"}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{x([...w,...Array.from(e.target.files)])},className:"mb-2"}),(0,Pg.jsx)("div",{className:"grid grid-cols-2 gap-4",children:w.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative",children:[(0,Pg.jsx)("img",{src:URL.createObjectURL(e),alt:`new-${t}`,className:"w-full rounded"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>(e=>{const t=[...w];t.splice(e,1),x(t)})(t),className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:"\uc0ad\uc81c"})]},t)))})]}),(0,Pg.jsx)("div",{className:"flex justify-end",children:(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-600 hover:bg-sky-700 text-white px-6 py-2 rounded",children:"\uc800\uc7a5"})})]})]})}function Lx(){const{user:e,userData:n}=(0,t.useContext)(Dg),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),d=hm(),h=ee();return(0,Pg.jsxs)("div",{className:"max-w-xl mx-auto mt-10 bg-white p-6 rounded shadow",children:[(0,Pg.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\u270d\ufe0f \ud574\uc678\ud22c\uc5b4 \uc601\uc0c1 \uc5c5\ub85c\ub4dc"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r&&o)try{await kg(sm(d,"tourVideos"),{title:r,description:s,videoUrl:o,createdAt:Ig(),authorUid:(null===e||void 0===e?void 0:e.uid)||"",author:(null===e||void 0===e?void 0:e.email)||"",nickname:(null===n||void 0===n?void 0:n.nickname)||(null===e||void 0===e?void 0:e.displayName)||"\uc775\uba85"}),u(!0),setTimeout((()=>h("/tour-videos")),2e3)}catch(i){console.error(i),alert("\uc5c5\ub85c\ub4dc \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else alert("\uc81c\ubaa9\uacfc \uc601\uc0c1 \ub9c1\ud06c\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},className:"space-y-4",children:[(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-1 font-medium",children:"\uc81c\ubaa9"}),(0,Pg.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),className:"w-full border rounded p-2",required:!0})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-1 font-medium",children:"\uc124\uba85 (\uc120\ud0dd)"}),(0,Pg.jsx)("textarea",{value:s,onChange:e=>a(e.target.value),className:"w-full border rounded p-2 min-h-[100px]"})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-1 font-medium",children:"\uc601\uc0c1 \ub9c1\ud06c (YouTube \ub610\ub294 \uc9c1\uc811 URL)"}),(0,Pg.jsx)("input",{type:"url",value:o,onChange:e=>l(e.target.value),className:"w-full border rounded p-2",required:!0})]}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-500 hover:bg-sky-600 text-white px-4 py-2 rounded",children:"\uc5c5\ub85c\ub4dc"}),c&&(0,Pg.jsxs)("p",{className:"text-green-600 flex items-center mt-2",children:[(0,Pg.jsx)("span",{className:"text-xl mr-2",children:"\u2705"})," \uc5c5\ub85c\ub4dc \uc644\ub8cc!"]})]})]})}function Mx(){const[e,n]=(0,t.useState)([]),r=hm(),i=ee(),{user:s}=(0,t.useContext)(Dg);(0,t.useEffect)((()=>{(async()=>{const e=eg(sm(r,"tourVideos"),sg("createdAt","desc")),t=await bg(e),i=t.docs.map(((e,n)=>({id:e.id,no:t.size-n,...e.data()})));n(i)})()}),[r]);return(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto mt-10 px-4",children:[(0,Pg.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold",children:"\ud83c\udfac Tour Videos (Youtube)"}),(0,Pg.jsx)("button",{onClick:()=>i("/tour-videos/upload"),className:"bg-sky-600 text-white px-4 py-2 rounded hover:bg-sky-700",children:"\u270d\ufe0f \uc601\uc0c1 \uc5c5\ub85c\ub4dc"})]}),(0,Pg.jsxs)("table",{className:"w-full text-sm border-t border-gray-300",children:[(0,Pg.jsx)("thead",{children:(0,Pg.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,Pg.jsx)("th",{className:"p-2 w-[50px]",children:"\ubc88\ud638"}),(0,Pg.jsx)("th",{className:"p-2 w-[100px]",children:"\uc378\ub124\uc77c"}),(0,Pg.jsx)("th",{className:"p-2 w-[180px]",children:"\uc81c\ubaa9"}),(0,Pg.jsx)("th",{className:"p-2 w-[120px]",children:"\uc791\uc131\uc790"}),(0,Pg.jsx)("th",{className:"p-2 w-[180px]",children:"\ub0a0\uc9dc"}),(0,Pg.jsx)("th",{className:"p-2 w-[100px]",children:"\ucd94\ucc9c"}),(0,Pg.jsx)("th",{className:"p-2 w-[100px]",children:"\uad00\ub9ac"})]})}),(0,Pg.jsx)("tbody",{children:e.map((e=>{var t,a,o,l;const c=(null===s||void 0===s?void 0:s.uid)&&e.authorUid===s.uid||(null===s||void 0===s?void 0:s.email)&&e.author===s.email;return(0,Pg.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,Pg.jsx)("td",{className:"p-2 text-center",children:e.no}),(0,Pg.jsx)("td",{className:"p-2",children:(0,Pg.jsx)("img",{src:`https://img.youtube.com/vi/${Ux(e.videoUrl)}/0.jpg`,alt:"\uc378\ub124\uc77c",className:"w-20 h-12 object-cover rounded cursor-pointer",onClick:()=>{window.confirm("\uc774 \uc601\uc0c1\uc744 \uc720\ud29c\ube0c\uc5d0\uc11c \ubcf4\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n(\ud83d\udd0a \uc18c\ub9ac\uac00 \ub098\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4)")&&window.open(e.videoUrl,"_blank")}})}),(0,Pg.jsx)("td",{className:"p-2",children:(0,Pg.jsx)("span",{className:"font-medium text-blue-600 hover:underline cursor-help",title:e.description||"\uc124\uba85 \uc5c6\uc74c",children:e.title})}),(0,Pg.jsx)("td",{className:"p-2",children:e.nickname||e.author}),(0,Pg.jsx)("td",{className:"p-2 whitespace-nowrap",children:(null===(t=e.createdAt)||void 0===t||null===(a=t.toDate)||void 0===a||null===(o=(l=a.call(t)).toLocaleString)||void 0===o?void 0:o.call(l))||"\ub0a0\uc9dc \uc5c6\uc74c"}),(0,Pg.jsx)("td",{className:"p-2 text-center",children:(0,Pg.jsxs)("button",{onClick:()=>(async e=>{var t;if(null===s||void 0===s||!s.uid)return;if(null!==(t=e.likedBy)&&void 0!==t&&t.includes(s.uid))return void alert("\uc774\ubbf8 \ucd94\ucc9c\ud558\uc168\uc2b5\ub2c8\ub2e4.");const i=am(r,"tourVideos",e.id);await xg(i,{likes:jg(1),likedBy:[...e.likedBy||[],s.uid]}),n((t=>t.map((t=>t.id===e.id?{...t,likes:(t.likes||0)+1,likedBy:[...t.likedBy||[],s.uid]}:t))))})(e),className:"text-xs text-gray-700 hover:text-blue-600",children:["\ud83d\udc4d ",e.likes||0]})}),(0,Pg.jsx)("td",{className:"p-2 text-center",children:c&&(0,Pg.jsxs)(Pg.Fragment,{children:[(0,Pg.jsx)("button",{onClick:()=>{return t=e.id,void i(`/tour-videos/edit/${t}`);var t},className:"text-xs text-green-600 hover:underline mr-2",children:"\uc218\uc815"}),(0,Pg.jsx)("button",{onClick:()=>(async e=>{window.confirm("\uc815\ub9d0 \uc774 \uc601\uc0c1\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await Sg(am(r,"tourVideos",e)),n((t=>t.filter((t=>t.id!==e)))))})(e.id),className:"text-xs text-red-500 hover:underline",children:"\uc0ad\uc81c"})]})})]},e.id)}))})]})]})}function Ux(e){try{const t=new URL(e);return t.hostname.includes("youtu.be")?t.pathname.slice(1):t.hostname.includes("youtube.com")?t.searchParams.get("v"):""}catch(Iy){return""}}function Fx(){const{id:e}=te(),n=ee(),r=hm(),{user:i}=(0,t.useContext)(Dg),[s,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{const t=am(r,"tourVideos",e),s=await vg(t);if(s.exists()){const e=s.data();if((null===i||void 0===i?void 0:i.uid)!==e.authorUid)return alert("\uc791\uc131\uc790\ub9cc \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),void n("/tour-videos");a(e),l(e.title),u(e.description||""),h(e.videoUrl||"")}else alert("\uc601\uc0c1\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),n("/tour-videos")})()}),[r,e,i,n]);return s?(0,Pg.jsxs)("div",{className:"max-w-xl mx-auto mt-10 p-4",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center text-sky-700",children:"\u270f\ufe0f \ud22c\uc5b4 \uc601\uc0c1 \uc218\uc815"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await xg(am(r,"tourVideos",e),{title:o,description:c,videoUrl:d}),alert("\uc218\uc815 \uc644\ub8cc!"),n("/tour-videos")}catch(i){console.error("\uc218\uc815 \uc2e4\ud328:",i),alert("\uc218\uc815 \uc911 \uc624\ub958 \ubc1c\uc0dd")}},className:"space-y-4",children:[(0,Pg.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"\uc81c\ubaa9",required:!0,className:"w-full border rounded p-2"}),(0,Pg.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"\uc124\uba85",className:"w-full border rounded p-2 min-h-[100px]"}),(0,Pg.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),placeholder:"YouTube \ub9c1\ud06c",className:"w-full border rounded p-2"}),(0,Pg.jsx)("div",{className:"flex justify-end",children:(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-600 hover:bg-sky-700 text-white px-6 py-2 rounded",children:"\uc800\uc7a5"})})]})]}):(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."})}function Bx(){const[e,n]=(0,t.useState)([]);return(0,t.useEffect)((()=>{n([{id:1,name:"\ub2e4\uc774\ube59 \uc7a5\ube44",price:15e4,description:"\ucd5c\uace0\uc758 \ub2e4\uc774\ube59 \uc7a5\ube44"},{id:2,name:"\uc2a4\ucfe0\ubc84 \ub9c8\uc2a4\ud06c",price:5e4,description:"\ud3b8\uc548\ud55c \ucc29\uc6a9\uac10\uc758 \uc2a4\ucfe0\ubc84 \ub9c8\uc2a4\ud06c"},{id:3,name:"\ub2e4\uc774\ube59 \ucef4\ud4e8\ud130",price:35e4,description:"\uc815\ud655\ud55c \ub2e4\uc774\ube59 \ub370\uc774\ud130 \uae30\ub85d"}])}),[]),(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto mt-10 p-6",children:[(0,Pg.jsx)("h2",{className:"text-2xl font-bold text-sky-700",children:"\ud83d\uded2 \uc1fc\ud551\ubab0"}),(0,Pg.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:e.map((e=>(0,Pg.jsxs)("div",{className:"bg-white rounded shadow p-4",children:[(0,Pg.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.name}),(0,Pg.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,Pg.jsxs)("p",{className:"text-xl font-bold text-gray-700",children:[e.price.toLocaleString()," \uc6d0"]}),(0,Pg.jsx)("button",{className:"bg-sky-500 text-white px-4 py-2 rounded mt-4 hover:bg-sky-600",children:"\uc7a5\ubc14\uad6c\ub2c8\uc5d0 \ucd94\uac00"})]},e.id)))})]})}function Vx(){return(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[(0,Pg.jsx)("h1",{className:"text-3xl font-bold text-sky-700 mb-4",children:"\u2699\ufe0f \ub2e4\uc774\ube59 \uc7a5\ube44 \uc18c\uac1c"}),(0,Pg.jsx)("p",{className:"text-gray-700 mb-6 text-lg",children:"\ub2e4\uc774\ube59\uc744 \uc548\uc804\ud558\uace0 \ud3b8\uc548\ud558\uac8c \uc990\uae30\uae30 \uc704\ud55c \ub2e4\uc591\ud55c \uc7a5\ube44\ub4e4\uc744 \uc18c\uac1c\ud569\ub2c8\ub2e4."}),(0,Pg.jsxs)("div",{className:"bg-white rounded shadow p-6 space-y-4",children:[(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"BCD (\ubd80\ub825 \uc870\uc808\uae30)"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-sm",children:"\uc218\uc911\uc5d0\uc11c \ubd80\ub825\uc744 \uc870\uc808\ud558\uace0 \uacf5\uae30\ud1b5\uc744 \uace0\uc815\ud558\ub294 \ud575\uc2ec \uc7a5\ube44\uc785\ub2c8\ub2e4."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\ub808\uade4\ub808\uc774\ud130"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-sm",children:"\uacf5\uae30\ud1b5\uc5d0\uc11c \ub098\uc624\ub294 \uace0\uc555\uc758 \uacf5\uae30\ub97c \uc801\uc808\ud55c \uc555\ub825\uc73c\ub85c \uc870\uc808\ud558\uc5ec \ub9c8\uc2a4\ud06c\ub97c \ud1b5\ud574 \ud638\ud761\ud558\uac8c \ud569\ub2c8\ub2e4."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\ub9c8\uc2a4\ud06c & \ud540"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-sm",children:"\ubb3c\uc18d\uc5d0\uc11c \uc120\uba85\ud558\uac8c \ubcf4\uace0 \ud6a8\uc728\uc801\uc73c\ub85c \uc774\ub3d9\ud558\uae30 \uc704\ud55c \uc7a5\ube44\uc785\ub2c8\ub2e4."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\ub2e4\uc774\ube59 \uc288\ud2b8"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-sm",children:"\uccb4\uc628 \uc720\uc9c0\uc640 \ud53c\ubd80 \ubcf4\ud638\ub97c \uc704\ud574 \uc0ac\uc6a9\ub418\ub294 \uc288\ud2b8\ub85c, \uc218\uc628\uc5d0 \ub530\ub77c \ub4dc\ub77c\uc774 \uc288\ud2b8\uc640 \uc6fb \uc288\ud2b8\ub85c \ub098\ub269\ub2c8\ub2e4."})]})]}),(0,Pg.jsx)("p",{className:"text-sm text-gray-400 mt-8",children:"\u203b \uc81c\ud488 \ud310\ub9e4 \uae30\ub2a5\uc740 \ucd94\ud6c4 \ucd94\uac00\ub420 \uc608\uc815\uc785\ub2c8\ub2e4."})]})}function zx(){return(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[(0,Pg.jsx)("h1",{className:"text-3xl font-bold text-sky-700 mb-4",children:"\ud83c\udf8e \ud53c\uaddc\uc5b4 \uc8fc\ubb38 \uc81c\uc791"}),(0,Pg.jsx)("p",{className:"text-gray-700 mb-6 text-lg",children:"Oceanic VR Dive\uc5d0\uc11c\ub294 \uace0\uac1d\ub2d8\ub4e4\uc758 \uc2e4\uc81c \uc0ac\uc9c4\uc744 \ubc14\ud0d5\uc73c\ub85c \ub2e4\uc774\ube59 \uc7a5\ube44\ub97c \ucc29\uc6a9\ud55c \ub9de\ucda4\ud615 \ud53c\uaddc\uc5b4\ub97c \uc81c\uc791\ud574\ub4dc\ub9bd\ub2c8\ub2e4."}),(0,Pg.jsxs)("div",{className:"bg-white rounded shadow p-6",children:[(0,Pg.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\ud83d\udce6 \uc11c\ube44\uc2a4 \uc548\ub0b4"}),(0,Pg.jsxs)("ul",{className:"list-disc ml-5 space-y-2 text-gray-700 text-sm",children:[(0,Pg.jsx)("li",{children:"\uace0\uac1d\uc774 \uc81c\uacf5\ud55c \uc0ac\uc9c4\uc744 \uae30\ubc18\uc73c\ub85c 3D \ud53c\uaddc\uc5b4 \uc81c\uc791"}),(0,Pg.jsx)("li",{children:"\ub2e4\uc774\ube59 \uc7a5\ube44(BCD, \ub9c8\uc2a4\ud06c, \ud540 \ub4f1) \ucc29\uc6a9 \uc0c1\ud0dc \ud45c\ud604"}),(0,Pg.jsx)("li",{children:"\uc81c\uc791 \uae30\uac04: \uc57d 2~3\uc8fc \uc18c\uc694"}),(0,Pg.jsx)("li",{children:"\ubc30\uc1a1: \uc804 \uc138\uacc4 \uac00\ub2a5 (\ucd94\uac00 \ubc30\uc1a1\ube44 \uc788\uc74c)"}),(0,Pg.jsx)("li",{children:"\uac00\uaca9 \ubc0f \uc0c1\uc138 \uc635\uc158\uc740 \ucd94\ud6c4 \uc5c5\ub370\uc774\ud2b8 \uc608\uc815"})]})]}),(0,Pg.jsx)("p",{className:"text-sm text-gray-400 mt-8",children:"\u203b \uc8fc\ubb38 \uae30\ub2a5\uc740 \uace7 \uc624\ud508 \uc608\uc815\uc785\ub2c8\ub2e4."})]})}function $x(){return(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[(0,Pg.jsx)("h1",{className:"text-3xl font-bold text-sky-700 mb-4",children:"\ud83e\uddf3 \uae30\ud0c0 \ub2e4\uc774\ube59 \uad00\ub828 \uc0c1\ud488"}),(0,Pg.jsx)("p",{className:"text-gray-700 mb-6 text-lg",children:"Oceanic VR Dive\uc5d0\uc11c\ub294 \ub2e4\uc774\ube59\uc744 \ub354\uc6b1 \uc990\uac81\uac8c \ud574\uc904 \ub2e4\uc591\ud55c \uc81c\ud488\ub4e4\ub3c4 \uc900\ube44\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Pg.jsxs)("div",{className:"bg-white rounded shadow p-6 space-y-4",children:[(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\ubc29\uc218 \ud30c\uc6b0\uce58"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-sm",children:"\ud734\ub300\ud3f0\uc774\ub098 \uc5f4\uc1e0 \ub4f1\uc744 \ubb3c\uc5d0\uc11c \uc548\uc804\ud558\uac8c \ubcf4\ud638\ud560 \uc218 \uc788\ub294 \ud544\uc218\ud488\uc785\ub2c8\ub2e4."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\uae30\ub150 \ubc30\uc9c0 & \uc2a4\ud2f0\ucee4"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-sm",children:"\ub2e4\uc774\ube59 \ub85c\uace0\ub098 Oceanic VR Dive \ub85c\uace0\uac00 \ub4e4\uc5b4\uac04 \ud55c\uc815 \uad7f\uc988\uc785\ub2c8\ub2e4."})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"\uae30\ud0c0 \uc545\uc138\uc11c\ub9ac"}),(0,Pg.jsx)("p",{className:"text-gray-700 text-sm",children:"\ub9c8\uc6b0\uc2a4\ud328\ub4dc, \ucef5\ubc1b\uce68, \uc5f4\uc1e0\uace0\ub9ac \ub4f1 \ub2e4\uc774\ubc84 \uac10\uc131\uc758 \ub2e4\uc591\ud55c \uc18c\ud488\uc774 \uc900\ube44\ub420 \uc608\uc815\uc785\ub2c8\ub2e4."})]})]}),(0,Pg.jsx)("p",{className:"text-sm text-gray-400 mt-8",children:"\u203b \uace7 \ub9cc\ub098\ubcf4\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})}function qx(){const[e,n]=(0,t.useState)([]),r=hm(),{userData:i}=(0,t.useContext)(Dg),s=ee();return(0,t.useEffect)((()=>{const e=Cg(eg(sm(r,"divePoints"),sg("createdAt","desc")),(async e=>{const t=await Promise.all(e.docs.map((async e=>{const t=e.data();let n=t.author,i="\ud83d\udc64";if(t.authorUid){const e=am(r,"users",t.authorUid),s=await vg(e);if(s.exists()){const e=s.data();n=e.nickname||t.author,i=e.levelIcon||"\ud83d\udc64"}}return{id:e.id,...t,nickname:n,levelIcon:i}})));n(t)}));return()=>e()}),[r]),(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto mt-6 px-4",children:[(0,Pg.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Pg.jsx)("h1",{className:"text-xl font-bold",children:"\ud83c\udf0d \ub2e4\uc774\ube0c \ud3ec\uc778\ud2b8"}),(null===i||void 0===i?void 0:i.admin)&&(0,Pg.jsx)("button",{onClick:()=>s("/points/write"),className:"bg-emerald-500 text-white px-3 py-1.5 text-sm rounded hover:bg-emerald-600",children:"\ud3ec\uc778\ud2b8 \ub4f1\ub85d"})]}),(0,Pg.jsx)("div",{className:"overflow-x-auto",children:(0,Pg.jsxs)("table",{className:"min-w-full text-sm text-center border border-gray-200",children:[(0,Pg.jsx)("thead",{className:"bg-gray-100 text-gray-700",children:(0,Pg.jsxs)("tr",{children:[(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\ubc88\ud638"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-24",children:"\uc9c0\uc5ed"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-32",children:"\ub9ac\uc870\ud2b8"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border text-left w-[40%]",children:"\ud3ec\uc778\ud2b8\uba85"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-28",children:"\uc791\uc131\uc790"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-28",children:"\uc791\uc131\uc77c"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-16",children:"\uc870\ud68c"})]})}),(0,Pg.jsx)("tbody",{children:e.map(((t,n)=>{var r;return(0,Pg.jsxs)("tr",{className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>s(`/points/${t.id}`),children:[(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:e.length-n}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.region||"-"}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.resort||"-"}),(0,Pg.jsx)("td",{className:"py-2 px-2 border text-left truncate text-blue-700 underline",children:t.title}),(0,Pg.jsxs)("td",{className:"py-2 px-2 border",children:[(0,Pg.jsx)("span",{className:"mr-1",children:t.levelIcon}),t.nickname]}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:null===(r=t.createdAt)||void 0===r?void 0:r.toDate().toLocaleDateString("ko-KR")}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.views||0})]},t.id)}))})]})})]})}function Hx(){const{user:e,userData:n}=(0,t.useContext)(Dg),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)([]),[v,y]=(0,t.useState)(!1),b=ee(),w=hm(),x=ny();(0,t.useEffect)((()=>{["\ud83c\udd58","Trainer"].includes(null===n||void 0===n?void 0:n.levelIcon)||(alert("\uc774 \ud398\uc774\uc9c0\ub294 Instructor \ub610\ub294 Trainer\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),b("/points"))}),[n,b]);return(0,Pg.jsxs)("div",{className:"max-w-3xl mx-auto p-6 bg-white shadow rounded mt-6",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\ud83c\udf0a \ub2e4\uc774\ube0c \ud3ec\uc778\ud2b8 \ub4f1\ub85d"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r&&s&&o&&d){y(!0);try{const t=[];for(const e of m){const n=ty(x,`divePoints/${Date.now()}_${e.originalName}`);await Jv(n,e);const r=await Zv(n);t.push(r)}await kg(sm(w,"divePoints"),{title:o,region:r,resort:s,depth:c,description:d,location:f,imageUrls:t,author:e.email,authorUid:e.uid,nickname:(null===n||void 0===n?void 0:n.nickname)||e.email,levelIcon:(null===n||void 0===n?void 0:n.levelIcon)||"\ud83d\udc64",createdAt:Ig(),views:0}),alert("\ud3ec\uc778\ud2b8\uac00 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),b("/points")}catch(i){console.error("\ud3ec\uc778\ud2b8 \ub4f1\ub85d \uc2e4\ud328:",i),alert("\ub4f1\ub85d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}y(!1)}else alert("\ud544\uc218 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},children:[(0,Pg.jsx)("input",{type:"text",placeholder:"\uc9c0\uc5ed\uba85 (\uc608: \uc81c\uc8fc\ub3c4, \uc138\ubd80 \ub4f1)",value:r,onChange:e=>i(e.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",placeholder:"\ub9ac\uc870\ud2b8\uba85 (\uc608: \uc624\uc158\ube14\ub8e8 \ub9ac\uc870\ud2b8)",value:s,onChange:e=>a(e.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",placeholder:"\ud3ec\uc778\ud2b8\uba85",value:o,onChange:e=>l(e.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",placeholder:"\uc218\uc2ec \uc815\ubcf4 (\uc608: \ucd5c\ub300 18m-30\ubd84 \ub2e4\uc774\ube59)",value:c,onChange:e=>u(e.target.value),className:"w-full mb-4 p-2 border rounded"}),(0,Pg.jsx)("textarea",{placeholder:"\ud3ec\uc778\ud2b8\uc5d0 \ub300\ud55c \uc0c1\uc138\ud55c \uc124\uba85\uc744 \uae30\uc785\ud558\uc5ec \uc8fc\uc138\uc694.",value:d,onChange:e=>h(e.target.value),className:"w-full mb-4 p-2 border rounded h-40",required:!0}),(0,Pg.jsx)("input",{type:"text",placeholder:"\uc704\uce58\uba85 \ub610\ub294 \uc88c\ud45c (\uc608: \uc81c\uc8fc\ub3c4 \uc11c\uadc0\ud3ec\uc2dc \ub610\ub294 33.4996,126.5312-Google Map \uae30\ubc18\uc785\ub2c8\ub2e4.)",value:f,onChange:e=>p(e.target.value),className:"w-full mb-4 p-2 border rounded"}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const t=Array.from(e.target.files);if(m.length+t.length>10)return void alert("\uc774\ubbf8\uc9c0\ub294 \ucd5c\ub300 10\uc7a5\uae4c\uc9c0 \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const n=await Promise.all(t.map((async e=>{const t={maxSizeMB:.7,maxWidthOrHeight:1920,useWebWorker:!0};try{const n=await ib(e,t);return n.originalName=e.name,n}catch(n){return console.error("\uc555\ucd95 \uc2e4\ud328:",n),null}})));g((e=>[...e,...n.filter(Boolean)]))},className:"mb-2"}),m.length>0&&(0,Pg.jsx)("ul",{className:"mb-4 space-y-1",children:m.map(((e,t)=>(0,Pg.jsxs)("li",{className:"flex justify-between items-center text-sm bg-gray-50 p-2 rounded border",children:[(0,Pg.jsx)("span",{className:"truncate",children:e.originalName}),(0,Pg.jsx)("button",{type:"button",onClick:()=>(e=>{g((t=>t.filter(((t,n)=>n!==e))))})(t),className:"text-red-500 hover:text-red-700 text-xs",children:"\u274c \uc0ad\uc81c"})]},t)))}),(0,Pg.jsx)("button",{type:"submit",disabled:v,className:"bg-emerald-500 text-white px-4 py-2 mt-2 rounded hover:bg-emerald-600 disabled:opacity-50",children:v?"\uc5c5\ub85c\ub4dc \uc911...":"\ub4f1\ub85d\ud558\uae30"})]})]})}function Wx(){var e;const{id:n}=te(),[r,i]=(0,t.useState)(null),s=hm(),a=ee(),{user:o,userData:l}=(0,t.useContext)(Dg);(0,t.useEffect)((()=>{(async()=>{try{const e=am(s,"divePoints",n),t=await vg(e);if(t.exists()){const n=t.data();i(n),await xg(e,{views:(n.views||0)+1})}else alert("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud3ec\uc778\ud2b8\uc785\ub2c8\ub2e4."),a("/points")}catch(e){console.error("\ud3ec\uc778\ud2b8 \ub85c\ub529 \uc2e4\ud328:",e),alert("\ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),a("/points")}})()}),[s,n,a]);return r?(0,Pg.jsxs)("div",{className:"max-w-3xl mx-auto p-6 bg-white shadow rounded mt-6",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-6",children:r.title}),(0,Pg.jsxs)("div",{className:"bg-gray-50 border rounded p-4 mb-6 text-sm",children:[(0,Pg.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[(0,Pg.jsx)("div",{className:"font-semibold text-gray-700",children:"\ud83d\udccd \uc9c0\uc5ed"}),(0,Pg.jsx)("div",{className:"col-span-2",children:r.region}),(0,Pg.jsx)("div",{className:"font-semibold text-gray-700",children:"\ud83c\udfe8 \ub9ac\uc870\ud2b8\uba85"}),(0,Pg.jsx)("div",{className:"col-span-2",children:r.resort||"\uc815\ubcf4 \uc5c6\uc74c"}),(0,Pg.jsx)("div",{className:"font-semibold text-gray-700",children:"\ud83c\udff7\ufe0f \ud3ec\uc778\ud2b8\uba85"}),(0,Pg.jsx)("div",{className:"col-span-2",children:r.title}),(0,Pg.jsx)("div",{className:"font-semibold text-gray-700",children:"\ud83d\udccf \uc218\uc2ec"}),(0,Pg.jsx)("div",{className:"col-span-2",children:r.depth||"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Pg.jsxs)("div",{className:"mt-4",children:[(0,Pg.jsx)("div",{className:"font-semibold text-gray-700 mb-1",children:"\ud83d\udcdd \uc124\uba85"}),(0,Pg.jsx)("div",{className:"text-gray-800 whitespace-pre-line",children:r.description})]})]}),r.location&&(0,Pg.jsxs)("div",{className:"mb-6",children:[(0,Pg.jsx)("h3",{className:"font-semibold mb-2 text-red-600",children:"\ud83d\udccc \uc704\uce58"}),(0,Pg.jsx)("iframe",{title:"Google Map",src:`https://maps.google.com/maps?q=${encodeURIComponent(r.location)}&output=embed`,width:"100%",height:"300",style:{border:0},allowFullScreen:!0,loading:"lazy",className:"rounded"})]}),(null===(e=r.imageUrls)||void 0===e?void 0:e.length)>0&&(0,Pg.jsxs)("div",{className:"mb-6",children:[(0,Pg.jsx)("h3",{className:"font-semibold mb-2",children:"\ud83d\udcf8 \uc5c5\ub85c\ub4dc\ub41c \uc0ac\uc9c4"}),(0,Pg.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:r.imageUrls.map(((e,t)=>(0,Pg.jsx)("img",{src:e,alt:`\ud3ec\uc778\ud2b8 \uc774\ubbf8\uc9c0 ${t+1}`,className:"w-full rounded shadow border object-cover"},t)))})]}),(0,Pg.jsxs)("div",{className:"text-sm text-gray-500 border-t pt-4 flex justify-between",children:[(0,Pg.jsxs)("div",{children:["\uc791\uc131\uc790: ",(0,Pg.jsx)("span",{className:"mr-1",children:r.levelIcon}),r.nickname||r.author]}),(0,Pg.jsxs)("div",{children:["\uc870\ud68c\uc218: ",r.views]})]}),(r.authorUid===(null===o||void 0===o?void 0:o.uid)||(null===l||void 0===l?void 0:l.admin))&&(0,Pg.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,Pg.jsx)("button",{onClick:()=>a(`/points/edit/${n}`),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\uc218\uc815"}),(0,Pg.jsx)("button",{onClick:async()=>{if(window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await Sg(am(s,"divePoints",n)),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),a("/points")}catch(e){console.error("\uc0ad\uc81c \uc2e4\ud328:",e),alert("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\uc0ad\uc81c"})]})]}):(0,Pg.jsx)("div",{className:"text-center mt-20 text-gray-500",children:"\u23f3 \ud3ec\uc778\ud2b8 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."})}function Gx(){const{id:e}=te(),{user:n,userData:r}=(0,t.useContext)(Dg),i=ee(),s=hm(),a=ny(),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),[b,w]=(0,t.useState)(null),[x,S]=(0,t.useState)(""),[k,C]=(0,t.useState)(!1),[E,_]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{const t=am(s,"divePoints",e),n=await vg(t);if(n.exists()){const e=n.data();l(e.region||""),u(e.resort||""),h(e.title||""),p(e.depth||""),g(e.description||""),y(e.location||""),S(e.imageUrl||"")}else alert("\ud3ec\uc778\ud2b8 \uc815\ubcf4\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),i("/points")})()}),[s,e,i]);return(0,Pg.jsxs)("div",{className:"max-w-3xl mx-auto p-6 bg-white shadow rounded mt-6",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\u270f\ufe0f \ub2e4\uc774\ube0c \ud3ec\uc778\ud2b8 \uc218\uc815"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),o&&c&&d&&m){_(!0);try{let t=x;if(k&&(t=""),b){const e=ty(a,`divePoints/${Date.now()}_${b.name}`);await Jv(e,b),t=await Zv(e)}await xg(am(s,"divePoints",e),{region:o,resort:c,title:d,depth:f,description:m,location:v,imageUrl:t}),alert("\uc218\uc815\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),i("/points")}catch(n){console.error("\uc218\uc815 \uc911 \uc624\ub958:",n),alert("\uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}_(!1)}else alert("\ud544\uc218 \ud56d\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},children:[(0,Pg.jsx)("input",{type:"text",placeholder:"\uc9c0\uc5ed\uba85",value:o,onChange:e=>l(e.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",placeholder:"\ub9ac\uc870\ud2b8\uba85",value:c,onChange:e=>u(e.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",placeholder:"\ud3ec\uc778\ud2b8\uba85",value:d,onChange:e=>h(e.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),(0,Pg.jsx)("input",{type:"text",placeholder:"\uc218\uc2ec \uc815\ubcf4 (\uc608: \ucd5c\ub300 18m)",value:f,onChange:e=>p(e.target.value),className:"w-full mb-4 p-2 border rounded"}),(0,Pg.jsx)("textarea",{placeholder:"\ud3ec\uc778\ud2b8 \uc124\uba85",value:m,onChange:e=>g(e.target.value),className:"w-full mb-4 p-2 border rounded h-40",required:!0}),(0,Pg.jsx)("input",{type:"text",placeholder:"\uc704\uce58 \ub610\ub294 \uc88c\ud45c",value:v,onChange:e=>y(e.target.value),className:"w-full mb-4 p-2 border rounded"}),x&&!k&&!b&&(0,Pg.jsxs)("div",{className:"mb-4 relative group",children:[(0,Pg.jsx)("img",{src:x,alt:"\uae30\uc874 \uc774\ubbf8\uc9c0",className:"w-full h-auto rounded"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>C(!0),className:"absolute top-1 right-1 text-white bg-red-500 hover:bg-red-600 text-xs px-2 py-1 rounded",children:"\u274c \uc0ad\uc81c"})]}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",onChange:e=>w(e.target.files[0]),className:"mb-6"}),(0,Pg.jsx)("div",{className:"mt-4",children:(0,Pg.jsx)("button",{type:"submit",disabled:E,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50",children:E?"\uc5c5\ub85c\ub4dc \uc911...":"\uc218\uc815 \uc644\ub8cc"})})]})]})}const Kx=[{key:"mask",label:"\ub9c8\uc2a4\ud06c",image:"/gear/mask.jpg"},{key:"suit",label:"\uc288\ud2b8",image:"/gear/suit.jpg"},{key:"fin",label:"\ud540",image:"/gear/fin.jpg"},{key:"bcd",label:"BCD",image:"/gear/bcd.jpg"},{key:"regulator",label:"\ud638\ud761\uae30",image:"/gear/regulator.jpg"},{key:"computer",label:"\ucef4\ud4e8\ud130",image:"/gear/computer.jpg"},{key:"etc",label:"\uae30\ud0c0 \uc7a5\ube44",image:"/gear/etc.jpg"}];function Qx(){const e=ee();return(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-10",children:[(0,Pg.jsx)("h1",{className:"text-3xl font-bold mb-10 text-center",children:"\ud83d\udd27 \ub2e4\uc774\ube59 \uc7a5\ube44 \uc18c\uac1c"}),(0,Pg.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:Kx.map((t=>(0,Pg.jsxs)("div",{onClick:()=>e(`/DiveGear/${t.key}`),className:"cursor-pointer border rounded-lg shadow-sm hover:shadow-md transition p-4 text-center bg-white",children:[(0,Pg.jsx)("img",{src:t.image,alt:t.label,onError:e=>e.target.src="/gear/default.png",className:"w-full h-32 object-cover rounded mb-3"}),(0,Pg.jsx)("h2",{className:"text-lg font-semibold",children:t.label})]},t.key)))})]})}function Xx(e){let{gearId:n}=e;const r=hm(),{user:i,userData:s}=(0,t.useContext)(Dg),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)("");(0,t.useEffect)((()=>{if(!n)return;const e=Cg(eg(sm(r,"gearComments",n,"comments"),sg("createdAt")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));o(t)}));return()=>e()}),[r,n]);return(0,Pg.jsxs)("div",{className:"mt-10",children:[(0,Pg.jsx)("h3",{className:"text-xl font-bold mb-3",children:"\ud83d\udcac \ub313\uae00"}),(0,Pg.jsx)("div",{className:"space-y-3",children:a.map((e=>{var t;return(0,Pg.jsxs)("div",{className:"border border-gray-200 p-3 rounded",children:[(0,Pg.jsxs)("div",{className:"text-sm text-gray-600 mb-1 flex justify-between",children:[(0,Pg.jsxs)("span",{children:[e.author," \xb7 ",null===(t=e.createdAt)||void 0===t?void 0:t.toDate().toLocaleString()]}),(null===i||void 0===i?void 0:i.uid)===e.uid&&(0,Pg.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await Sg(am(r,"gearComments",n,"comments",e))}catch(t){console.error("\ub313\uae00 \uc0ad\uc81c \uc624\ub958:",t)}})(e.id),className:"text-red-500 text-xs hover:underline",children:"\uc0ad\uc81c"})]}),(0,Pg.jsx)("div",{children:e.content})]},e.id)}))}),i?(0,Pg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l.trim())try{await kg(sm(r,"gearComments",n,"comments"),{content:l,uid:null===i||void 0===i?void 0:i.uid,author:(null===s||void 0===s?void 0:s.nickname)||(null===i||void 0===i?void 0:i.email)||"\uc775\uba85",createdAt:Ig()}),c("")}catch(t){console.error("\ub313\uae00 \uc791\uc131 \uc624\ub958:",t)}},className:"mt-4 space-y-2",children:[(0,Pg.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",className:"w-full p-2 border rounded min-h-[80px]"}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-500 hover:bg-sky-600 text-white px-4 py-2 rounded",children:"\ub313\uae00 \uc791\uc131"})]}):(0,Pg.jsx)("p",{className:"text-gray-500 text-sm mt-4",children:"\u203b \ub85c\uadf8\uc778 \ud6c4 \ub313\uae00\uc744 \uc791\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})}const Yx={mask:{title:"\ub9c8\uc2a4\ud06c",description:"\ub9c8\uc2a4\ud06c\ub294 \uc5bc\uad74\uacfc \ub208\uc744 \ubcf4\ud638\ud558\uace0 \ubb3c\uc18d \uc2dc\uc57c\ub97c \ud655\ubcf4\ud574\uc8fc\ub294 \uc7a5\ube44\uc785\ub2c8\ub2e4. \ub2e8\ub80c\uc988, \uc774\uc911\ub80c\uc988 \ub4f1 \uc885\ub958\uac00 \uc788\uc73c\uba70 \uae40\uc11c\ub9bc \ubc29\uc9c0 \ucc98\ub9ac\uac00 \uc911\uc694\ud569\ub2c8\ub2e4.",image:"/gear/mask.jpg"},suit:{title:"\uc288\ud2b8",description:"\uc288\ud2b8\ub294 \uccb4\uc628\uc744 \uc720\uc9c0\ud558\uace0 \uc678\ubd80\ub85c\ubd80\ud130 \ud53c\ubd80\ub97c \ubcf4\ud638\ud558\ub294 \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4. \uc6fb\uc288\ud2b8, \ub4dc\ub77c\uc774\uc288\ud2b8 \ub4f1 \ub2e4\uc591\ud55c \uc885\ub958\uac00 \uc788\uc2b5\ub2c8\ub2e4.",image:"/gear/suit.jpg"},fin:{title:"\ud540",description:"\ud540\uc740 \ub2e4\ub9ac\uc758 \ucd94\uc9c4\ub825\uc744 \ub3c4\uc640\uc90d\ub2c8\ub2e4. \uc624\ud508\ud790 \ud540\uacfc \ud480\ud48b \ud540\uc774 \uc788\uc73c\uba70 \uc6a9\ub3c4\uc5d0 \ub9de\uac8c \uc120\ud0dd\ud569\ub2c8\ub2e4.",image:"/gear/fin.jpg"},bcd:{title:"BCD",description:"BCD\ub294 \ubd80\ub825 \uc870\uc808 \uc7a5\ube44\ub85c, \uc218\uc2ec\uc5d0 \ub530\ub77c \ubd80\ub825\uc744 \uc870\uc808\ud558\uc5ec \uc911\uc131\uc744 \uc720\uc9c0\ud560 \uc218 \uc788\ub3c4\ub85d \ub3d5\uc2b5\ub2c8\ub2e4.",image:"/gear/bcd.jpg"},regulator:{title:"\ud638\ud761\uae30",description:"\ub808\uade4\ub808\uc774\ud130\ub294 \uacf5\uae30\ud0f1\ud06c\uc758 \uc555\ucd95 \uacf5\uae30\ub97c \ub9c8\uc2e4 \uc218 \uc788\uac8c \ud574\uc8fc\ub294 \uc7a5\ube44\uc785\ub2c8\ub2e4. 1\ub2e8\uacc4\uc640 2\ub2e8\uacc4\ub85c \uad6c\uc131\ub429\ub2c8\ub2e4.",image:"/gear/regulator.jpg"},computer:{title:"\ub2e4\uc774\ube0c \ucef4\ud4e8\ud130",description:"\uc218\uc2ec, \uc2dc\uac04, \ubb34\uac10\uc555 \uc2dc\uac04 \ub4f1\uc744 \uacc4\uc0b0\ud574\uc8fc\ub294 \uc804\uc790 \uc7a5\ube44\ub85c, \ub2e4\uc774\ube59 \uc548\uc804\uc744 \uc704\ud55c \ud544\uc218 \uc7a5\ube44\uc785\ub2c8\ub2e4.",image:"/gear/computer.jpg"},etc:{title:"\uae30\ud0c0 \uc7a5\ube44",description:"\ubd80\uce20, \uc7a5\uac11, \uc2a4\ub178\ud074, \ub098\uce68\ubc18 \ub4f1 \ub2e4\uc591\ud55c \ubcf4\uc870 \uc7a5\ube44\ub4e4\ub3c4 \uc911\uc694\ud569\ub2c8\ub2e4.",image:"/gear/etc.jpg"}};function Jx(){const{gearId:e}=te(),t=Yx[e];return t?(0,Pg.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-10",children:[(0,Pg.jsxs)("h1",{className:"text-3xl font-bold mb-6",children:["\ud83d\udee0 ",t.title]}),(0,Pg.jsx)("img",{src:t.image,alt:t.title,className:"w-full h-64 object-cover rounded mb-4"}),(0,Pg.jsx)("p",{className:"text-gray-700 leading-relaxed mb-8 whitespace-pre-line",children:t.description}),(0,Pg.jsx)(Xx,{gearId:e})]}):(0,Pg.jsx)("div",{className:"text-center mt-20",children:"\uc7a5\ube44 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})}function Zx(){const[e,n]=(0,t.useState)([]),r=hm();return(0,t.useEffect)((()=>{const e=Cg(eg(sm(r,"community","instructor","posts"),sg("createdAt","desc")),(async e=>{const t=await Promise.all(e.docs.map((async e=>{const t=e.data(),n=await Ng(sm(r,"community","instructor","posts",e.id,"comments"));let i="";if(t.authorUid)try{const e=am(r,"users",t.authorUid),n=await vg(e);n.exists()&&(i=n.data().levelIcon||"\ud83d\udc64")}catch(s){console.error("\uc791\uc131\uc790 levelIcon \ub85c\ub529 \uc2e4\ud328:",s)}return{id:e.id,...t,commentCount:n.data().count||0,levelIcon:i}})));n(t)}));return()=>e()}),[r]),(0,Pg.jsxs)("div",{className:"max-w-6xl mx-auto mt-6 px-4",children:[(0,Pg.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,Pg.jsx)("h1",{className:"text-xl font-bold",children:"\ud83c\udf93 Instructor \uac8c\uc2dc\ud310"}),(0,Pg.jsx)(Ie,{to:"/instructor/write",className:"bg-sky-500 text-white px-3 py-1.5 text-sm rounded hover:bg-sky-600",children:"\uc0c8 \uae00 \uc791\uc131"})]}),(0,Pg.jsx)("div",{className:"overflow-x-auto",children:(0,Pg.jsxs)("table",{className:"min-w-full text-[0.95rem] leading-[1.8rem] text-center border border-gray-200",children:[(0,Pg.jsx)("thead",{className:"bg-gray-100 text-gray-700",children:(0,Pg.jsxs)("tr",{children:[(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\ubc88\ud638"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border text-left w-[45%]",children:"\uc81c\ubaa9"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-24",children:"\uc791\uc131\uc790"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-28",children:"\uc791\uc131\uc77c"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\ucd94\ucc9c"}),(0,Pg.jsx)("th",{className:"py-2 px-2 border w-12",children:"\uc870\ud68c"})]})}),(0,Pg.jsx)("tbody",{children:e.map(((t,n)=>{var r;return(0,Pg.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:e.length-n}),(0,Pg.jsx)("td",{className:"py-2 px-2 border text-left truncate",children:(0,Pg.jsxs)(Ie,{to:`/instructor/${t.id}`,className:"text-black hover:underline",children:[t.title," ",t.images&&t.images.length>0&&(0,Pg.jsx)("span",{className:"ml-1",children:"\ud83d\udcf7"}),t.commentCount>0&&(0,Pg.jsxs)("span",{className:"text-sky-600 font-semibold ml-1",children:["(",t.commentCount,")"]})]})}),(0,Pg.jsxs)("td",{className:"py-2 px-2 border truncate",children:[t.levelIcon||"\ud83d\udc64"," ",t.nickname||t.author]}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:null===(r=t.createdAt)||void 0===r?void 0:r.toDate().toLocaleDateString("ko-KR")}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.likes||0}),(0,Pg.jsx)("td",{className:"py-2 px-2 border",children:t.views||0})]},t.id)}))})]})})]})}const eS=e=>{switch(e){case"OpenWater":return"\ud83c\udd5e";case"Advance":return"\ud83c\udd50";case"Rescue":return"\ud83c\udd61";case"DiveMaster":return"\ud83c\udd5c";case"Instructor":return"\ud83c\udd58";case"Trainer":return"\ud83c\udd63";default:return"\ud83d\udc64"}};function tS(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)([]),o=hm(),l=ny(),c=ee(),{user:u,userData:d}=(0,t.useContext)(Dg);return(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto mt-10 px-4",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\u270d\ufe0f Instructor \uac8c\uc2dc\ud310 \uae00\uc4f0\uae30"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),u&&null!==d&&void 0!==d&&d.nickname)if(e.trim()&&r.trim())try{const t=await Promise.all(s.map((async e=>{const t=await ib(e,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),n=ty(l,`instructor/${Date.now()}_${e.name}`);return await Jv(n,t),await Zv(n)})));await kg(sm(o,"community","instructor","posts"),{title:e,content:r,images:t,author:d.nickname,level:d.level||"",levelIcon:d.levelIcon||eS(d.level),authorUid:u.uid,createdAt:Ig(),likes:0,likedBy:[],views:0}),alert("\uc791\uc131 \uc644\ub8cc!"),c("/instructor")}catch(n){console.error("\uc5c5\ub85c\ub4dc \uc624\ub958:",n),alert("\uc791\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694");else alert("\ub85c\uadf8\uc778 \ub610\ub294 \ub2c9\ub124\uc784 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},className:"bg-white p-6 shadow rounded space-y-4",children:[(0,Pg.jsx)("input",{type:"text",placeholder:"\uc81c\ubaa9",value:e,onChange:e=>n(e.target.value),className:"w-full p-3 border rounded",required:!0}),(0,Pg.jsx)("textarea",{placeholder:"\ub0b4\uc6a9",value:r,onChange:e=>i(e.target.value),className:"w-full p-3 border rounded min-h-[150px]",required:!0}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-2 font-semibold",children:"\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc (\ucd5c\ub300 5\uc7a5, 1MB \uc774\ud558):"}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);t.length+s.length>5?alert("\uc774\ubbf8\uc9c0\ub294 \ucd5c\ub300 5\uc7a5\uae4c\uc9c0 \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."):a((e=>[...e,...t]))},className:"block"}),(0,Pg.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:s.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative flex items-center gap-1 text-sm text-gray-600 border px-2 py-1 rounded",children:["\ud83d\udcf7 ",e.name,(0,Pg.jsx)("button",{type:"button",onClick:()=>{return e=t,void a((t=>t.filter(((t,n)=>n!==e))));var e},className:"ml-1 text-red-500 hover:text-red-700 font-bold",children:"\xd7"})]},t)))})]}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-600 text-white px-6 py-2 rounded hover:bg-sky-700",children:"\uc791\uc131"})]})]})}function nS(){const{id:e}=te(),n=ee(),r=hm(),i=ny(),{user:s}=(0,t.useContext)(Dg),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)([]),[p,m]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(async()=>{const t=am(r,"community","instructor","posts",e),i=await vg(t);if(i.exists()){const e=i.data();if((null===s||void 0===s?void 0:s.uid)!==e.authorUid)return alert("\uc791\uc131\uc790\ub9cc \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),void n(-1);o(e.title),c(e.content),d(e.images||[]),m(!1)}else alert("\uac8c\uc2dc\uae00\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),n(-1)})()}),[r,e,s,n]);return p?(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."}):(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto mt-10 px-4",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\u270f\ufe0f Instructor \uac8c\uc2dc\uae00 \uc218\uc815"}),(0,Pg.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),a.trim()&&l.trim())try{const t=await Promise.all(h.map((async e=>{const t=await ib(e,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),n=ty(i,`instructor/${Date.now()}_${e.name}`);return await Jv(n,t),await Zv(n)}))),s={title:a,content:l,images:[...u,...t]};await xg(am(r,"community","instructor","posts",e),s),alert("\uc218\uc815 \uc644\ub8cc!"),n(`/instructor/${e}`)}catch(s){console.error("\uc218\uc815 \uc2e4\ud328:",s),alert("\uac8c\uc2dc\uae00 \uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694")},className:"bg-white p-6 shadow rounded space-y-4",children:[(0,Pg.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),className:"w-full p-3 border rounded",required:!0}),(0,Pg.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),className:"w-full p-3 border rounded min-h-[150px]",required:!0}),u.length>0&&(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("p",{className:"font-semibold mb-2",children:"\uae30\uc874 \uc774\ubbf8\uc9c0"}),(0,Pg.jsx)("div",{className:"flex flex-wrap gap-3",children:u.map(((e,t)=>(0,Pg.jsxs)("div",{className:"relative",children:[(0,Pg.jsx)("img",{src:e,alt:`img-${t}`,className:"w-32 h-32 object-cover rounded border"}),(0,Pg.jsx)("button",{type:"button",onClick:()=>(e=>{d((t=>t.filter((t=>t!==e))))})(e),className:"absolute top-1 right-1 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"\uc0ad\uc81c"})]},t)))})]}),(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("label",{className:"block mb-2 font-semibold",children:"\uc0c8 \uc774\ubbf8\uc9c0 \ucd94\uac00 (\ucd5c\ub300 5\uc7a5)"}),(0,Pg.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);u.length+h.length+t.length>5?alert("\uc774\ubbf8\uc9c0\ub294 \ucd5c\ub300 5\uc7a5\uae4c\uc9c0 \uac00\ub2a5\ud569\ub2c8\ub2e4."):f((e=>[...e,...t]))},className:"block"})]}),(0,Pg.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600",children:"\uc800\uc7a5\ud558\uae30"})]})]})}function rS(){var e,n;const{id:r}=te(),i=ee(),s=hm(),{user:a,userData:o}=(0,t.useContext)(Dg),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{const e=am(s,"community","instructor","posts",r);if(null!==a&&void 0!==a&&a.uid){const t=am(s,"community","instructor","posts",r,"views",a.uid);(await vg(t)).exists()||(await xg(e,{views:jg(1)}),await wg(t,{viewedAt:Ig()}))}const t=await vg(e);if(t.exists()){var n;const e=t.data();c({id:t.id,...e}),null!==(n=e.likedBy)&&void 0!==n&&n.includes(null===a||void 0===a?void 0:a.uid)&&v(!0)}else alert("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uac8c\uc2dc\uae00\uc785\ub2c8\ub2e4."),i("/instructor")})()}),[s,r,i,a]),(0,t.useEffect)((()=>{const e=Cg(eg(sm(s,"community","instructor","posts",r,"comments"),sg("createdAt","asc")),(e=>{d(e.docs.map((e=>({id:e.id,...e.data()}))))}));return()=>e()}),[s,r]);const y=async e=>{e.preventDefault(),h.trim()&&(await kg(sm(s,"community","instructor","posts",r,"comments"),{content:h,parentId:p||null,author:null===a||void 0===a?void 0:a.email,nickname:(null===o||void 0===o?void 0:o.nickname)||"",levelIcon:(null===o||void 0===o?void 0:o.levelIcon)||"\ud83d\udc64",authorUid:null===a||void 0===a?void 0:a.uid,createdAt:Ig()}),f(""),m(null))},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u.filter((t=>null===e?null===t.parentId||void 0===t.parentId:t.parentId===e)).map((e=>{var n;return(0,Pg.jsxs)("div",{style:{marginLeft:20*t},className:"border-b pb-3 text-sm",children:[(0,Pg.jsxs)("div",{className:"flex justify-between text-gray-600 mb-1",children:[(0,Pg.jsxs)("span",{children:[(0,Pg.jsx)("span",{className:"mr-1",children:e.levelIcon||"\ud83d\udc64"}),e.nickname||e.author]}),(0,Pg.jsx)("span",{children:null===(n=e.createdAt)||void 0===n?void 0:n.toDate().toLocaleString()})]}),(0,Pg.jsx)("p",{className:"text-gray-800 whitespace-pre-line",children:e.content}),(null===a||void 0===a?void 0:a.uid)===e.authorUid&&(0,Pg.jsx)("button",{onClick:()=>(async e=>{window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&await Sg(am(s,"community","instructor","posts",r,"comments",e))})(e.id),className:"text-xs text-red-500 hover:underline mt-1",children:"\uc0ad\uc81c"}),(0,Pg.jsx)("button",{onClick:()=>m(e.id),className:"text-xs text-blue-500 hover:underline ml-2",children:"\ub2f5\uae00 \ub2ec\uae30"}),p===e.id&&(0,Pg.jsxs)("form",{onSubmit:y,className:"mt-2",children:[(0,Pg.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),className:"w-full border rounded p-2 min-h-[60px]",placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0}),(0,Pg.jsx)("button",{type:"submit",className:"mt-1 bg-sky-600 text-white px-3 py-1 rounded text-sm hover:bg-sky-700",children:"\ub2f5\uae00 \uc791\uc131"})]}),b(e.id,t+1)]},e.id)}))};return l?(0,Pg.jsxs)("div",{className:"max-w-4xl mx-auto mt-10 px-4",children:[(0,Pg.jsx)(Ie,{to:"/instructor",className:"text-blue-600 hover:underline text-sm",children:"\u2190 Instructor \uac8c\uc2dc\ud310 \ubaa9\ub85d\uc73c\ub85c"}),(0,Pg.jsx)("h1",{className:"text-2xl font-bold mt-4",children:l.title}),(0,Pg.jsxs)("div",{className:"text-sm text-gray-600 flex gap-4 mt-2 mb-4",children:[(0,Pg.jsxs)("span",{children:[l.levelIcon||"\ud83d\udc64"," ",l.nickname||l.author]}),(0,Pg.jsx)("span",{children:null===(e=l.createdAt)||void 0===e?void 0:e.toDate().toLocaleString()})]}),(0,Pg.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,Pg.jsxs)("span",{children:["\uc870\ud68c\uc218: ",l.views||0]}),(0,Pg.jsxs)("span",{children:["\ucd94\ucc9c: ",l.likes||0]}),(0,Pg.jsx)("button",{disabled:g,onClick:async()=>{if(!a||!l||g)return;const e=am(s,"community","instructor","posts",r);await xg(e,{likes:jg(1),likedBy:[...l.likedBy||[],a.uid]}),c((e=>({...e,likes:(e.likes||0)+1,likedBy:[...e.likedBy||[],a.uid]}))),v(!0)},className:"px-3 py-1 rounded text-white text-sm "+(g?"bg-gray-400":"bg-pink-500 hover:bg-pink-600"),children:"\ud83d\udc4d \ucd94\ucc9c\ud558\uae30"})]}),(0,Pg.jsx)("div",{className:"space-y-4 my-6",children:null===(n=l.images)||void 0===n?void 0:n.map(((e,t)=>(0,Pg.jsx)("img",{src:e,alt:`img-${t}`,className:"w-full rounded"},t)))}),(0,Pg.jsx)("p",{className:"whitespace-pre-line text-gray-800 mb-10",children:l.content}),(null===a||void 0===a?void 0:a.uid)===l.authorUid&&(0,Pg.jsxs)("div",{className:"flex gap-3 mb-10",children:[(0,Pg.jsx)(Ie,{to:`/instructor/edit/${l.id}`,className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"\uc218\uc815"}),(0,Pg.jsx)("button",{onClick:async()=>{window.confirm("\uac8c\uc2dc\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await Sg(am(s,"community","instructor","posts",r)),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),i("/instructor"))},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\uc0ad\uc81c"})]}),(0,Pg.jsxs)("div",{className:"border-t pt-6",children:[(0,Pg.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["\ud83d\udcac \ub313\uae00 (",u.length,")"]}),b(),a?(0,Pg.jsxs)("form",{onSubmit:y,className:"space-y-2 mt-4",children:[(0,Pg.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),className:"w-full border rounded p-2 min-h-[80px]",placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0}),(0,Pg.jsx)("button",{type:"submit",className:"bg-sky-600 text-white px-4 py-2 rounded hover:bg-sky-700",children:"\ub313\uae00 \uc791\uc131"})]}):(0,Pg.jsx)("p",{className:"text-sm text-gray-500",children:"\u203b \ub85c\uadf8\uc778 \ud6c4 \ub313\uae00\uc744 \uc791\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})]}):(0,Pg.jsx)("div",{className:"text-center mt-10",children:"\ub85c\ub529 \uc911..."})}function iS(){const{userData:e,loading:n}=(0,t.useContext)(Dg),r=hm(),[i,s]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)([]),[p,m]=(0,t.useState)([]),[g,v]=(0,t.useState)([]),[y,b]=(0,t.useState)(0),[w,x]=(0,t.useState)(0),[S,k]=(0,t.useState)(0),[C,E]=(0,t.useState)(0),[_,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>{null!==e&&void 0!==e&&e.admin&&!n&&((async()=>{try{const e=await bg(eg(sm(r,"community/free/posts"),sg("createdAt","desc"))),t=await bg(eg(sm(r,"community/qna/posts"),sg("createdAt","desc"))),n=await bg(eg(sm(r,"tourRequests"),sg("createdAt","desc"))),i=await bg(eg(sm(r,"gallery"),sg("createdAt","desc"))),a=await bg(eg(sm(r,"tourVideos"),sg("createdAt","desc"))),l=await bg(eg(sm(r,"divePoints"),sg("createdAt","desc"))),u=await bg(eg(sm(r,"users")));s(e.docs.map((e=>({id:e.id,...e.data()})))),o(t.docs.map((e=>({id:e.id,...e.data()})))),c(n.docs.map((e=>({id:e.id,...e.data()})))),d(i.docs.map((e=>({id:e.id,...e.data()})))),f(a.docs.map((e=>({id:e.id,...e.data()})))),v(l.docs.map((e=>({id:e.id,...e.data()})))),m(u.docs.map((e=>({id:e.id,...e.data()}))))}catch(e){console.error("\ud83d\udd25 \ub370\uc774\ud130 \ubd88\ub7ec\uc624\uae30 \uc624\ub958:",e)}})(),(async()=>{try{const e=await bg(sm(r,"stats"));if(!e.empty){const t=e.docs[0].data();b(t.visitorCount||0)}const t=await Ng(sm(r,"users"));x(t.data().count||0);const n=await Ng(sm(r,"community/free/posts"));k(n.data().count||0);const i=new Date;i.setHours(0,0,0,0);const s=eg(sm(r,"users"),ng("createdAt",">=",i)),a=await Ng(s);E(a.data().count||0)}catch(e){console.error("\ud83d\udd25 \uc0ac\uc774\ud2b8 \ud1b5\uacc4 \ub85c\ub529 \uc2e4\ud328:",e)}})())}),[r,e,n]);return(0,Pg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[(0,Pg.jsx)("h1",{className:"text-2xl font-bold text-center text-blue-700 mb-10",children:"\ud83d\udee0\ufe0f \uad00\ub9ac\uc790 \ub300\uc2dc\ubcf4\ub4dc"}),(0,Pg.jsxs)("div",{className:"bg-yellow-100 border border-yellow-400 p-6 rounded-lg shadow text-center mb-10",children:[(0,Pg.jsx)("h2",{className:"text-xl font-bold text-yellow-800 mb-6",children:"\ud83d\udd10 \uc0ac\uc774\ud2b8 \ud1b5\uacc4"}),(0,Pg.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-gray-700 text-sm mb-6",children:[(0,Pg.jsxs)("div",{onClick:()=>N((e=>!e)),className:"bg-white p-3 rounded shadow cursor-pointer hover:bg-gray-50 transition",children:["\ud83d\udc65 \uc804\uccb4 \ud68c\uc6d0 \uc218",(0,Pg.jsxs)("div",{className:"text-lg font-bold mt-1",children:[w,"\uba85"]})]}),(0,Pg.jsxs)("div",{className:"bg-white p-3 rounded shadow",children:["\ud83d\udcdd \uc804\uccb4 \uac8c\uc2dc\uae00 \uc218",(0,Pg.jsxs)("div",{className:"text-lg font-bold mt-1",children:[S,"\uac74"]})]}),(0,Pg.jsxs)("div",{className:"bg-white p-3 rounded shadow col-span-2",children:["\ud83d\udcc8 \uc624\ub298 \uac00\uc785\uc790 \uc218",(0,Pg.jsxs)("div",{className:"text-lg font-bold mt-1",children:[C,"\uba85"]})]}),(0,Pg.jsxs)("div",{className:"bg-white p-3 rounded shadow col-span-2",children:["\ud83c\udf0e \uc804\uccb4 \ubc29\ubb38\uc790 \uc218",(0,Pg.jsxs)("div",{className:"text-lg font-bold mt-1",children:[y.toLocaleString(),"\ud68c"]})]})]}),_&&(0,Pg.jsxs)("div",{className:"bg-white rounded border p-4 text-left max-h-[400px] overflow-y-auto transition-all duration-300 mt-4",children:[(0,Pg.jsx)("h3",{className:"text-base font-semibold mb-2",children:"\ud83d\udc64 \uc804\uccb4 \ud68c\uc6d0 \ubaa9\ub85d"}),(0,Pg.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:p.map((e=>{var t;return(0,Pg.jsxs)("div",{className:"border rounded shadow-sm p-3 text-sm bg-white",children:[(0,Pg.jsxs)("p",{children:[(0,Pg.jsx)("strong",{children:"\uc774\ub984:"})," ",e.name||"-"]}),(0,Pg.jsxs)("p",{children:[(0,Pg.jsx)("strong",{children:"\ub2c9\ub124\uc784:"})," ",e.nickname]}),(0,Pg.jsxs)("p",{children:[(0,Pg.jsx)("strong",{children:"\uc0dd\ub144\uc6d4\uc77c:"})," ",e.birthdate]}),(0,Pg.jsxs)("p",{children:[(0,Pg.jsx)("strong",{children:"\ub2e4\uc774\ube0c \ub2e8\uccb4:"})," ",e.agency]}),(0,Pg.jsxs)("p",{children:[(0,Pg.jsx)("strong",{children:"\ub4f1\uae09:"})," ",e.level]}),(0,Pg.jsxs)("p",{className:"truncate whitespace-nowrap overflow-hidden text-ellipsis",children:[(0,Pg.jsx)("strong",{children:"\uc774\uba54\uc77c:"})," ",e.email]}),(0,Pg.jsxs)("p",{children:[(0,Pg.jsx)("strong",{children:"\uac00\uc785\uc77c:"})," ",null!==(t=e.createdAt)&&void 0!==t&&t.seconds?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"-"]}),!e.admin&&(0,Pg.jsx)("button",{className:"bg-red-500 text-white text-xs px-3 py-1 mt-2 rounded w-full",onClick:()=>(async e=>{window.confirm("\uc774 \ud68c\uc6d0\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await Sg(am(r,"users",e)),alert("\ud68c\uc6d0\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),window.location.reload())})(e.id),children:"\ud68c\uc6d0\uc0ad\uc81c"})]},e.id)}))})]})]}),(0,Pg.jsx)(I,{title:"\ud83d\udccb \uc790\uc720\uac8c\uc2dc\ud310 \ubaa9\ub85d",color:"text-yellow-700",posts:i,path:"community/free/posts"}),(0,Pg.jsx)(I,{title:"\ud83d\udca1 QnA \uac8c\uc2dc\uae00 \ubaa9\ub85d",color:"text-emerald-600",posts:a,path:"community/qna/posts"}),(0,Pg.jsx)(I,{title:"\ud83d\udea9 \ud22c\uc5b4 \uc2e0\uccad \ubaa9\ub85d",color:"text-pink-600",posts:l,path:"tourRequests",titleField:"location",fallback:"(\uc7a5\uc18c \ubbf8\uc785\ub825)"}),(0,Pg.jsx)(I,{title:"\ud83c\udf05 \uac24\ub7ec\ub9ac \uac8c\uc2dc\uae00 \ubaa9\ub85d",color:"text-purple-600",posts:u,path:"gallery"}),(0,Pg.jsx)(I,{title:"\ud83c\udfac \ud22c\uc5b4 \uc601\uc0c1 \ubaa9\ub85d",color:"text-gray-700",posts:h,path:"tourVideos",authorField:!0}),(0,Pg.jsx)(I,{title:"\ud83d\udccd \ub2e4\uc774\ube0c\ud3ec\uc778\ud2b8 \ubaa9\ub85d",color:"text-blue-600",posts:g,path:"divePoints"})]});function I(e){let{title:t,color:n,posts:i,path:s,titleField:a="title",fallback:o="\uc81c\ubaa9\uc5c6\uc74c",authorField:l=!1}=e;return(0,Pg.jsxs)("section",{className:"mb-8",children:[(0,Pg.jsx)("h2",{className:`text-lg font-semibold ${n} mb-3`,children:t}),i.map((e=>{var t;return(0,Pg.jsxs)("div",{className:"flex justify-between items-center p-2 border rounded mb-1 bg-white text-sm",children:[(0,Pg.jsxs)("div",{children:[(0,Pg.jsx)("div",{className:"font-medium",children:e[a]||o}),(0,Pg.jsxs)("div",{className:"text-xs text-gray-500",children:[new Date(1e3*(null===(t=e.createdAt)||void 0===t?void 0:t.seconds)).toLocaleString()," | \uc791\uc131\uc790: ",e.nickname||e.name||(l?e.author:"\uc775\uba85")]})]}),(0,Pg.jsx)("button",{className:"bg-red-500 text-white text-xs px-3 py-1 rounded",onClick:()=>(async(e,t)=>{window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await Sg(am(r,e,t)),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),window.location.reload())})(s,e.id),children:"\uc0ad\uc81c"})]},e.id)}))]})}}function sS(){const{user:e,loading:n}=(0,t.useContext)(Dg),r=(0,t.useRef)(!1),[i,s]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{r.current||(r.current=!0,setTimeout((()=>{s(!0)}),300))}),[]),n||!i?(0,Pg.jsx)("div",{className:"text-center mt-40 text-gray-500 text-sm",children:"\u23f3 \ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778 \uc911..."}):(0,Pg.jsx)(Ee,{children:(0,Pg.jsxs)("div",{className:"min-h-screen bg-gray-100 text-gray-800",children:[(0,Pg.jsx)(fy,{}),(0,Pg.jsxs)(be,{children:[(0,Pg.jsx)(ve,{path:"/",element:(0,Pg.jsx)(xy,{})}),(0,Pg.jsx)(ve,{path:"/login",element:(0,Pg.jsx)(Sy,{})}),(0,Pg.jsx)(ve,{path:"/signup",element:(0,Pg.jsx)(ky,{})}),(0,Pg.jsx)(ve,{path:"/profile/edit",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Cy,{})})}),(0,Pg.jsx)(ve,{path:"/community/free",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Ey,{})})}),(0,Pg.jsx)(ve,{path:"/community/free/write",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(ab,{})})}),(0,Pg.jsx)(ve,{path:"/community/free/edit/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(ob,{})})}),(0,Pg.jsx)(ve,{path:"/community/free/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(lb,{})})}),(0,Pg.jsx)(ve,{path:"/free/notice",element:(0,Pg.jsx)(my,{children:(0,Pg.jsx)(cb,{})})}),(0,Pg.jsx)(ve,{path:"/community/qna",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(ub,{})})}),(0,Pg.jsx)(ve,{path:"/community/qna/write",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(hb,{})})}),(0,Pg.jsx)(ve,{path:"/community/qna/edit/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(fb,{})})}),(0,Pg.jsx)(ve,{path:"/community/qna/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(db,{})})}),(0,Pg.jsx)(ve,{path:"/community/tour",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(mb,{})})}),(0,Pg.jsx)(ve,{path:"/community/tour/request",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(pb,{})})}),(0,Pg.jsx)(ve,{path:"/community/tour/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(gb,{})})}),(0,Pg.jsx)(ve,{path:"/tour/edit/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(vb,{})})}),(0,Pg.jsx)(ve,{path:"/gallery",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(yb,{})})}),(0,Pg.jsx)(ve,{path:"/gallery/upload",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Dx,{})})}),(0,Pg.jsx)(ve,{path:"/gallery/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Rx,{})})}),(0,Pg.jsx)(ve,{path:"/gallery/edit/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Ox,{})})}),(0,Pg.jsx)(ve,{path:"/tour-videos",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Mx,{})})}),(0,Pg.jsx)(ve,{path:"/tour-videos/upload",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Lx,{})})}),(0,Pg.jsx)(ve,{path:"/tour-videos/edit/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Fx,{})})}),(0,Pg.jsx)(ve,{path:"/shopping-mall",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Bx,{})})}),(0,Pg.jsx)(ve,{path:"/shop/gear",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Vx,{})})}),(0,Pg.jsx)(ve,{path:"/shop/figure",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(zx,{})})}),(0,Pg.jsx)(ve,{path:"/shop/etc",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)($x,{})})}),(0,Pg.jsx)(ve,{path:"/DiveGear",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Qx,{})})}),(0,Pg.jsx)(ve,{path:"/DiveGear/:gearId",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Jx,{})})}),(0,Pg.jsx)(ve,{path:"/points",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(qx,{})})}),(0,Pg.jsx)(ve,{path:"/points/write",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Hx,{})})}),(0,Pg.jsx)(ve,{path:"/points/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Wx,{})})}),(0,Pg.jsx)(ve,{path:"/points/edit/:id",element:(0,Pg.jsx)(py,{children:(0,Pg.jsx)(Gx,{})})}),(0,Pg.jsx)(ve,{path:"/instructor",element:(0,Pg.jsx)(gy,{children:(0,Pg.jsx)(Zx,{})})}),(0,Pg.jsx)(ve,{path:"/instructor/write",element:(0,Pg.jsx)(gy,{children:(0,Pg.jsx)(tS,{})})}),(0,Pg.jsx)(ve,{path:"/instructor/edit/:id",element:(0,Pg.jsx)(gy,{children:(0,Pg.jsx)(nS,{})})}),(0,Pg.jsx)(ve,{path:"/instructor/:id",element:(0,Pg.jsx)(gy,{children:(0,Pg.jsx)(rS,{})})}),(0,Pg.jsx)(ve,{path:"/admin/dashboard",element:(0,Pg.jsx)(my,{children:(0,Pg.jsx)(iS,{})})})]})]})})}const aS=function(){const[e,n]=(0,t.useState)("en");return(0,Pg.jsx)(Og.Provider,{value:{language:e,setLanguage:n},children:(0,Pg.jsx)(Rg,{children:(0,Pg.jsx)(sS,{})})})};i.createRoot(document.getElementById("root")).render((0,Pg.jsx)(aS,{}))})()})();
//# sourceMappingURL=main.264dd1e1.js.map